{"version":3,"sources":["webpack:///./src/api/stats.js","webpack:///./src/views/other-page/screen-01/index.vue?86bb","webpack:///./src/views/other-page/screen-01/index.vue","webpack:///src/views/other-page/screen-01/index.vue","webpack:///./src/views/other-page/screen-01/index.vue?ee95","webpack:///./src/views/other-page/screen-01/index.vue?cff2"],"names":["totalStats","request","url","method","render","_vm","this","_c","_self","staticClass","attrs","staticStyle","key","scrollBoardKey","scrollBoardConfig","data","length","_v","_s","loading","_e","precentPondConfig","capsuleRefreshKey","cCapsuleChartConfig","style","transform","images","currentIndex","on","handleImageLoad","ringRefreshKey","ringChartConfig","_l","item","index","label","value","handleBack","_m","staticRenderFns","Vue","component","AnimatedNumber","use","dataV","listQuery","page","rows","entity","imgRatio","isHovering","timer","countConifg","number","content","header","columnWidth","align","borderWidth","borderRadius","borderGap","localGradient","methods","$router","push","scrollData","percentPondData","cCapsuleChartData","ringChartData","digitalData","getScoreTrend","console","log","processChartData","warn","myChart","clear","error","showLoading","text","apiData","categories","map","month","series","name","globalAvg","toFixed","type","smooth","buildingAvg","bedAvg","indoorAvg","updateChartConfig","option","title","textStyle","color","fontSize","left","tooltip","trigger","formatter","params","date","axisValue","p","seriesName","join","legend","s","bottom","grid","top","containLabel","xAxis","boundaryGap","axisLabel","dayjs","format","axisLine","lineStyle","yAxis","min","max","splitLine","width","shadowColor","shadowBlur","itemStyle","areaStyle","echarts","LinearGradient","offset","getAreaColor","setOption","hideLoading","colors","formattedData","repairCount","gradient","leaveCount","absenceCount","studentNum","stats","acount","bcount","ccount","dcount","lineWidth","Date","now","getAllStudentNum","unit","showValue","stuList","total","list","leave","reduce","acc","cur","isLeave","inSchoolRatio","parseFloat","leaveList","filter","isBack","_item$student","student","formatTime","time","backDate","$set","timestamp","e","img","target","naturalHeight","naturalWidth","$nextTick","$forceUpdate","prevSlide","nextSlide","mounted","forEach","Image","src","setInterval","document","getElementById","window","addEventListener","resize","fetchScoreTrend","beforeDestroy","clearInterval","dispose","removeEventListener","created","listData"],"mappings":"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","file":"js/chunk-f33c7efc.a47e0f76.js","sourcesContent":["import request from '@/utils/request'\r\n\r\nexport function totalStats() {\r\n    return request({\r\n        url: '/stats/totalStats',\r\n        method: 'get'\r\n    })\r\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=64fb9b9b&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"fullscreen-container\"},[_c('dv-border-box-11',{staticClass:\"dashboard-container\",attrs:{\"title\":\"滇西科技师范学院\"}},[_c('div',{staticClass:\"main-content\"},[_c('div',{staticClass:\"left-section\"},[_c('dv-border-box-8',{staticStyle:{\"height\":\"100%\"}},[_c('dv-scroll-board',{key:_vm.scrollBoardKey,staticStyle:{\"width\":\"calc(100% - 20px)\",\"height\":\"calc(80% - 20px)\",\"margin\":\"10px\"},attrs:{\"config\":_vm.scrollBoardConfig}},[(_vm.scrollBoardConfig.data.length === 0)?_c('div',{staticClass:\"empty-tip\"},[_vm._v(\" \"+_vm._s(_vm.loading ? '数据加载中...' : '暂无请假记录')+\" \")]):_vm._e()]),_c('dv-percent-pond',{staticStyle:{\"width\":\"calc(100% - 20px)\",\"height\":\"calc(20% - 10px)\",\"margin\":\"10px\"},attrs:{\"config\":_vm.precentPondConfig}})],1),_c('dv-border-box-8',{staticStyle:{\"height\":\"75%\"}},[_c('dv-capsule-chart',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\":key\":_vm.capsuleRefreshKey,\"config\":_vm.cCapsuleChartConfig}})],1)],1),_c('div',{staticClass:\"center-section\"},[_c('div',{staticClass:\"slider\"},[_c('img',{style:({ transform: `translateZ(0)` }),attrs:{\"src\":_vm.images[_vm.currentIndex]},on:{\"load\":_vm.handleImageLoad}})]),_c('dv-border-box-8',{staticStyle:{\"height\":\"75%\"}},[_c('div',{attrs:{\"id\":\"stackedLine\"}})])],1),_c('div',{staticClass:\"right-section\"},[_c('dv-border-box-8',{staticStyle:{\"height\":\"100%\"}},[_c('h2',[_vm._v(\"本月卫生评分\")]),_c('dv-active-ring-chart',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\":key\":_vm.ringRefreshKey,\"config\":_vm.ringChartConfig}})],1),_c('dv-border-box-8',{staticStyle:{\"height\":\"75%\"}},[_c('div',{staticClass:\"digital-grid\"},_vm._l((_vm.totalStats),function(item,index){return _c('div',{key:index,staticClass:\"digital-item\"},[_c('div',{staticClass:\"digital-label\"},[_vm._v(_vm._s(item.label))]),_c('div',{staticClass:\"digital-value\"},[_c('span',{staticClass:\"value-bg\"},[_vm._v(_vm._s(item.value))]),_c('animated-number',{staticClass:\"value-front\",attrs:{\"value\":item.value,\"duration\":1000,\"easing\":\"easeOutCubic\"}})],1)])}),0)])],1)])]),_c('div',{staticClass:\"float-button\",on:{\"click\":_vm.handleBack}},[_vm._m(0)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"button-content\"},[_c('i',{staticClass:\"el-icon-back\"},[_vm._v(\" 返回 \")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"fullscreen-container\">\r\n    <dv-border-box-11 title=\"滇西科技师范学院\" class=\"dashboard-container\">\r\n\r\n      <!-- 主体内容 -->\r\n      <div class=\"main-content\">\r\n        <!-- 左侧区域 -->\r\n        <div class=\"left-section\">\r\n          <dv-border-box-8 style=\"height: 100%;\">\r\n            <dv-scroll-board :key=\"scrollBoardKey\" :config=\"scrollBoardConfig\"\r\n              style=\"width:calc(100% - 20px);height:calc(80% - 20px);margin:10px\">\r\n              <div v-if=\"scrollBoardConfig.data.length === 0\" class=\"empty-tip\">\r\n                {{ loading ? '数据加载中...' : '暂无请假记录' }}\r\n              </div>\r\n            </dv-scroll-board>\r\n            <dv-percent-pond :config=\"precentPondConfig\"\r\n              style=\"width:calc(100% - 20px);height:calc(20% - 10px);margin:10px\" />\r\n          </dv-border-box-8>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <dv-capsule-chart ::key=\"capsuleRefreshKey\" :config=\"cCapsuleChartConfig\" style=\"width:100%;height:100%\" />\r\n          </dv-border-box-8>\r\n        </div>\r\n\r\n        <!-- 中间区域 -->\r\n        <div class=\"center-section\">\r\n          <div class=\"slider\">\r\n            <img :src=\"images[currentIndex]\" :style=\"{ transform: `translateZ(0)` }\" @load=\"handleImageLoad\" />\r\n          </div>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <div id=\"stackedLine\"></div>\r\n          </dv-border-box-8>\r\n        </div>\r\n\r\n        <!-- 右侧区域 -->\r\n        <div class=\"right-section\">\r\n          <dv-border-box-8 style=\"height: 100%;\">\r\n            <h2>本月卫生评分</h2>\r\n            <dv-active-ring-chart ::key=\"ringRefreshKey\" :config=\"ringChartConfig\" style=\"width:100%;height:100%\" />\r\n          </dv-border-box-8>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <div class=\"digital-grid\">\r\n              <div v-for=\"(item, index) in totalStats\" :key=\"index\" class=\"digital-item\">\r\n                <div class=\"digital-label\">{{ item.label }}</div>\r\n                <div class=\"digital-value\">\r\n                  <span class=\"value-bg\">{{ item.value }}</span>\r\n                  <animated-number :value=\"item.value\" :duration=\"1000\" easing=\"easeOutCubic\" class=\"value-front\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </dv-border-box-8>\r\n        </div>\r\n      </div>\r\n\r\n    </dv-border-box-11>\r\n    <div class=\"float-button\" @click=\"handleBack\">\r\n      <div class=\"button-content\">\r\n        <i class=\"el-icon-back\">\r\n          返回\r\n        </i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Vue from 'vue'\r\n  import dataV from '@jiaminghi/data-view'\r\n  import * as echarts from 'echarts'\r\n  import dayjs from 'dayjs'\r\n  import AnimatedNumber from 'vue-animated-number';\r\n  import { list as leaveList } from \"@/api/leave\"\r\n  import { list as stuList } from \"@/api/student\"\r\n  import { getAllStudentNum } from \"@/api/building\"\r\n  import { stats, getScoreTrend } from \"@/api/score\"\r\n  import { totalStats } from \"@/api/stats\"\r\n\r\n  Vue.component('animated-number', AnimatedNumber);\r\n  Vue.use(dataV)\r\n\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        ringRefreshKey: 0,\r\n        capsuleRefreshKey: 0,\r\n        scrollBoardKey: 0,\r\n        loading: false,\r\n        listQuery: {\r\n          page: 1,\r\n          rows: 99999,\r\n          entity: {},\r\n        },\r\n        imgRatio: 0.5625,\r\n        isHovering: false,\r\n        images: [\r\n          'https://xsxx.lxxno.cn/2025xszhwz/other/1.png',\r\n          'https://xsxx.lxxno.cn/2025xszhwz/other/2.png',\r\n          'https://xsxx.lxxno.cn/2025xszhwz/other/3.png'\r\n        ],\r\n        // 当前显示的图片索引\r\n        currentIndex: 0,\r\n        // 定时器 ID\r\n        timer: null,\r\n        totalStats: [],\r\n        countConifg: {\r\n          number: [100],\r\n          content: '{nt}个'\r\n        },\r\n        ringChartConfig: {\r\n          data: []\r\n        },\r\n        cCapsuleChartConfig: {\r\n          data: [\r\n          ]\r\n        },\r\n        scrollBoardConfig: {\r\n          header: ['姓名', '请假时间', '返校时间'],\r\n          data: [],\r\n          index: false,\r\n          columnWidth: [80],\r\n          align: ['center']\r\n        },\r\n        precentPondConfig: {\r\n          value: 0,\r\n          borderWidth: 1,\r\n          borderRadius: 5,\r\n          borderGap: 5,\r\n          localGradient: false\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleBack() {\r\n        this.$router.push('/');\r\n        // 或使用命名路由跳转（需与路由配置一致）\r\n        // this.$router.push({ name: 'Home' });\r\n      },\r\n      async listData() {\r\n        try {\r\n          this.loading = true;\r\n          this.scrollData()\r\n          this.percentPondData()\r\n          this.cCapsuleChartData()\r\n          this.ringChartData()\r\n          this.digitalData()\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async fetchScoreTrend() {\r\n        try {\r\n          const { data } = await getScoreTrend();\r\n          console.log(\"zhexian\" + data)\r\n          if (data && data.length > 0) {\r\n            this.processChartData(data);\r\n          } else {\r\n            console.warn('无评分趋势数据');\r\n            this.myChart.clear();\r\n          }\r\n        } catch (error) {\r\n          console.error('获取评分趋势失败:', error);\r\n          this.myChart.showLoading('default', { text: '数据加载失败' });\r\n        }\r\n      },\r\n      processChartData(apiData) {\r\n        // 按接口返回数据结构处理\r\n        const categories = apiData.map(item => item.month);\r\n        const series = [\r\n          {\r\n            name: '综合评分',\r\n            data: apiData.map(item => item.globalAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '建筑评分',\r\n            data: apiData.map(item => item.buildingAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '床位评分',\r\n            data: apiData.map(item => item.bedAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '室内评分',\r\n            data: apiData.map(item => item.indoorAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          }\r\n        ];\r\n\r\n        this.updateChartConfig(categories, series);\r\n      },\r\n\r\n      updateChartConfig(categories, series) {\r\n        const option = {\r\n          title: {\r\n            text: '宿舍卫生评分趋势',\r\n            textStyle: {\r\n              color: '#fff',\r\n              fontSize: 16\r\n            },\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            formatter: params => {\r\n              const date = params[0].axisValue;\r\n              return params.map(p => `\r\n          <div style=\"display: flex; align-items: center\">\r\n            <span style=\"display:inline-block;width:8px;height:8px;border-radius:50%;background:${p.color};margin-right:5px\"></span>\r\n            ${p.seriesName}: ${p.value}分\r\n          </div>\r\n        `).join('') + `<div>${date}</div>`;\r\n            }\r\n          },\r\n          legend: {\r\n            data: series.map(s => s.name),\r\n            textStyle: { color: '#fff' },\r\n            bottom: 10\r\n          },\r\n          grid: {\r\n            top: 60,\r\n            bottom: 80,\r\n            containLabel: true\r\n          },\r\n          xAxis: {\r\n            type: 'category',\r\n            boundaryGap: false,\r\n            data: categories,\r\n            axisLabel: {\r\n              color: '#fff',\r\n              formatter: value => dayjs(value).format('YYYY-MM')\r\n            },\r\n            axisLine: {\r\n              lineStyle: { color: '#fff' }\r\n            }\r\n          },\r\n          yAxis: {\r\n            type: 'value',\r\n            min: 0,\r\n            max: 10,\r\n            axisLabel: {\r\n              color: '#fff',\r\n              formatter: '{value} 分'\r\n            },\r\n            splitLine: {\r\n              lineStyle: { color: 'rgba(255,255,255,0.1)' }\r\n            },\r\n            axisLine: {\r\n              lineStyle: { color: '#fff' }\r\n            }\r\n          },\r\n          series: series.map((s, index) => ({\r\n            ...s,\r\n            lineStyle: {\r\n              width: 2,\r\n              shadowColor: 'rgba(0,0,0,0.3)',\r\n              shadowBlur: 8\r\n            },\r\n            itemStyle: {\r\n              color: ['#4FFA6E', '#FFC233', '#FF6D4A', '#6A8BFF'][index]\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: this.getAreaColor(index) },\r\n                { offset: 1, color: 'rgba(255,255,255,0)' }\r\n              ])\r\n            }\r\n          }))\r\n        };\r\n\r\n        this.myChart.setOption(option, true);\r\n        this.myChart.hideLoading();\r\n      },\r\n\r\n      getAreaColor(index) {\r\n        const colors = [\r\n          'rgba(79,250,110,0.3)',\r\n          'rgba(255,194,51,0.3)',\r\n          'rgba(255,109,74,0.3)',\r\n          'rgba(106,139,255,0.3)'\r\n        ];\r\n        return colors[index];\r\n      },\r\n      async digitalData() {\r\n        const { data } = await totalStats()\r\n        const formattedData = [\r\n          { label: '维修上报数', value: data[0].repairCount, color: { gradient: ['#00F2FE', '#4FACFE'] } },\r\n          { label: '请假申请数', value: data[0].leaveCount, color: { gradient: ['#FAD961', '#F76B1C'] } },\r\n          { label: '病因上报数', value: data[0].absenceCount, color: { gradient: ['#6F86FF', '#48C6EF'] } },\r\n          { label: '学生总人数', value: data[0].studentNum, color: { gradient: ['#42E695', '#3BB2B8'] } }\r\n        ]\r\n\r\n        this.totalStats = formattedData\r\n\r\n      },\r\n      async ringChartData() {\r\n        const { data } = await stats()\r\n\r\n        console.log(data[0].acount)\r\n\r\n        const formattedData = [\r\n          {\r\n            name: \"A级\",\r\n            value: data[0].acount\r\n          },\r\n          {\r\n            name: \"B级\",\r\n            value: data[0].bcount\r\n          },\r\n          {\r\n            name: \"C级\",\r\n            value: data[0].ccount\r\n          },\r\n          {\r\n            name: \"D级\",\r\n            value: data[0].dcount\r\n          }\r\n        ]\r\n\r\n        this.ringChartConfig = {\r\n          ...this.ringChartConfig, // 保留其他配置项\r\n          data: formattedData,\r\n          lineWidth: 50,\r\n        }\r\n        console.log(this.ringChartConfig)\r\n        this.ringRefreshKey = Date.now();\r\n      },\r\n      async cCapsuleChartData() {\r\n        const { data } = await getAllStudentNum();\r\n\r\n        const formattedData = data.map(item => ({\r\n          name: item.name,\r\n          value: item.studentNum\r\n        }))\r\n\r\n        this.cCapsuleChartConfig = {\r\n          ...this.cCapsuleChartConfig,\r\n          data: formattedData,\r\n\r\n          colors: ['#4FACFE', '#F76B1C'], // 示例颜色\r\n          unit: '人',\r\n          showValue: true\r\n        }\r\n        this.capsuleRefreshKey = Date.now()\r\n      },\r\n      async percentPondData() {\r\n        const { data } = await stuList(this.listQuery);\r\n        // 计算离校人数和总人数\r\n        const total = data.list.length;\r\n        const leave = data.list.reduce((acc, cur) => cur.isLeave ? acc + 1 : acc, 0);\r\n\r\n        // 计算在校率百分比（保留两位小数）\r\n        const inSchoolRatio = total > 0 ? ((total - leave) / total * 100).toFixed(2) : 0;\r\n\r\n        // 更新百分比水池配置（数值范围0-100）\r\n        this.precentPondConfig = {\r\n          ...this.precentPondConfig,\r\n          value: parseFloat(inSchoolRatio) // 转换为浮点数\r\n        };\r\n\r\n      },\r\n      async scrollData() {\r\n        const { data } = await leaveList(this.listQuery);\r\n\r\n        // 格式化数据为二维数组\r\n        const formattedData = data.list\r\n          .filter(item => !item.isBack) // 筛选isBack为false的条目\r\n          .map(item => [\r\n            item.student?.name || '未知',\r\n            this.formatTime(item.time),\r\n            this.formatTime(item.backDate)\r\n          ]);\r\n        // 响应式更新数据\r\n        this.$set(this.scrollBoardConfig, 'data', formattedData);\r\n        this.scrollBoardKey = Date.now();\r\n      },\r\n      formatTime(timestamp) {\r\n        return dayjs(timestamp).format('YYYY-MM-DD HH:mm');\r\n      },\r\n      handleImageLoad(e) {\r\n        const img = e.target\r\n        this.imgRatio = img.naturalHeight / img.naturalWidth\r\n        this.$nextTick(() => {\r\n          this.$forceUpdate() // 强制触发视图更新[2,6](@ref)\r\n        })\r\n      },\r\n      // 切换到上一张图片\r\n      prevSlide() {\r\n        this.currentIndex =\r\n          this.currentIndex === 0\r\n            ? this.images.length - 1\r\n            : this.currentIndex - 1;\r\n      },\r\n      // 切换到下一张图片\r\n      nextSlide() {\r\n        this.currentIndex = (this.currentIndex + 1) % this.images.length\r\n      }\r\n    },\r\n    // 生命周期\r\n    mounted() {\r\n      this.images.forEach(img => {\r\n        new Image().src = img // 预加载所有图片\r\n      })\r\n      this.timer = setInterval(() => {\r\n        this.nextSlide()\r\n      }, 2000)\r\n      this.myChart = echarts.init(document.getElementById('stackedLine'))\r\n      window.addEventListener('resize', () => this.myChart.resize())\r\n      this.fetchScoreTrend() // 确保调用数据获取\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer)\r\n      if (this.myChart) {\r\n        this.myChart.dispose();\r\n        window.removeEventListener('resize', this.myChart.resize);\r\n      }\r\n    },\r\n    created() {\r\n      this.listData()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .fullscreen-container {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    color: #fff;\r\n    z-index: 100;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .dashboard-container {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: #001529;\r\n    color: #fff;\r\n    overflow: hidden;\r\n    background-image: url('../../../assets/bg.jpg');\r\n    background-position: center;\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n  }\r\n\r\n  .main-content {\r\n    display: grid;\r\n    grid-template-columns: 1fr 2fr 1fr;\r\n    gap: 2vmin;\r\n    height: calc(100vh - 100px);\r\n    margin-top: 50px;\r\n    padding: 0 20px;\r\n  }\r\n\r\n  .left-section,\r\n  .right-section {\r\n    display: grid;\r\n    grid-template-rows: 1fr 1fr;\r\n    flex-direction: column;\r\n    gap: 2vmin;\r\n  }\r\n\r\n  .center-section {\r\n    display: grid;\r\n    grid-template-rows: 1fr 1fr;\r\n    gap: 2vmin;\r\n    padding: 0 2vmin;\r\n  }\r\n\r\n  .dv-border-box-8 {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .slider {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 56.25%;\r\n    overflow: hidden;\r\n    z-index: 1;\r\n\r\n  }\r\n\r\n  .slider img {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    transform: translate(-50%, -50%);\r\n    object-fit: cover;\r\n    will-change: transform;\r\n  }\r\n\r\n  #stackedLine {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .digital-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, minmax(0, 1fr));\r\n    gap: 2vh;\r\n    /* 改用视口单位 */\r\n    height: 100%;\r\n    /* 新增 */\r\n    padding: 1.5%;\r\n    /* 相对单位替代固定像素 */\r\n    box-sizing: border-box;\r\n    /* 确保padding不溢出 */\r\n  }\r\n\r\n  .digital-item {\r\n    background: rgba(16, 35, 78, 0.6);\r\n    border-radius: 8px;\r\n    padding: 50px;\r\n    position: relative;\r\n    overflow: hidden;\r\n    min-height: 120px;\r\n    /* 设置最小高度 */\r\n    padding: 5% 8%;\r\n    /* 百分比替代固定像素 */\r\n    display: flex;\r\n    /* 启用弹性布局 */\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    /* 改进点3：动态尺寸约束 */\r\n    height: calc((100% - 2vh)/2);\r\n    /* 计算高度 */\r\n  }\r\n\r\n  .digital-label {\r\n    font-size: clamp(12px, 1.2vw, 16px);\r\n    /* 添加字体响应式 */\r\n    color: #89f7fe;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .digital-value {\r\n    position: relative;\r\n    font-size: clamp(24px, 3vw, 36px);\r\n    font-family: 'DS-Digital', monospace;\r\n  }\r\n\r\n  .value-front {\r\n    color: #4af7ff;\r\n    text-shadow: 0 0 10px rgba(74, 247, 255, 0.5);\r\n  }\r\n\r\n  .value-bg {\r\n    position: absolute;\r\n    color: rgb(255, 255, 255);\r\n    z-index: 0;\r\n  }\r\n\r\n  /* 数据流动效果 */\r\n  .digital-item::after {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: -100%;\r\n    width: 50%;\r\n    height: 100%;\r\n    background: linear-gradient(to right,\r\n        rgba(255, 255, 255, 0) 0%,\r\n        rgba(255, 255, 255, 0.1) 50%,\r\n        rgba(255, 255, 255, 0) 100%);\r\n    transform: skewX(-45deg);\r\n    animation: flow 3s infinite;\r\n  }\r\n\r\n  @keyframes flow {\r\n    0% {\r\n      left: -100%;\r\n    }\r\n\r\n    100% {\r\n      left: 200%;\r\n    }\r\n  }\r\n\r\n  .float-button {\r\n    position: fixed;\r\n    z-index: 99999;\r\n    bottom: 30px;\r\n    right: 30px;\r\n    background: rgba(0, 123, 255, 0.9);\r\n    border-radius: 24px;\r\n    padding: 12px 24px;\r\n    cursor: pointer;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n    transition: all 0.3s ease;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .float-button:hover {\r\n    background: #007bff;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 6px 16px rgba(0, 123, 255, 0.3);\r\n  }\r\n\r\n  .button-content {\r\n    display: flex;\r\n    align-items: center;\r\n    color: white;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .el-icon-back {\r\n    font-size: 20px;\r\n    margin-right: 8px;\r\n  }\r\n\r\n  .border-box-content h2 {\r\n    position: absolute;\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=64fb9b9b&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=64fb9b9b&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64fb9b9b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}