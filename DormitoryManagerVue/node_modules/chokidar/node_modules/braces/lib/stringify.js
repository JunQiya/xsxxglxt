'use strict';

const utils = require('./utils');

module.exports = (ast, options = {}) => {
<<<<<<< HEAD
<<<<<<< HEAD
  const stringify = (node, parent = {}) => {
    const invalidBlock = options.escapeInvalid && utils.isInvalidBrace(parent);
    const invalidNode = node.invalid === true && options.escapeInvalid === true;
=======
  let stringify = (node, parent = {}) => {
    let invalidBlock = options.escapeInvalid && utils.isInvalidBrace(parent);
    let invalidNode = node.invalid === true && options.escapeInvalid === true;
>>>>>>> e6897d3eee7dd92889ec4638067e9f9148ca1f07
=======
  let stringify = (node, parent = {}) => {
    let invalidBlock = options.escapeInvalid && utils.isInvalidBrace(parent);
    let invalidNode = node.invalid === true && options.escapeInvalid === true;
>>>>>>> parent of 99ae58fb (修正代码，并打包成功上传部署到服务器（测试IP地址）)
    let output = '';

    if (node.value) {
      if ((invalidBlock || invalidNode) && utils.isOpenOrClose(node)) {
        return '\\' + node.value;
      }
      return node.value;
    }

    if (node.value) {
      return node.value;
    }

    if (node.nodes) {
<<<<<<< HEAD
<<<<<<< HEAD
      for (const child of node.nodes) {
=======
      for (let child of node.nodes) {
>>>>>>> e6897d3eee7dd92889ec4638067e9f9148ca1f07
=======
      for (let child of node.nodes) {
>>>>>>> parent of 99ae58fb (修正代码，并打包成功上传部署到服务器（测试IP地址）)
        output += stringify(child);
      }
    }
    return output;
  };

  return stringify(ast);
};

