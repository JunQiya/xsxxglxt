'use strict';

var supportsDescriptors = require('define-properties').supportsDescriptors;
var getPolyfill = require('./polyfill');
<<<<<<< HEAD
var gOPD = require('gopd');
var defineProperty = Object.defineProperty;
var $TypeError = require('es-errors');
var getProto = require('get-proto');
=======
var gOPD = Object.getOwnPropertyDescriptor;
var defineProperty = Object.defineProperty;
var TypeErr = TypeError;
var getProto = Object.getPrototypeOf;
>>>>>>> e6897d3eee7dd92889ec4638067e9f9148ca1f07
var regex = /a/;

module.exports = function shimFlags() {
	if (!supportsDescriptors || !getProto) {
<<<<<<< HEAD
		throw new $TypeError('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');
=======
		throw new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');
>>>>>>> e6897d3eee7dd92889ec4638067e9f9148ca1f07
	}
	var polyfill = getPolyfill();
	var proto = getProto(regex);
	var descriptor = gOPD(proto, 'flags');
	if (!descriptor || descriptor.get !== polyfill) {
		defineProperty(proto, 'flags', {
			configurable: true,
			enumerable: false,
			get: polyfill
		});
	}
	return polyfill;
};
