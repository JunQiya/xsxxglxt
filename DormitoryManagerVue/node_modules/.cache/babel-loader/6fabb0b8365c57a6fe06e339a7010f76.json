{"remainingRequest":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\src\\views\\system\\role\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\src\\views\\system\\role\\index.vue","mtime":1712740387000},{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\babel.config.js","mtime":1712740387000},{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1712740387000},{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1712740387000},{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1712740387000},{"path":"E:\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1712740387000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVsLCBsaXN0LCBxdWVyeSwgc2F2ZU9yVXBkYXRlIH0gZnJvbSAiQC9hcGkvc3lzdGVtL3N5c3RlbVJvbGUiOwppbXBvcnQgeyBsaXN0VHJlZSB9IGZyb20gIi4uLy4uLy4uL2FwaS9zeXN0ZW0vU3lzdGVtRnVuY3Rpb24iOwppbXBvcnQgTXlUcmVlIGZyb20gJ0AvY29tcG9uZW50cy9NeVRyZWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBjb21wb25lbnRzOiB7CiAgICBNeVRyZWUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBwYWdlSW5mbzoge30sCiAgICAgIGxpc3RRdWVyeTogewogICAgICAgIGVudGl0eToge30sCiAgICAgICAgcGFnZTogMSwKICAgICAgICByb3dzOiAxMAogICAgICB9LAogICAgICByb2xlOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBmdW5jdGlvbklkczogW10KICAgICAgfSwKICAgICAgbGlzdFRyZWU6IFtdLAogICAgICBkaWFsb2dUaXRsZTogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+WQjeensOS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1snc2F2ZU9yVXBkYXRlRm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHNhdmVPclVwZGF0ZSh0aGlzLnJvbGUpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVDbG9zZSgpOwogICAgICAgICAgICAgIF90aGlzLmxpc3REYXRhKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsKGlkKSB7CiAgICAgIGRlbChpZCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdCgpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IDE7CiAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5saXN0UXVlcnkuZW50aXR5ID0ge307CiAgICAgIHRoaXMuc2VsZWN0KCk7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMucm9sZSA9IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGZ1bmN0aW9uSWRzOiBbXQogICAgICB9OwogICAgICB0aGlzLmxpc3RUcmVlID0gW107CiAgICAgIHRoaXMuJHJlZnNbJ3NhdmVPclVwZGF0ZUZvcm0nXS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBzaG93RGlhbG9nKGlkKSB7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5re75Yqg6KeS6ImyIjsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGxpc3RUcmVlKCk7CiAgICAgIHRoaXMubGlzdFRyZWUgPSBkYXRhOwogICAgICBpZiAoaWQpIHsKICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIuS/ruaUueinkuiJsiI7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBxdWVyeShpZCk7CiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLnJvbGUgPSBkYXRhOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbGlzdERhdGEoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCBsaXN0KHRoaXMubGlzdFF1ZXJ5KTsKICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGE7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5yb3dzID0gdmFsOwogICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5saXN0RGF0YSgpOwogIH0KfTs="},{"version":3,"names":["del","list","query","saveOrUpdate","listTree","MyTree","name","components","data","loading","pageInfo","listQuery","entity","page","rows","role","id","undefined","functionIds","dialogTitle","dialogVisible","rules","required","message","trigger","methods","_this","$refs","validate","valid","then","res","statusCode","$message","msg","type","handleClose","listData","select","reset","resetFields","showDialog","handleCurrentChange","val","handleSizeChange","created"],"sources":["src/views/system/role/index.vue"],"sourcesContent":["<template>\n  <div class=\"router-container\">\n    <div class=\"container\">\n      <div class=\"inner_container\">\n        <div class=\"table\">\n          <el-form :inline=\"true\" ref=\"form\" :model=\"listQuery.entity\">\n            <el-form-item label=\"角色名称\">\n              <el-input clearable v-model=\"listQuery.entity.name\" \n                        placeholder=\"角色名称\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" style=\"font-size: 16px;\"  @click=\"select\"> 查询</el-button>\n              <el-button type=\"warning\" style=\"font-size: 16px;\"  @click=\"reset\"> 重置</el-button>\n              <el-button v-has-permi=\"['system:role:save']\" @click=\"showDialog(undefined)\"\n                   style=\"font-size: 16px;\"  type=\"primary\"> 新增\n              </el-button>\n            </el-form-item>\n          </el-form>\n          <el-table :data=\"pageInfo.list\" v-loading=\"loading\" height=\"410\">\n            <el-table-column label=\"序号\">\n              <template slot-scope=\"scope\">{{ (listQuery.page - 1) * (listQuery.rows) + scope.$index + 1 }}</template>\n            </el-table-column>\n            <el-table-column label=\"名称\" prop=\"name\"></el-table-column>\n            <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button v-has-permi=\"['system:role:query']\"\n                     style=\"font-size: 14px;\"  type=\"primary\" @click=\"showDialog(scope.row.id)\"> 详情\n                </el-button>\n                <template>\n                  <el-popconfirm title=\"确定删除吗？\" @confirm=\"del(scope.row.id)\">\n                    <el-button style=\"margin-left: 8px;font-size: 12px;\" v-has-permi=\"['system:role:delete']\"\n                               slot=\"reference\"  type=\"danger\"> 删除\n                    </el-button>\n                  </el-popconfirm>\n                </template>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"page\">\n          <el-pagination\n              background\n              :page-size=\"listQuery.rows\"\n              :page-count=\"pageInfo.pages\"\n              layout=\"->, prev, pager, next, jumper, total, sizes\"\n              :total=\"pageInfo.total\"\n              :current-page.sync=\"pageInfo.pageNum\"\n              @current-change=\"handleCurrentChange\"\n              @size-change=\"handleSizeChange\"\n          >\n          </el-pagination>\n        </div>\n        <div class=\"dialog\">\n          <el-dialog\n              :title=\"dialogTitle\"\n              :visible.sync=\"dialogVisible\"\n              width=\"45%\"\n              @closed=\"handleClose\"\n          >\n            <el-form ref=\"saveOrUpdateForm\" :rules=\"rules\" :model=\"role\" label-width=\"80px\">\n              <el-form-item label=\"名称\" prop=\"name\">\n                <el-input v-model=\"role.name\" placeholder=\"输入名称\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"菜单\" prop=\"functionIds\">\n                <my-tree :tree=\"listTree\" :checked=\"role.functionIds\"></my-tree>\n              </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"handleClose\"> 取 消</el-button>\n                            <el-button type=\"primary\" @click=\"saveOrUpdate\"\n                                       v-has-permi=\"['system:role:update','system:role:save']\"> 保 存</el-button>\n                          </span>\n          </el-dialog>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {del, list, query, saveOrUpdate} from \"@/api/system/systemRole\";\nimport {listTree} from \"../../../api/system/SystemFunction\";\nimport MyTree from '@/components/MyTree'\n\nexport default {\n  name: \"index\",\n  components: {\n    MyTree\n  },\n  data() {\n    return {\n      loading: true,\n      pageInfo: {},\n      listQuery: {\n        entity: {},\n        page: 1,\n        rows: 10\n      },\n      role: {\n        id: undefined,\n        name: '',\n        functionIds: []\n      },\n      listTree: [],\n      dialogTitle: '',\n      dialogVisible: false,\n      rules: {\n        name: {required: true, message: '名称不能为空', trigger: 'blur'}\n      }\n    }\n  },\n  methods: {\n    saveOrUpdate() {\n      const _this = this\n      this.$refs['saveOrUpdateForm'].validate((valid) => {\n        if (valid) {\n          saveOrUpdate(this.role).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              _this.handleClose()\n              _this.listData()\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n    },\n    del(id) {\n      del(id).then(res => {\n        if (res.statusCode === 200) {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n          this.listData()\n        }\n      })\n    },\n    select() {\n      this.listQuery.page = 1\n      this.listData()\n    },\n    reset() {\n      this.listQuery.entity = {}\n      this.select()\n    },\n    handleClose() {\n      this.role = {\n        id: undefined,\n        name: '',\n        functionIds: []\n      }\n      this.listTree = []\n      this.$refs['saveOrUpdateForm'].resetFields()\n      this.dialogVisible = false\n    },\n    async showDialog(id) {\n      this.dialogTitle = \"添加角色\"\n      const {data} = await listTree();\n      this.listTree = data\n      if (id) {\n        this.dialogTitle = \"修改角色\"\n        const {data} = await query(id)\n        if (data) {\n          this.dialogVisible = true\n          this.role = data\n        }\n      } else {\n        this.dialogVisible = true\n      }\n    },\n    async listData() {\n      this.loading = true\n      const {data} = await list(this.listQuery)\n      this.pageInfo = data\n      this.loading = false\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.listData()\n    },\n    handleSizeChange(val) {\n      this.listQuery.rows = val\n      this.listData()\n    }\n  },\n  created() {\n    this.listData()\n  }\n}\n</script>\n\n<style scoped>\n.table {\n  padding: 30px;\n}\n\n</style>\n"],"mappings":"AAgFA,SAAAA,GAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,YAAA;AACA,SAAAC,QAAA;AACA,OAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EACAG,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,SAAA;QACAC,MAAA;QACAC,IAAA;QACAC,IAAA;MACA;MACAC,IAAA;QACAC,EAAA,EAAAC,SAAA;QACAX,IAAA;QACAY,WAAA;MACA;MACAd,QAAA;MACAe,WAAA;MACAC,aAAA;MACAC,KAAA;QACAf,IAAA;UAAAgB,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAtB,aAAA;MACA,MAAAuB,KAAA;MACA,KAAAC,KAAA,qBAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA1B,YAAA,MAAAY,IAAA,EAAAe,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,UAAA;cACA,KAAAC,QAAA;gBACAV,OAAA,EAAAQ,GAAA,CAAAG,GAAA;gBACAC,IAAA;cACA;cACAT,KAAA,CAAAU,WAAA;cACAV,KAAA,CAAAW,QAAA;YACA;UACA;QACA;UACA,KAAAJ,QAAA;YACAV,OAAA;YACAY,IAAA;UACA;UACA;QACA;MACA;IACA;IACAnC,IAAAgB,EAAA;MACAhB,GAAA,CAAAgB,EAAA,EAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,UAAA;UACA,KAAAC,QAAA;YACAV,OAAA,EAAAQ,GAAA,CAAAG,GAAA;YACAC,IAAA;UACA;UACA,KAAAE,QAAA;QACA;MACA;IACA;IACAC,OAAA;MACA,KAAA3B,SAAA,CAAAE,IAAA;MACA,KAAAwB,QAAA;IACA;IACAE,MAAA;MACA,KAAA5B,SAAA,CAAAC,MAAA;MACA,KAAA0B,MAAA;IACA;IACAF,YAAA;MACA,KAAArB,IAAA;QACAC,EAAA,EAAAC,SAAA;QACAX,IAAA;QACAY,WAAA;MACA;MACA,KAAAd,QAAA;MACA,KAAAuB,KAAA,qBAAAa,WAAA;MACA,KAAApB,aAAA;IACA;IACA,MAAAqB,WAAAzB,EAAA;MACA,KAAAG,WAAA;MACA;QAAAX;MAAA,UAAAJ,QAAA;MACA,KAAAA,QAAA,GAAAI,IAAA;MACA,IAAAQ,EAAA;QACA,KAAAG,WAAA;QACA;UAAAX;QAAA,UAAAN,KAAA,CAAAc,EAAA;QACA,IAAAR,IAAA;UACA,KAAAY,aAAA;UACA,KAAAL,IAAA,GAAAP,IAAA;QACA;MACA;QACA,KAAAY,aAAA;MACA;IACA;IACA,MAAAiB,SAAA;MACA,KAAA5B,OAAA;MACA;QAAAD;MAAA,UAAAP,IAAA,MAAAU,SAAA;MACA,KAAAD,QAAA,GAAAF,IAAA;MACA,KAAAC,OAAA;IACA;IACAiC,oBAAAC,GAAA;MACA,KAAAhC,SAAA,CAAAE,IAAA,GAAA8B,GAAA;MACA,KAAAN,QAAA;IACA;IACAO,iBAAAD,GAAA;MACA,KAAAhC,SAAA,CAAAG,IAAA,GAAA6B,GAAA;MACA,KAAAN,QAAA;IACA;EACA;EACAQ,QAAA;IACA,KAAAR,QAAA;EACA;AACA","ignoreList":[]}]}