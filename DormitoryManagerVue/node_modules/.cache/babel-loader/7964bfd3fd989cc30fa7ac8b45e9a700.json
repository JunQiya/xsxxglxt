{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\leave\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\leave\\index.vue","mtime":1698938062000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\babel.config.js","mtime":1626253806000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbGlzdCwgc2F2ZSwgdXBkYXRlLCBkZWwsIHF1ZXJ5IH0gZnJvbSAiQC9hcGkvbGVhdmUiOwppbXBvcnQgeyBsaXN0QnlOYW1lLCBxdWVyeSBhcyBxdWVyeVN0dWRlbnQgfSBmcm9tICJAL2FwaS9zdHVkZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgbWV0aG9kczogewogICAgdXBkYXRlKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruWumiIsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB1cGRhdGUoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgdGhpcy4kcmVmc1sic2F2ZU9yVXBkYXRlRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHNhdmUodGhpcy5yZWNvcmQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fmraPnoa7loavlhpnlj4LmlbAiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbChpZCkgewogICAgICB0aGlzLiRjb25maXJtKCLmmK/lkKbnoa7lrpoiLCAi6K2m5ZGKIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgZGVsKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5saXN0RGF0YSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBzaG93RGlhbG9nKGlkKSB7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5re75YqgIjsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBxdWVyeShpZCk7CiAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLor6bmg4UiOwogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICB0aGlzLnJlY29yZCA9IGRhdGE7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnN0dWRlbnRzID0gW107CiAgICAgIHRoaXMucmVjb3JkID0gewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgdGltZTogdW5kZWZpbmVkLAogICAgICAgIHJlYXNvbjogdW5kZWZpbmVkLAogICAgICAgIGlzQmFjazogdW5kZWZpbmVkLAogICAgICAgIHN0dWRlbnRJZDogdW5kZWZpbmVkLAogICAgICAgIHRhcmdldDogdW5kZWZpbmVkLAogICAgICAgIGJhY2tEYXRlOiB1bmRlZmluZWQKICAgICAgfTsKICAgICAgdGhpcy4kcmVmc1sic2F2ZU9yVXBkYXRlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgYXN5bmMgZ2V0U3R1ZGVudChpZCkgewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgcXVlcnlTdHVkZW50KGlkKTsKICAgICAgdGhpcy5zdHVkZW50ID0gZGF0YTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5zdHVkZW50cyA9IFtdOwogICAgICB0aGlzLmxpc3RRdWVyeS5lbnRpdHkgPSB7fTsKICAgICAgdGhpcy5zZWxlY3QoKTsKICAgIH0sCiAgICBzZWxlY3QoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxOwogICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICB9LAogICAgYXN5bmMgbGlzdERhdGEoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCBsaXN0KHRoaXMubGlzdFF1ZXJ5KTsKICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGE7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnJvd3MgPSB2YWw7CiAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gdmFsOwogICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICB9LAogICAgYXN5bmMgZ2V0U3R1ZGVudHNGcm9tUmVtb3RlKHF1ZXJ5KSB7CiAgICAgIGlmIChxdWVyeSAhPT0gIiIpIHsKICAgICAgICB0aGlzLnNlbGVjdExvYWRpbmcgPSB0cnVlOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgbGlzdEJ5TmFtZShxdWVyeSk7CiAgICAgICAgdGhpcy5zdHVkZW50cyA9IGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0ucm9vbS5udW1iZXIgKyAiICIgKyBpdGVtLm5hbWUgKyAiOiIgKyBpdGVtLm51bWJlcgogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0dWRlbnRzID0gW107CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHJvd3M6IDEwLAogICAgICAgIGVudGl0eToge30KICAgICAgfSwKICAgICAgcGFnZUluZm86IHt9LAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBzZWxlY3RMb2FkaW5nOiB0cnVlLAogICAgICBzdHVkZW50czogW10sCiAgICAgIHN0dWRlbnQ6IHt9LAogICAgICByZWNvcmQ6IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHRpbWU6IHVuZGVmaW5lZCwKICAgICAgICByZWFzb246IHVuZGVmaW5lZCwKICAgICAgICBpc0JhY2s6IHVuZGVmaW5lZCwKICAgICAgICBzdHVkZW50SWQ6IHVuZGVmaW5lZCwKICAgICAgICB0YXJnZXQ6IHVuZGVmaW5lZCwKICAgICAgICBiYWNrRGF0ZTogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dUaXRsZTogIiIsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgc3R1ZGVudElkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5aeT5ZCN5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgcmVhc29uOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5Y6f5Zug5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHRhcmdldDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuebrueahOS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBiYWNrRGF0ZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIui/lOagoeaXpeacn+S4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubGlzdERhdGEoKTsKICB9Cn07"},{"version":3,"names":["list","save","update","del","query","listByName","queryStudent","name","methods","id","$confirm","confirmButtonText","cancelButtonText","type","then","res","statusCode","$message","message","msg","listData","saveOrUpdate","$refs","validate","valid","record","handleClose","showDialog","dialogTitle","data","dialogVisible","students","undefined","time","reason","isBack","studentId","target","backDate","resetFields","getStudent","student","reset","listQuery","entity","select","page","loading","pageInfo","handleSizeChange","val","rows","handleCurrentChange","getStudentsFromRemote","selectLoading","map","item","room","number","rules","required","trigger","created"],"sources":["src/views/manage/leave/index.vue"],"sourcesContent":["<template>\n    <div class=\"router-container\">\n        <div class=\"container\">\n            <div class=\"inner_container\">\n                <div class=\"table\">\n                    <el-form\n                        :inline=\"true\"\n                        ref=\"form\"\n                        label-width=\"70px\"\n                        :model=\"listQuery.entity\"\n                    >\n                        <el-form-item\n                            label=\"学生姓名\"\n                            v-has-permi=\"['student:list']\"\n                        >\n                            <el-select\n                                \n                                v-model=\"listQuery.entity.studentId\"\n                                filterable\n                                clearable\n                                remote\n                                placeholder=\"请输入关键词\"\n                                :remote-method=\"getStudentsFromRemote\"\n                                :loading=\"selectLoading\"\n                            >\n                                <el-option\n                                    v-for=\"item in students\"\n                                    :key=\"item.id\"\n                                    :label=\"item.name\"\n                                    :value=\"item.id\"\n                                >\n                                </el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item label=\"是否返校\">\n                            <el-select\n                                \n                                clearable\n                                v-model=\"listQuery.entity.isBack\"\n                            >\n                                <el-option label=\"已返校\" :value=\"true\">\n                                </el-option>\n                                <el-option label=\"未返校\" :value=\"false\">\n                                </el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"primary\"\n                                @click=\"select\"\n                            >\n                                查询</el-button\n                            >\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"warning\"\n                                @click=\"reset\"\n                            >\n                                重置</el-button\n                            >\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"success\"\n                                v-has-permi=\"['leave:save']\"\n                                @click=\"showDialog(undefined)\"\n                            >\n                                新增</el-button\n                            >\n                        </el-form-item>\n                    </el-form>\n                    <el-table\n                        :data=\"pageInfo.list\"\n                        v-loading=\"loading\"\n                        height=\"405\"\n                    >\n                        <el-table-column label=\"学生姓名\" width=\"80\">\n                            <template slot-scope=\"scope\">\n                                <el-popover\n                                    placement=\"bottom\"\n                                    width=\"200\"\n                                    trigger=\"click\"\n                                    @show=\"getStudent(scope.row.student.id)\"\n                                >\n                                    <el-form label-width=\"40px\">\n                                        <el-form-item label=\"姓名\">\n                                            <el-input\n                                                v-model=\"student.name\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item label=\"学号\">\n                                            <el-input\n                                                v-model=\"student.number\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item label=\"电话\">\n                                            <el-input\n                                                v-model=\"student.phone\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item\n                                            label=\"班级\"\n                                            v-if=\"student.faculty\"\n                                        >\n                                            <el-input\n                                                v-model=\"student.faculty.name\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item\n                                            label=\"寝室\"\n                                            v-if=\"student.room\"\n                                        >\n                                            <el-input\n                                                v-model=\"student.room.number\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                    </el-form>\n                                    <span\n                                        slot=\"reference\"\n                                        style=\"color: #409eff; cursor: pointer\"\n                                        >{{ scope.row.student.name }}</span\n                                    >\n                                </el-popover>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                            prop=\"time\"\n                            label=\"签离时间\"\n                            width=\"160\"\n                        ></el-table-column>\n                        <el-table-column\n                            label=\"原因\"\n                            width=\"150\"\n                            prop=\"reason\"\n                            :show-overflow-tooltip=\"true\"\n                        ></el-table-column>\n                        <el-table-column\n                            prop=\"target\"\n                            label=\"目的地\"\n                        ></el-table-column>\n                        <el-table-column\n                            prop=\"backDate\"\n                            width=\"100\"\n                            label=\"返校时间\"\n                        ></el-table-column>\n                        <el-table-column label=\"是否返校\" width=\"100\">\n                            <template slot-scope=\"scope\">\n                                <span\n                                    style=\"color: #67c23a\"\n                                    v-if=\"scope.row.back\"\n                                    >是</span\n                                >\n                                <span style=\"color: #909399\" v-else\n                                    >否\n                                    <span\n                                        v-if=\"\n                                            new Date() >\n                                            new Date(\n                                                scope.row.backDate + ' 23:59:59'\n                                            )\n                                        \"\n                                        style=\"color: #f56c6c\"\n                                        >(已超时)</span\n                                    >\n                                </span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"操作\" width=\"400\" fixed=\"right\">\n                            <template slot-scope=\"scope\">\n                                <el-button\n                                    type=\"primary\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:query']\"\n                                    @click=\"showDialog(scope.row.id)\"\n                                >\n                                    详情</el-button\n                                >\n                                <el-button\n                                    type=\"danger\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:delete']\"\n                                    @click=\"del(scope.row.id)\"\n                                >\n                                    删除</el-button\n                                >\n                                <el-button\n                                    type=\"success\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:update']\"\n                                    @click=\"update(scope.row.id)\"\n                                    :disabled=\"scope.row.back\"\n                                >\n                                    确定返校</el-button\n                                >\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n                <div class=\"page\">\n                    <el-pagination\n                        background\n                        :page-size=\"listQuery.rows\"\n                        :page-count=\"pageInfo.pages\"\n                        layout=\"->, prev, pager, next, jumper, total, sizes\"\n                        :total=\"pageInfo.total\"\n                        :current-page.sync=\"pageInfo.pageNum\"\n                        @current-change=\"handleCurrentChange\"\n                        @size-change=\"handleSizeChange\"\n                    >\n                    </el-pagination>\n                </div>\n                <div class=\"dialog\">\n                    <el-dialog\n                        :title=\"dialogTitle\"\n                        :visible.sync=\"dialogVisible\"\n                        width=\"45%\"\n                        @closed=\"handleClose\"\n                    >\n                        <el-form\n                            :model=\"record\"\n                            ref=\"saveOrUpdateForm\"\n                            label-width=\"80px\"\n                            :rules=\"rules\"\n                        >\n                            <template v-if=\"record && record.id !== undefined\">\n                                <el-form-item label=\"学生姓名\">\n                                    <el-input\n                                        v-model=\"record.student.name\"\n                                        readonly\n                                    ></el-input>\n                                </el-form-item>\n                            </template>\n                            <template v-else>\n                                <el-form-item label=\"学生姓名\" prop=\"studentId\">\n                                    <el-select\n                                        v-model=\"record.studentId\"\n                                        remote\n                                        filterable\n                                        placeholder=\"输入关键字\"\n                                        :remote-method=\"getStudentsFromRemote\"\n                                        :loading=\"selectLoading\"\n                                    >\n                                        <el-option\n                                            v-for=\"item in students\"\n                                            :key=\"item.id\"\n                                            :label=\"item.name\"\n                                            :value=\"item.id\"\n                                        ></el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </template>\n                            <template v-if=\"record && record.id !== undefined\">\n                                <el-form-item label=\"签离时间\">\n                                    <el-date-picker\n                                        v-model=\"record.time\"\n                                        type=\"datetime\"\n                                        placeholder=\"选择日期时间\"\n                                        readonly\n                                    >\n                                    </el-date-picker>\n                                </el-form-item>\n                            </template>\n                            <el-form-item label=\"返校时间\" prop=\"backDate\">\n                                <el-date-picker\n                                    v-model=\"record.backDate\"\n                                    type=\"date\"\n                                    value-format=\"yyyy-MM-dd\"\n                                    placeholder=\"选择日期\"\n                                >\n                                </el-date-picker>\n                            </el-form-item>\n                            <el-form-item label=\"目的地\" prop=\"target\">\n                                <el-input\n                                    v-model=\"record.target\"\n                                    placeholder=\"输入目的地\"\n                                ></el-input>\n                            </el-form-item>\n                            <el-form-item label=\"原因\" prop=\"reason\">\n                                <el-input\n                                    type=\"textarea\"\n                                    :rows=\"5\"\n                                    v-model=\"record.reason\"\n                                    placeholder=\"输入原因\"\n                                ></el-input>\n                            </el-form-item>\n                        </el-form>\n                        <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"handleClose\">\n                                取 消</el-button\n                            >\n                            <el-button\n                                type=\"primary\"\n                                @click=\"saveOrUpdate\"\n                                v-has-permi=\"['leave:save', 'leave:update']\"\n                            >\n                                保 存</el-button\n                            >\n                        </span>\n                    </el-dialog>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { list, save, update, del, query } from \"@/api/leave\";\nimport { listByName, query as queryStudent } from \"@/api/student\";\nexport default {\n    name: \"index\",\n    methods: {\n        update(id) {\n            this.$confirm(\"是否确定\", \"警告\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                update(id).then((res) => {\n                    if (res.statusCode === 200) {\n                        this.$message({\n                            type: \"success\",\n                            message: res.msg,\n                        });\n                        this.listData();\n                    }\n                });\n            });\n        },\n        saveOrUpdate() {\n            this.$refs[\"saveOrUpdateForm\"].validate((valid) => {\n                if (valid) {\n                    save(this.record).then((res) => {\n                        if (res.statusCode === 200) {\n                            this.$message({\n                                type: \"success\",\n                                message: res.msg,\n                            });\n                            this.listData();\n                            this.handleClose();\n                        }\n                    });\n                } else {\n                    this.$message({\n                        message: \"请正确填写参数\",\n                        type: \"error\",\n                    });\n                    return false;\n                }\n            });\n        },\n        del(id) {\n            this.$confirm(\"是否确定\", \"警告\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                del(id).then((res) => {\n                    if (res.statusCode === 200) {\n                        this.$message({\n                            type: \"success\",\n                            message: res.msg,\n                        });\n                        this.listData();\n                    }\n                });\n            });\n        },\n        async showDialog(id) {\n            this.dialogTitle = \"添加\";\n            if (id) {\n                const { data } = await query(id);\n                this.dialogTitle = \"详情\";\n                if (data) {\n                    this.record = data;\n                    this.dialogVisible = true;\n                }\n            } else {\n                this.dialogVisible = true;\n            }\n        },\n        handleClose() {\n            this.dialogVisible = false;\n            this.students = [];\n            this.record = {\n                id: undefined,\n                time: undefined,\n                reason: undefined,\n                isBack: undefined,\n                studentId: undefined,\n                target: undefined,\n                backDate: undefined,\n            };\n            this.$refs[\"saveOrUpdateForm\"].resetFields();\n        },\n        async getStudent(id) {\n            const { data } = await queryStudent(id);\n            this.student = data;\n        },\n        reset() {\n            this.students = [];\n            this.listQuery.entity = {};\n            this.select();\n        },\n        select() {\n            this.listQuery.page = 1;\n            this.listData();\n        },\n        async listData() {\n            this.loading = true;\n            const { data } = await list(this.listQuery);\n            this.pageInfo = data;\n            this.loading = false;\n        },\n        handleSizeChange(val) {\n            this.listQuery.rows = val;\n            this.listData();\n        },\n        handleCurrentChange(val) {\n            this.listQuery.page = val;\n            this.listData();\n        },\n        async getStudentsFromRemote(query) {\n            if (query !== \"\") {\n                this.selectLoading = true;\n                const { data } = await listByName(query);\n                this.students = data.map((item) => {\n                    return {\n                        id: item.id,\n                        name:\n                            item.room.number +\n                            \" \" +\n                            item.name +\n                            \":\" +\n                            item.number,\n                    };\n                });\n                this.selectLoading = false;\n            } else {\n                this.students = [];\n            }\n        },\n    },\n    data() {\n        return {\n            listQuery: {\n                page: 1,\n                rows: 10,\n                entity: {},\n            },\n            pageInfo: {},\n            loading: true,\n            selectLoading: true,\n            students: [],\n            student: {},\n            record: {\n                id: undefined,\n                time: undefined,\n                reason: undefined,\n                isBack: undefined,\n                studentId: undefined,\n                target: undefined,\n                backDate: undefined,\n            },\n            dialogVisible: false,\n            dialogTitle: \"\",\n            rules: {\n                studentId: [\n                    {\n                        required: true,\n                        message: \"姓名不能为空\",\n                        trigger: \"change\",\n                    },\n                ],\n                reason: [\n                    {\n                        required: true,\n                        message: \"原因不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                target: [\n                    {\n                        required: true,\n                        message: \"目的不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                backDate: [\n                    {\n                        required: true,\n                        message: \"返校日期不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    created() {\n        this.listData();\n    },\n};\n</script>\n\n<style scoped>\n.table {\n    padding: 30px;\n}\n</style>\n"],"mappings":"AA4TA,SAAAA,IAAA,EAAAC,IAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,KAAA;AACA,SAAAC,UAAA,EAAAD,KAAA,IAAAE,YAAA;AACA;EACAC,IAAA;EACAC,OAAA;IACAN,OAAAO,EAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACAZ,MAAA,CAAAO,EAAA,EAAAK,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,UAAA;YACA,KAAAC,QAAA;cACAJ,IAAA;cACAK,OAAA,EAAAH,GAAA,CAAAI;YACA;YACA,KAAAC,QAAA;UACA;QACA;MACA;IACA;IACAC,aAAA;MACA,KAAAC,KAAA,qBAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAvB,IAAA,MAAAwB,MAAA,EAAAX,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,UAAA;cACA,KAAAC,QAAA;gBACAJ,IAAA;gBACAK,OAAA,EAAAH,GAAA,CAAAI;cACA;cACA,KAAAC,QAAA;cACA,KAAAM,WAAA;YACA;UACA;QACA;UACA,KAAAT,QAAA;YACAC,OAAA;YACAL,IAAA;UACA;UACA;QACA;MACA;IACA;IACAV,IAAAM,EAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACAX,GAAA,CAAAM,EAAA,EAAAK,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,UAAA;YACA,KAAAC,QAAA;cACAJ,IAAA;cACAK,OAAA,EAAAH,GAAA,CAAAI;YACA;YACA,KAAAC,QAAA;UACA;QACA;MACA;IACA;IACA,MAAAO,WAAAlB,EAAA;MACA,KAAAmB,WAAA;MACA,IAAAnB,EAAA;QACA;UAAAoB;QAAA,UAAAzB,KAAA,CAAAK,EAAA;QACA,KAAAmB,WAAA;QACA,IAAAC,IAAA;UACA,KAAAJ,MAAA,GAAAI,IAAA;UACA,KAAAC,aAAA;QACA;MACA;QACA,KAAAA,aAAA;MACA;IACA;IACAJ,YAAA;MACA,KAAAI,aAAA;MACA,KAAAC,QAAA;MACA,KAAAN,MAAA;QACAhB,EAAA,EAAAuB,SAAA;QACAC,IAAA,EAAAD,SAAA;QACAE,MAAA,EAAAF,SAAA;QACAG,MAAA,EAAAH,SAAA;QACAI,SAAA,EAAAJ,SAAA;QACAK,MAAA,EAAAL,SAAA;QACAM,QAAA,EAAAN;MACA;MACA,KAAAV,KAAA,qBAAAiB,WAAA;IACA;IACA,MAAAC,WAAA/B,EAAA;MACA;QAAAoB;MAAA,UAAAvB,YAAA,CAAAG,EAAA;MACA,KAAAgC,OAAA,GAAAZ,IAAA;IACA;IACAa,MAAA;MACA,KAAAX,QAAA;MACA,KAAAY,SAAA,CAAAC,MAAA;MACA,KAAAC,MAAA;IACA;IACAA,OAAA;MACA,KAAAF,SAAA,CAAAG,IAAA;MACA,KAAA1B,QAAA;IACA;IACA,MAAAA,SAAA;MACA,KAAA2B,OAAA;MACA;QAAAlB;MAAA,UAAA7B,IAAA,MAAA2C,SAAA;MACA,KAAAK,QAAA,GAAAnB,IAAA;MACA,KAAAkB,OAAA;IACA;IACAE,iBAAAC,GAAA;MACA,KAAAP,SAAA,CAAAQ,IAAA,GAAAD,GAAA;MACA,KAAA9B,QAAA;IACA;IACAgC,oBAAAF,GAAA;MACA,KAAAP,SAAA,CAAAG,IAAA,GAAAI,GAAA;MACA,KAAA9B,QAAA;IACA;IACA,MAAAiC,sBAAAjD,KAAA;MACA,IAAAA,KAAA;QACA,KAAAkD,aAAA;QACA;UAAAzB;QAAA,UAAAxB,UAAA,CAAAD,KAAA;QACA,KAAA2B,QAAA,GAAAF,IAAA,CAAA0B,GAAA,CAAAC,IAAA;UACA;YACA/C,EAAA,EAAA+C,IAAA,CAAA/C,EAAA;YACAF,IAAA,EACAiD,IAAA,CAAAC,IAAA,CAAAC,MAAA,GACA,MACAF,IAAA,CAAAjD,IAAA,GACA,MACAiD,IAAA,CAAAE;UACA;QACA;QACA,KAAAJ,aAAA;MACA;QACA,KAAAvB,QAAA;MACA;IACA;EACA;EACAF,KAAA;IACA;MACAc,SAAA;QACAG,IAAA;QACAK,IAAA;QACAP,MAAA;MACA;MACAI,QAAA;MACAD,OAAA;MACAO,aAAA;MACAvB,QAAA;MACAU,OAAA;MACAhB,MAAA;QACAhB,EAAA,EAAAuB,SAAA;QACAC,IAAA,EAAAD,SAAA;QACAE,MAAA,EAAAF,SAAA;QACAG,MAAA,EAAAH,SAAA;QACAI,SAAA,EAAAJ,SAAA;QACAK,MAAA,EAAAL,SAAA;QACAM,QAAA,EAAAN;MACA;MACAF,aAAA;MACAF,WAAA;MACA+B,KAAA;QACAvB,SAAA,GACA;UACAwB,QAAA;UACA1C,OAAA;UACA2C,OAAA;QACA,EACA;QACA3B,MAAA,GACA;UACA0B,QAAA;UACA1C,OAAA;UACA2C,OAAA;QACA,EACA;QACAxB,MAAA,GACA;UACAuB,QAAA;UACA1C,OAAA;UACA2C,OAAA;QACA,EACA;QACAvB,QAAA,GACA;UACAsB,QAAA;UACA1C,OAAA;UACA2C,OAAA;QACA;MAEA;IACA;EACA;EACAC,QAAA;IACA,KAAA1C,QAAA;EACA;AACA"}]}