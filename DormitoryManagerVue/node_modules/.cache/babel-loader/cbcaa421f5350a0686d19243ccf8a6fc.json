{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\system\\function\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\system\\function\\index.vue","mtime":1698675814000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\babel.config.js","mtime":1626253806000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVsLCBsaXN0VHJlZSwgcXVlcnksIHNhdmVPclVwZGF0ZSB9IGZyb20gIkAvYXBpL3N5c3RlbS9TeXN0ZW1GdW5jdGlvbiI7CmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JzsKaW1wb3J0IEljb25TZWxlY3QgZnJvbSAnQC9jb21wb25lbnRzL0ljb25TZWxlY3QnOwppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgY29tcG9uZW50czogewogICAgVHJlZVNlbGVjdCwKICAgIEljb25TZWxlY3QKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBmdW5jdGlvbkxpc3Q6IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIG9yZGVyTnVtOiB1bmRlZmluZWQsCiAgICAgICAgcGF0aDogJycsCiAgICAgICAgY29tcG9uZW50OiAnJywKICAgICAgICBtZW51VHlwZTogJ00nLAogICAgICAgIHBlcm1pc3Npb246ICcnLAogICAgICAgIGljb246ICcnCiAgICAgIH0sCiAgICAgIGxpc3RUcmVlOiBbXSwKICAgICAgZGlhbG9nVGl0bGU6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5ZCN56ew5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGNvbXBvbmVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+e7hOS7tuS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwYXRoOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6Lev5b6E5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBsaXN0RGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGxpc3RUcmVlKCk7CiAgICAgIHRoaXMuZnVuY3Rpb25MaXN0ID0gZGF0YTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgc2hvd0RpYWxvZyhpZCkgewogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+a3u+WKoOiPnOWNlSc7CiAgICAgIGlmIChpZCkgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgcXVlcnkoaWQpOwogICAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5L+u5pS56I+c5Y2VJzsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZm9ybSA9IGRhdGE7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBkZWwoaWQpIHsKICAgICAgZGVsKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5saXN0RGF0YSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbJ3NhdmVPclVwZGF0ZUZvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBzYXZlT3JVcGRhdGUodGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgICBfdGhpcy5saXN0RGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fmraPnoa7loavlhpnlj4LmlbAnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdChuYW1lKSB7CiAgICAgIHRoaXMuZm9ybS5pY29uID0gbmFtZTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgcGFyZW50SWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBvcmRlck51bTogdW5kZWZpbmVkLAogICAgICAgIHBhdGg6ICcnLAogICAgICAgIGNvbXBvbmVudDogJycsCiAgICAgICAgbWVudVR5cGU6ICdNJywKICAgICAgICBwZXJtaXNzaW9uOiAnJywKICAgICAgICBpY29uOiAnJwogICAgICB9OwogICAgICB0aGlzLiRyZWZzWydzYXZlT3JVcGRhdGVGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUuaWQsCiAgICAgICAgbGFiZWw6IG5vZGUubmFtZSwKICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbgogICAgICB9OwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubGlzdERhdGEoKTsKICB9Cn07"},{"version":3,"names":["del","listTree","query","saveOrUpdate","TreeSelect","IconSelect","name","components","data","loading","functionList","form","id","undefined","parentId","orderNum","path","component","menuType","permission","icon","dialogTitle","dialogVisible","rules","required","message","trigger","methods","listData","showDialog","then","res","statusCode","$message","msg","type","_this","$refs","validate","valid","handleClose","select","resetFields","normalizer","node","children","length","label","created"],"sources":["src/views/system/function/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <div class=\"inner_container\">\n        <div class=\"table\">\n          <el-form>\n            <el-form-item>\n              <el-button v-has-permi=\"['system:function:save']\"\n                  style=\"font-size: 16px;\"  type=\"success\" @click=\"showDialog(undefined)\"> 新增\n              </el-button>\n            </el-form-item>\n\n          </el-form>\n          <el-table v-loading=\"loading\"\n                    :data=\"functionList\"\n                    :tree-props=\"{children: 'children'}\"\n                    row-key=\"id\">\n            <el-table-column label=\"菜单名称\" prop=\"name\" width=\"210\"></el-table-column>\n            <el-table-column label=\"图标\" width=\"80\">\n              <template slot-scope=\"scope\">\n                <i class=\"iconfont\" :class=\"scope.row.icon\"></i>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"排序序号\" prop=\"orderNum\" width=\"80\"></el-table-column>\n            <el-table-column label=\"权限标识\" prop=\"permission\"></el-table-column>\n            <el-table-column label=\"组件路径\" prop=\"component\"></el-table-column>\n            <el-table-column label=\"路由地址\" prop=\"path\"></el-table-column>\n            <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button v-has-permi=\"['system:function:query']\"\n                    style=\"font-size: 14px;\"  type=\"primary\" @click=\"showDialog(scope.row.id)\"> 详情\n                </el-button>\n                <template>\n                  <el-popconfirm title=\"确定删除吗？\" @confirm=\"del(scope.row.id)\">\n                    <el-button style=\"margin-left: 8px;font-size: 12px;\" v-has-permi=\"['system:function:delete']\"\n                               slot=\"reference\"  type=\"danger\"> 删除\n                    </el-button>\n                  </el-popconfirm>\n                </template>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"dialog\">\n          <el-dialog\n              :title=\"dialogTitle\"\n              :visible.sync=\"dialogVisible\"\n              width=\"40%\"\n              @closed=\"handleClose\"\n          >\n            <el-form ref=\"saveOrUpdateForm\" :rules=\"rules\" :model=\"form\" label-width=\"80px\">\n              <el-form-item label=\"上级菜单\">\n                <tree-select\n                    v-model=\"form.parentId\"\n                    :options=\"functionList\"\n                    :normalizer=\"normalizer\"\n                    :show-count=\"true\"\n                    placeholder=\"选择上级菜单\"></tree-select>\n              </el-form-item>\n              <el-form-item label=\"菜单类型\">\n                <el-radio-group v-model=\"form.menuType\">\n                  <el-radio label=\"M\">目录</el-radio>\n                  <el-radio label=\"C\">菜单</el-radio>\n                  <el-radio label=\"F\">按钮</el-radio>\n                </el-radio-group>\n              </el-form-item>\n              <el-row :gutter=\"20\">\n                <el-col :span=\"12\">\n                  <el-form-item label=\"菜单名称\" prop=\"name\">\n                    <el-input v-model=\"form.name\" placeholder=\"输入菜单名称\"></el-input>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"菜单图标\" v-if=\"form.menuType !== 'F'\">\n                    <el-popover\n                        placement=\"bottom-start\"\n                        width=\"460\"\n                        trigger=\"click\"\n                    >\n                      <icon-select ref=\"iconSelect\" @selected=\"select\"/>\n                      <el-input slot=\"reference\" v-model=\"form.icon\" placeholder=\"点击选择图标\" readonly>\n                        <i\n                            v-if=\"form.icon\"\n                            slot=\"prefix\"\n                            :class=\"form.icon\"\n                            class=\"iconfont\"\n                            style=\"line-height: 40px\"\n                        />\n                        <i v-else slot=\"prefix\" class=\"el-icon-search el-input__icon\"/>\n                      </el-input>\n                    </el-popover>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"菜单排序\">\n                    <el-input-number v-model=\"form.orderNum\" :min=\"0\" :step=\"1\"></el-input-number>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"组件路径\" prop=\"component\" v-if=\"form.menuType === 'C'\">\n                    <el-input v-model=\"form.component\" placeholder=\"输入组件路径\"></el-input>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"路由地址\" prop=\"path\" v-if=\"form.menuType === 'C'\">\n                    <el-input v-model=\"form.path\" placeholder=\"输入路由地址\"></el-input>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"权限标识\" v-if=\"form.menuType !== 'M'\">\n                    <el-input v-model=\"form.permission\" placeholder=\"输入权限标识\"></el-input>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"handleClose\"> 取 消</el-button>\n                            <el-button type=\"primary\" v-has-permi=\"['system:function:update']\" @click=\"saveOrUpdate\"> 保 存</el-button>\n                          </span>\n          </el-dialog>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {del, listTree, query, saveOrUpdate} from \"@/api/system/SystemFunction\";\nimport TreeSelect from '@riophae/vue-treeselect'\nimport IconSelect from '@/components/IconSelect'\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"index\",\n  components: {\n    TreeSelect, IconSelect\n  },\n  data() {\n    return {\n      loading: true,\n      functionList: [],\n      form: {\n        id: undefined,\n        parentId: undefined,\n        name: '',\n        orderNum: undefined,\n        path: '',\n        component: '',\n        menuType: 'M',\n        permission: '',\n        icon: ''\n      },\n      listTree: [],\n      dialogTitle: '',\n      dialogVisible: false,\n      rules: {\n        name: [\n          {required: true, message: '名称不能为空', trigger: 'blur'}\n        ],\n        component: [\n          {required: true, message: '组件不能为空', trigger: 'blur'}\n        ],\n        path: [\n          {required: true, message: '路径不能为空', trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  methods: {\n    async listData() {\n      this.loading = true\n      const {data} = await listTree();\n      this.functionList = data\n      this.loading = false\n    },\n    async showDialog(id) {\n      this.dialogTitle = '添加菜单'\n      if (id) {\n        const {data} = await query(id)\n        this.dialogTitle = '修改菜单'\n        if (data) {\n          this.dialogVisible = true\n          this.form = data\n        }\n      } else {\n        this.dialogVisible = true\n      }\n    },\n    del(id) {\n      del(id).then(res => {\n        if (res.statusCode === 200) {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n          this.listData()\n        }\n      })\n    },\n    saveOrUpdate() {\n      const _this = this\n      this.$refs['saveOrUpdateForm'].validate((valid) => {\n        if (valid) {\n          saveOrUpdate(this.form).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              _this.handleClose()\n              _this.listData()\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n    },\n    select(name) {\n      this.form.icon = name\n    },\n    handleClose() {\n      this.form = {\n        id: undefined,\n        parentId: undefined,\n        name: '',\n        orderNum: undefined,\n        path: '',\n        component: '',\n        menuType: 'M',\n        permission: '',\n        icon: ''\n      }\n      this.$refs['saveOrUpdateForm'].resetFields()\n      this.dialogVisible = false\n    },\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.id,\n        label: node.name,\n        children: node.children\n      };\n    }\n  },\n  created() {\n    this.listData()\n  }\n}\n</script>\n\n<style scoped>\n.table {\n  padding: 30px;\n}\n</style>\n"],"mappings":"AA+HA,SAAAA,GAAA,EAAAC,QAAA,EAAAC,KAAA,EAAAC,YAAA;AACA,OAAAC,UAAA;AACA,OAAAC,UAAA;AACA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,UAAA;IAAAC;EACA;EACAG,KAAA;IACA;MACAC,OAAA;MACAC,YAAA;MACAC,IAAA;QACAC,EAAA,EAAAC,SAAA;QACAC,QAAA,EAAAD,SAAA;QACAP,IAAA;QACAS,QAAA,EAAAF,SAAA;QACAG,IAAA;QACAC,SAAA;QACAC,QAAA;QACAC,UAAA;QACAC,IAAA;MACA;MACAnB,QAAA;MACAoB,WAAA;MACAC,aAAA;MACAC,KAAA;QACAjB,IAAA,GACA;UAAAkB,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAT,SAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAV,IAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,SAAA;MACA,KAAAnB,OAAA;MACA;QAAAD;MAAA,UAAAP,QAAA;MACA,KAAAS,YAAA,GAAAF,IAAA;MACA,KAAAC,OAAA;IACA;IACA,MAAAoB,WAAAjB,EAAA;MACA,KAAAS,WAAA;MACA,IAAAT,EAAA;QACA;UAAAJ;QAAA,UAAAN,KAAA,CAAAU,EAAA;QACA,KAAAS,WAAA;QACA,IAAAb,IAAA;UACA,KAAAc,aAAA;UACA,KAAAX,IAAA,GAAAH,IAAA;QACA;MACA;QACA,KAAAc,aAAA;MACA;IACA;IACAtB,IAAAY,EAAA;MACAZ,GAAA,CAAAY,EAAA,EAAAkB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,UAAA;UACA,KAAAC,QAAA;YACAR,OAAA,EAAAM,GAAA,CAAAG,GAAA;YACAC,IAAA;UACA;UACA,KAAAP,QAAA;QACA;MACA;IACA;IACAzB,aAAA;MACA,MAAAiC,KAAA;MACA,KAAAC,KAAA,qBAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACApC,YAAA,MAAAQ,IAAA,EAAAmB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,UAAA;cACA,KAAAC,QAAA;gBACAR,OAAA,EAAAM,GAAA,CAAAG,GAAA;gBACAC,IAAA;cACA;cACAC,KAAA,CAAAI,WAAA;cACAJ,KAAA,CAAAR,QAAA;YACA;UACA;QACA;UACA,KAAAK,QAAA;YACAR,OAAA;YACAU,IAAA;UACA;UACA;QACA;MACA;IACA;IACAM,OAAAnC,IAAA;MACA,KAAAK,IAAA,CAAAS,IAAA,GAAAd,IAAA;IACA;IACAkC,YAAA;MACA,KAAA7B,IAAA;QACAC,EAAA,EAAAC,SAAA;QACAC,QAAA,EAAAD,SAAA;QACAP,IAAA;QACAS,QAAA,EAAAF,SAAA;QACAG,IAAA;QACAC,SAAA;QACAC,QAAA;QACAC,UAAA;QACAC,IAAA;MACA;MACA,KAAAiB,KAAA,qBAAAK,WAAA;MACA,KAAApB,aAAA;IACA;IACAqB,WAAAC,IAAA;MACA,IAAAA,IAAA,CAAAC,QAAA,KAAAD,IAAA,CAAAC,QAAA,CAAAC,MAAA;QACA,OAAAF,IAAA,CAAAC,QAAA;MACA;MACA;QACAjC,EAAA,EAAAgC,IAAA,CAAAhC,EAAA;QACAmC,KAAA,EAAAH,IAAA,CAAAtC,IAAA;QACAuC,QAAA,EAAAD,IAAA,CAAAC;MACA;IACA;EACA;EACAG,QAAA;IACA,KAAApB,QAAA;EACA;AACA"}]}