{"remainingRequest":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\src\\views\\manage\\leave\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\src\\views\\manage\\leave\\index.vue","mtime":1744686782459},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\babel.config.js","mtime":1626253806000},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762330398085},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1762330415881},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762330398085},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1762330415853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwppbXBvcnQgeyBsaXN0LCBzYXZlLCB1cGRhdGUsIGRlbCwgcXVlcnkgfSBmcm9tICJAL2FwaS9sZWF2ZSI7CmltcG9ydCB7IGxpc3RCeU5hbWUsIHF1ZXJ5IGFzIHF1ZXJ5U3R1ZGVudCB9IGZyb20gIkAvYXBpL3N0dWRlbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBtZXRob2RzOiB7CiAgICB1cGRhdGUoaWQpIHsKICAgICAgdGhpcy4kY29uZmlybSgi5piv5ZCm56Gu5a6aIiwgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHVwZGF0ZShpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKCkgewogICAgICB0aGlzLiRyZWZzWyJzYXZlT3JVcGRhdGVGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgc2F2ZSh0aGlzLnJlY29yZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuivt+ato+ehruWhq+WGmeWPguaVsCIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruWumiIsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBkZWwoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHNob3dEaWFsb2coaWQpIHsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLmt7vliqAiOwogICAgICBpZiAoaWQpIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkYXRhCiAgICAgICAgfSA9IGF3YWl0IHF1ZXJ5KGlkKTsKICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIuivpuaDhSI7CiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMucmVjb3JkID0gZGF0YTsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuc3R1ZGVudHMgPSBbXTsKICAgICAgdGhpcy5yZWNvcmQgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICB0aW1lOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsCiAgICAgICAgaXNCYWNrOiB1bmRlZmluZWQsCiAgICAgICAgc3R1ZGVudElkOiB1bmRlZmluZWQsCiAgICAgICAgdGFyZ2V0OiB1bmRlZmluZWQsCiAgICAgICAgYmFja0RhdGU6IHVuZGVmaW5lZAogICAgICB9OwogICAgICB0aGlzLiRyZWZzWyJzYXZlT3JVcGRhdGVGb3JtIl0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICBhc3luYyBnZXRTdHVkZW50KGlkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCBxdWVyeVN0dWRlbnQoaWQpOwogICAgICB0aGlzLnN0dWRlbnQgPSBkYXRhOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnN0dWRlbnRzID0gW107CiAgICAgIHRoaXMubGlzdFF1ZXJ5LmVudGl0eSA9IHt9OwogICAgICB0aGlzLnNlbGVjdCgpOwogICAgfSwKICAgIHNlbGVjdCgpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IDE7CiAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgIH0sCiAgICBhc3luYyBsaXN0RGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGxpc3QodGhpcy5saXN0UXVlcnkpOwogICAgICB0aGlzLnBhZ2VJbmZvID0gZGF0YTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucm93cyA9IHZhbDsKICAgICAgdGhpcy5saXN0RGF0YSgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgIH0sCiAgICBhc3luYyBnZXRTdHVkZW50c0Zyb21SZW1vdGUocXVlcnkpIHsKICAgICAgaWYgKHF1ZXJ5ICE9PSAiIikgewogICAgICAgIHRoaXMuc2VsZWN0TG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0QnlOYW1lKHF1ZXJ5KTsKICAgICAgICB0aGlzLnN0dWRlbnRzID0gZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgbmFtZTogaXRlbS5yb29tLm51bWJlciArICIgIiArIGl0ZW0ubmFtZSArICI6IiArIGl0ZW0ubnVtYmVyCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VsZWN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3R1ZGVudHMgPSBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3RRdWVyeTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcm93czogMTAsCiAgICAgICAgZW50aXR5OiB7fQogICAgICB9LAogICAgICBwYWdlSW5mbzoge30sCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHNlbGVjdExvYWRpbmc6IHRydWUsCiAgICAgIHN0dWRlbnRzOiBbXSwKICAgICAgc3R1ZGVudDoge30sCiAgICAgIHJlY29yZDogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgdGltZTogdW5kZWZpbmVkLAogICAgICAgIHJlYXNvbjogdW5kZWZpbmVkLAogICAgICAgIGlzQmFjazogdW5kZWZpbmVkLAogICAgICAgIHN0dWRlbnRJZDogdW5kZWZpbmVkLAogICAgICAgIHRhcmdldDogdW5kZWZpbmVkLAogICAgICAgIGJhY2tEYXRlOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAiIiwKICAgICAgcnVsZXM6IHsKICAgICAgICBzdHVkZW50SWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLlp5PlkI3kuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XSwKICAgICAgICByZWFzb246IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLljp/lm6DkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgdGFyZ2V0OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi55uu55qE5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGJhY2tEYXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6L+U5qCh5pel5pyf5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5saXN0RGF0YSgpOwogIH0KfTs="},{"version":3,"names":["list","save","update","del","query","listByName","queryStudent","name","methods","id","$confirm","confirmButtonText","cancelButtonText","type","then","res","statusCode","$message","message","msg","listData","saveOrUpdate","$refs","validate","valid","record","handleClose","showDialog","dialogTitle","data","dialogVisible","students","undefined","time","reason","isBack","studentId","target","backDate","resetFields","getStudent","student","reset","listQuery","entity","select","page","loading","pageInfo","handleSizeChange","val","rows","handleCurrentChange","getStudentsFromRemote","selectLoading","map","item","room","number","rules","required","trigger","created"],"sources":["src/views/manage/leave/index.vue"],"sourcesContent":["<template>\n    <div class=\"router-container\">\n        <div class=\"container\">\n            <div class=\"inner_container\">\n                <div class=\"table\">\n                    <el-form\n                        :inline=\"true\"\n                        ref=\"form\"\n                        label-width=\"70px\"\n                        :model=\"listQuery.entity\"\n                    >\n                        <el-form-item\n                            label=\"学生姓名\"\n                            v-has-permi=\"['student:list']\"\n                        >\n                            <el-select\n                                \n                                v-model=\"listQuery.entity.studentId\"\n                                filterable\n                                clearable\n                                remote\n                                placeholder=\"请输入关键词\"\n                                :remote-method=\"getStudentsFromRemote\"\n                                :loading=\"selectLoading\"\n                            >\n                                <el-option\n                                    v-for=\"item in students\"\n                                    :key=\"item.id\"\n                                    :label=\"item.name\"\n                                    :value=\"item.id\"\n                                >\n                                </el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item label=\"是否返校\">\n                            <el-select\n                                \n                                clearable\n                                v-model=\"listQuery.entity.isBack\"\n                            >\n                                <el-option label=\"已返校\" :value=\"true\">\n                                </el-option>\n                                <el-option label=\"未返校\" :value=\"false\">\n                                </el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"primary\"\n                                @click=\"select\"\n                            >\n                                查询</el-button\n                            >\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"warning\"\n                                @click=\"reset\"\n                            >\n                                重置</el-button\n                            >\n                            <el-button\n                                style=\"font-size: 16px\"\n                                type=\"success\"\n                                v-has-permi=\"['leave:save']\"\n                                @click=\"showDialog(undefined)\"\n                            >\n                                新增</el-button\n                            >\n                        </el-form-item>\n                    </el-form>\n                    <el-table\n                        :data=\"pageInfo.list\"\n                        v-loading=\"loading\"\n                        height=\"405\"\n                    >\n                        <el-table-column label=\"学生姓名\" width=\"80\">\n                            <template slot-scope=\"scope\">\n                                <el-popover\n                                    placement=\"bottom\"\n                                    width=\"200\"\n                                    trigger=\"click\"\n                                    @show=\"getStudent(scope.row.student.id)\"\n                                >\n                                    <el-form label-width=\"40px\">\n                                        <el-form-item label=\"姓名\">\n                                            <el-input\n                                                v-model=\"student.name\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item label=\"学号\">\n                                            <el-input\n                                                v-model=\"student.number\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item label=\"电话\">\n                                            <el-input\n                                                v-model=\"student.phone\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item\n                                            label=\"班级\"\n                                            v-if=\"student.faculty\"\n                                        >\n                                            <el-input\n                                                v-model=\"student.faculty.name\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                        <el-form-item\n                                            label=\"寝室\"\n                                            v-if=\"student.room\"\n                                        >\n                                            <el-input\n                                                v-model=\"student.room.number\"\n                                                readonly\n                                                \n                                            ></el-input>\n                                        </el-form-item>\n                                    </el-form>\n                                    <span\n                                        slot=\"reference\"\n                                        style=\"color: #409eff; cursor: pointer\"\n                                        >{{ scope.row.student.name }}</span\n                                    >\n                                </el-popover>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                            prop=\"time\"\n                            label=\"签离时间\"\n                            width=\"160\"\n                        ></el-table-column>\n                        <el-table-column\n                            label=\"原因\"\n                            width=\"150\"\n                            prop=\"reason\"\n                            :show-overflow-tooltip=\"true\"\n                        ></el-table-column>\n                        <el-table-column\n                            prop=\"target\"\n                            label=\"目的地\"\n                        ></el-table-column>\n                        <el-table-column\n                            prop=\"backDate\"\n                            width=\"100\"\n                            label=\"返校时间\"\n                        ></el-table-column>\n                        <el-table-column label=\"是否返校\" width=\"100\">\n                            <template slot-scope=\"scope\">\n                                <span\n                                    style=\"color: #67c23a\"\n                                    v-if=\"scope.row.isBack\"\n                                    >是</span\n                                >\n                                <span style=\"color: #909399\" v-else>否\n                                    <span\n                                        v-if=\"\n                                            new Date() >\n                                            new Date(\n                                                scope.row.backDate + ' 23:59:59'\n                                            )\n                                        \"\n                                        style=\"color: #f56c6c\"\n                                        >(已超时)</span\n                                    >\n                                </span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"操作\" width=\"400\" fixed=\"right\">\n                            <template slot-scope=\"scope\">\n                                <el-button\n                                    type=\"primary\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:query']\"\n                                    @click=\"showDialog(scope.row.id)\"\n                                >\n                                    详情</el-button\n                                >\n                                <el-button\n                                    type=\"danger\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:delete']\"\n                                    @click=\"del(scope.row.id)\"\n                                >\n                                    删除</el-button\n                                >\n                                <el-button\n                                    type=\"success\"\n                                    style=\"font-size: 14px\"\n                                    v-has-permi=\"['leave:update']\"\n                                    @click=\"update(scope.row.id)\"\n                                    :disabled=\"scope.row.back\"\n                                >\n                                    确定返校</el-button\n                                >\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n                <div class=\"page\">\n                    <el-pagination\n                        background\n                        :page-size=\"listQuery.rows\"\n                        :page-count=\"pageInfo.pages\"\n                        layout=\"->, prev, pager, next, jumper, total, sizes\"\n                        :total=\"pageInfo.total\"\n                        :current-page.sync=\"pageInfo.pageNum\"\n                        @current-change=\"handleCurrentChange\"\n                        @size-change=\"handleSizeChange\"\n                    >\n                    </el-pagination>\n                </div>\n                <div class=\"dialog\">\n                    <el-dialog\n                        :title=\"dialogTitle\"\n                        :visible.sync=\"dialogVisible\"\n                        width=\"45%\"\n                        @closed=\"handleClose\"\n                    >\n                        <el-form\n                            :model=\"record\"\n                            ref=\"saveOrUpdateForm\"\n                            label-width=\"80px\"\n                            :rules=\"rules\"\n                        >\n                            <template v-if=\"record && record.id !== undefined\">\n                                <el-form-item label=\"学生姓名\">\n                                    <el-input\n                                        v-model=\"record.student.name\"\n                                        readonly\n                                    ></el-input>\n                                </el-form-item>\n                            </template>\n                            <template v-else>\n                                <el-form-item label=\"学生姓名\" prop=\"studentId\">\n                                    <el-select\n                                        v-model=\"record.studentId\"\n                                        remote\n                                        filterable\n                                        placeholder=\"输入关键字\"\n                                        :remote-method=\"getStudentsFromRemote\"\n                                        :loading=\"selectLoading\"\n                                    >\n                                        <el-option\n                                            v-for=\"item in students\"\n                                            :key=\"item.id\"\n                                            :label=\"item.name\"\n                                            :value=\"item.id\"\n                                        ></el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </template>\n                            <template v-if=\"record && record.id !== undefined\">\n                                <el-form-item label=\"签离时间\">\n                                    <el-date-picker\n                                        v-model=\"record.time\"\n                                        type=\"datetime\"\n                                        placeholder=\"选择日期时间\"\n                                        readonly\n                                    >\n                                    </el-date-picker>\n                                </el-form-item>\n                            </template>\n                            <el-form-item label=\"返校时间\" prop=\"backDate\">\n                                <el-date-picker\n                                    v-model=\"record.backDate\"\n                                    type=\"date\"\n                                    value-format=\"yyyy-MM-dd\"\n                                    placeholder=\"选择日期\"\n                                >\n                                </el-date-picker>\n                            </el-form-item>\n                            <el-form-item label=\"目的地\" prop=\"target\">\n                                <el-input\n                                    v-model=\"record.target\"\n                                    placeholder=\"输入目的地\"\n                                ></el-input>\n                            </el-form-item>\n                            <el-form-item label=\"原因\" prop=\"reason\">\n                                <el-input\n                                    type=\"textarea\"\n                                    :rows=\"5\"\n                                    v-model=\"record.reason\"\n                                    placeholder=\"输入原因\"\n                                ></el-input>\n                            </el-form-item>\n                        </el-form>\n                        <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"handleClose\">\n                                取 消</el-button\n                            >\n                            <el-button\n                                type=\"primary\"\n                                @click=\"saveOrUpdate\"\n                                v-has-permi=\"['leave:save', 'leave:update']\"\n                            >\n                                保 存</el-button\n                            >\n                        </span>\n                    </el-dialog>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { list, save, update, del, query } from \"@/api/leave\";\nimport { listByName, query as queryStudent } from \"@/api/student\";\nexport default {\n    name: \"index\",\n    methods: {\n        update(id) {\n            this.$confirm(\"是否确定\", \"警告\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                update(id).then((res) => {\n                    if (res.statusCode === 200) {\n                        this.$message({\n                            type: \"success\",\n                            message: res.msg,\n                        });\n                        this.listData();\n                    }\n                });\n            });\n        },\n        saveOrUpdate() {\n            this.$refs[\"saveOrUpdateForm\"].validate((valid) => {\n                if (valid) {\n                    save(this.record).then((res) => {\n                        if (res.statusCode === 200) {\n                            this.$message({\n                                type: \"success\",\n                                message: res.msg,\n                            });\n                            this.listData();\n                            this.handleClose();\n                        }\n                    });\n                } else {\n                    this.$message({\n                        message: \"请正确填写参数\",\n                        type: \"error\",\n                    });\n                    return false;\n                }\n            });\n        },\n        del(id) {\n            this.$confirm(\"是否确定\", \"警告\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                del(id).then((res) => {\n                    if (res.statusCode === 200) {\n                        this.$message({\n                            type: \"success\",\n                            message: res.msg,\n                        });\n                        this.listData();\n                    }\n                });\n            });\n        },\n        async showDialog(id) {\n            this.dialogTitle = \"添加\";\n            if (id) {\n                const { data } = await query(id);\n                this.dialogTitle = \"详情\";\n                if (data) {\n                    this.record = data;\n                    this.dialogVisible = true;\n                }\n            } else {\n                this.dialogVisible = true;\n            }\n        },\n        handleClose() {\n            this.dialogVisible = false;\n            this.students = [];\n            this.record = {\n                id: undefined,\n                time: undefined,\n                reason: undefined,\n                isBack: undefined,\n                studentId: undefined,\n                target: undefined,\n                backDate: undefined,\n            };\n            this.$refs[\"saveOrUpdateForm\"].resetFields();\n        },\n        async getStudent(id) {\n            const { data } = await queryStudent(id);\n            this.student = data;\n        },\n        reset() {\n            this.students = [];\n            this.listQuery.entity = {};\n            this.select();\n        },\n        select() {\n            this.listQuery.page = 1;\n            this.listData();\n        },\n        async listData() {\n            this.loading = true;\n            const { data } = await list(this.listQuery);\n            this.pageInfo = data;\n            this.loading = false;\n        },\n        handleSizeChange(val) {\n            this.listQuery.rows = val;\n            this.listData();\n        },\n        handleCurrentChange(val) {\n            this.listQuery.page = val;\n            this.listData();\n        },\n        async getStudentsFromRemote(query) {\n            if (query !== \"\") {\n                this.selectLoading = true;\n                const { data } = await listByName(query);\n                this.students = data.map((item) => {\n                    return {\n                        id: item.id,\n                        name:\n                            item.room.number +\n                            \" \" +\n                            item.name +\n                            \":\" +\n                            item.number,\n                    };\n                });\n                this.selectLoading = false;\n            } else {\n                this.students = [];\n            }\n        },\n    },\n    data() {\n        return {\n            listQuery: {\n                page: 1,\n                rows: 10,\n                entity: {},\n            },\n            pageInfo: {},\n            loading: true,\n            selectLoading: true,\n            students: [],\n            student: {},\n            record: {\n                id: undefined,\n                time: undefined,\n                reason: undefined,\n                isBack: undefined,\n                studentId: undefined,\n                target: undefined,\n                backDate: undefined,\n            },\n            dialogVisible: false,\n            dialogTitle: \"\",\n            rules: {\n                studentId: [\n                    {\n                        required: true,\n                        message: \"姓名不能为空\",\n                        trigger: \"change\",\n                    },\n                ],\n                reason: [\n                    {\n                        required: true,\n                        message: \"原因不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                target: [\n                    {\n                        required: true,\n                        message: \"目的不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                backDate: [\n                    {\n                        required: true,\n                        message: \"返校日期不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    created() {\n        this.listData();\n    },\n};\n</script>\n\n<style scoped>\n.table {\n    padding: 30px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}