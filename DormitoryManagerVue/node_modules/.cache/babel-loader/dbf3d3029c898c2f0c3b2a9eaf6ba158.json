{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\repair\\components\\imagesUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\repair\\components\\imagesUpload.vue","mtime":1626253806000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\babel.config.js","mtime":1626253806000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbWFnZXNVcGxvYWQiLAogIHByb3BzOiB7CiAgICBpbWFnZXM6IHsKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhY3Rpb246IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL3Blcm1pc3Npb24vdXBsb2FkIiwKICAgICAgaGVhZGVyOiB7CiAgICAgICAgIl91dCI6IGdldFRva2VuKCkKICAgICAgfSwKICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuaW1hZ2VMaXN0LnNwbGljZSh0aGlzLmltYWdlTGlzdC5pbmRleE9mKGZpbGUuc2F2ZU5hbWUpLCAxKTsKICAgICAgdGhpcy4kZW1pdCgib25DaGFuZ2UiLCB0aGlzLmltYWdlTGlzdCk7CiAgICB9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICBpZiAocmVzLnN0YXR1c0NvZGUgIT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgICBmaWxlTGlzdC5zcGxpY2UoZmlsZUxpc3QuaW5kZXhPZihmaWxlKSwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZS5zYXZlTmFtZSA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMuaW1hZ2VMaXN0LnB1c2gocmVzLmRhdGEpOwogICAgICAgIHRoaXMuJGVtaXQoIm9uQ2hhbmdlIiwgdGhpcy5pbWFnZUxpc3QpOwogICAgICB9CiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOwogICAgICBmb3IgKGxldCBpIG9mIHRoaXMuaW1hZ2VzKSB7CiAgICAgICAgdGhpcy5pbWFnZUxpc3QucHVzaChpKTsKICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goewogICAgICAgICAgc2F2ZU5hbWU6IGksCiAgICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfSU1HX1BSRUZJWCArIGkKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"names":["getToken","name","props","images","default","data","dialogImageUrl","dialogVisible","action","process","env","VUE_APP_BASE_API","header","imageList","fileList","methods","handleRemove","file","splice","indexOf","saveName","$emit","handlePictureCardPreview","url","handleSuccess","res","statusCode","$message","message","msg","type","push","init","i","VUE_APP_IMG_PREFIX","created"],"sources":["src/views/manage/repair/components/imagesUpload.vue"],"sourcesContent":["<template>\n  <div>\n    <el-upload\n        :action=\"action\"\n        :headers=\"header\"\n        list-type=\"picture-card\"\n        :on-preview=\"handlePictureCardPreview\"\n        :on-success=\"handleSuccess\"\n        :file-list=\"fileList\"\n        :on-remove=\"handleRemove\">\n      <i class=\"el-icon-plus\"></i>\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {getToken} from \"@/utils/auth\";\nexport default {\n  name: \"imagesUpload\",\n  props:{\n    images: {\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      action: process.env.VUE_APP_BASE_API + \"/permission/upload\",\n      header: {\n        \"_ut\": getToken()\n      },\n      imageList: [],\n      fileList: []\n    };\n  },\n  methods: {\n    handleRemove(file, fileList) {\n      this.imageList.splice(this.imageList.indexOf(file.saveName), 1)\n      this.$emit(\"onChange\", this.imageList)\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleSuccess(res, file, fileList) {\n      if (res.statusCode !== 200) {\n        this.$message({\n          message: res.msg,\n          type: 'error'\n        });\n        fileList.splice(fileList.indexOf(file), 1)\n      } else {\n        file.saveName = res.data\n        this.imageList.push(res.data)\n        this.$emit(\"onChange\", this.imageList)\n      }\n    },\n    init() {\n      this.fileList = []\n      for (let i of this.images) {\n        this.imageList.push(i)\n        this.fileList.push({\n          saveName: i,\n          url: process.env.VUE_APP_IMG_PREFIX + i\n        })\n      }\n    }\n  },\n  created() {\n    this.init()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";AAmBA,SAAAA,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,MAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,aAAA;MACAC,MAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;MACAC,MAAA;QACA,OAAAZ,QAAA;MACA;MACAa,SAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAAC,IAAA,EAAAH,QAAA;MACA,KAAAD,SAAA,CAAAK,MAAA,MAAAL,SAAA,CAAAM,OAAA,CAAAF,IAAA,CAAAG,QAAA;MACA,KAAAC,KAAA,kBAAAR,SAAA;IACA;IACAS,yBAAAL,IAAA;MACA,KAAAX,cAAA,GAAAW,IAAA,CAAAM,GAAA;MACA,KAAAhB,aAAA;IACA;IACAiB,cAAAC,GAAA,EAAAR,IAAA,EAAAH,QAAA;MACA,IAAAW,GAAA,CAAAC,UAAA;QACA,KAAAC,QAAA;UACAC,OAAA,EAAAH,GAAA,CAAAI,GAAA;UACAC,IAAA;QACA;QACAhB,QAAA,CAAAI,MAAA,CAAAJ,QAAA,CAAAK,OAAA,CAAAF,IAAA;MACA;QACAA,IAAA,CAAAG,QAAA,GAAAK,GAAA,CAAApB,IAAA;QACA,KAAAQ,SAAA,CAAAkB,IAAA,CAAAN,GAAA,CAAApB,IAAA;QACA,KAAAgB,KAAA,kBAAAR,SAAA;MACA;IACA;IACAmB,KAAA;MACA,KAAAlB,QAAA;MACA,SAAAmB,CAAA,SAAA9B,MAAA;QACA,KAAAU,SAAA,CAAAkB,IAAA,CAAAE,CAAA;QACA,KAAAnB,QAAA,CAAAiB,IAAA;UACAX,QAAA,EAAAa,CAAA;UACAV,GAAA,EAAAd,OAAA,CAAAC,GAAA,CAAAwB,kBAAA,GAAAD;QACA;MACA;IACA;EACA;EACAE,QAAA;IACA,KAAAH,IAAA;EACA;AACA"}]}