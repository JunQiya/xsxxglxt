{"remainingRequest":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\thread-loader\\dist\\cjs.js!G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js!G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\src\\views\\manage\\student\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\src\\views\\manage\\student\\index.vue","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\babel.config.js","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1712740387000},{"path":"G:\\E\\学生宿舍信息管理系统\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1712740387000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbGlzdCwgcXVlcnksIGRlbCwgc2F2ZU9yVXBkYXRlIH0gZnJvbSAnQC9hcGkvc3R1ZGVudCc7CmltcG9ydCB7IGxpc3QgYXMgbGlzdEZhY3VsdHksIGxpc3RBbGwgfSBmcm9tICJAL2FwaS9mYWN1bHR5IjsKaW1wb3J0IHsgbGlzdEFsbCBhcyBsaXN0Um9vbXMgfSBmcm9tICJAL2FwaS9yb29tIjsKaW1wb3J0IFRyZWVTZWxlY3QgZnJvbSAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QnOwppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgY29tcG9uZW50czogewogICAgVHJlZVNlbGVjdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3RRdWVyeTogewogICAgICAgIGVudGl0eToge30sCiAgICAgICAgcm93czogMTAsCiAgICAgICAgcGFnZTogMQogICAgICB9LAogICAgICBzdHVkZW50OiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiB1bmRlZmluZWQsCiAgICAgICAgcm9vbUlkOiB1bmRlZmluZWQsCiAgICAgICAgZmFjdWx0eUlkOiB1bmRlZmluZWQsCiAgICAgICAgbnVtYmVyOiB1bmRlZmluZWQsCiAgICAgICAgcmVnaXN0cmF0aW9uRGF0ZTogdW5kZWZpbmVkLAogICAgICAgIHBob25lOiB1bmRlZmluZWQsCiAgICAgICAgcGhvdG86IHVuZGVmaW5lZCwKICAgICAgICBpc0xlYXZlOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgcGFnZUluZm86IHt9LAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICByb29tTGlzdDogW10sCiAgICAgIGZhY3VsdHlMaXN0OiBbXSwKICAgICAgZmFjdWx0eVRyZWU6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgYXBwbGljYXRpb25EaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVGl0bGU6ICfmlrDlop7lrabnlJ8nLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflp5PlkI3kuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgbnVtYmVyOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5a2m5Y+35LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHJvb21JZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+WvneWupOS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBhcHBsaWNhdGlvbjogewogICAgICAgIHN0dWRlbnRJZDogdW5kZWZpbmVkLAogICAgICAgIHN0dWRlbnROYW1lOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiB1bmRlZmluZWQKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFwcGxpY2F0aW9uRGlhbG9nT3BlbihpZCwgbmFtZSkgewogICAgICB0aGlzLmFwcGxpY2F0aW9uLnN0dWRlbnRJZCA9IGlkOwogICAgICB0aGlzLmFwcGxpY2F0aW9uLnN0dWRlbnROYW1lID0gbmFtZTsKICAgICAgdGhpcy5hcHBsaWNhdGlvbkRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGFwcGxpY2F0aW9uRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuYXBwbGljYXRpb24gPSB7CiAgICAgICAgc3R1ZGVudElkOiB1bmRlZmluZWQsCiAgICAgICAgc3R1ZGVudE5hbWU6IHVuZGVmaW5lZCwKICAgICAgICByZWFzb246IHVuZGVmaW5lZAogICAgICB9OwogICAgICB0aGlzLmFwcGxpY2F0aW9uRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGRlbCgpIHsKICAgICAgdGhpcy4kY29uZmlybSgi5piv5ZCm56Gu5a6aIiwgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIGRlbCh0aGlzLmFwcGxpY2F0aW9uKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvbkRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgIHRoaXMubGlzdERhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgc2hvd0RpYWxvZyhpZCkgewogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIua3u+WKoOWtpueUnyI7CiAgICAgIGxldCBmYWN1bHR5VHJlZSA9IGF3YWl0IGxpc3RGYWN1bHR5KCk7CiAgICAgIHRoaXMuZmFjdWx0eVRyZWUgPSBmYWN1bHR5VHJlZS5kYXRhOwogICAgICBhd2FpdCB0aGlzLmdldFJvb21MaXN0KDEpOwogICAgICBpZiAoaWQpIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkYXRhCiAgICAgICAgfSA9IGF3YWl0IHF1ZXJ5KGlkKTsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLkv67mlLnlrabnlJ8iOwogICAgICAgICAgdGhpcy5zdHVkZW50ID0gZGF0YTsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRSb29tTGlzdCh2KSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0Um9vbXMoKTsKICAgICAgICB0aGlzLnJvb21MaXN0ID0gZGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvb21MaXN0ID0gW107CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRGYWN1bHR5TGlzdCh2KSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0QWxsKCk7CiAgICAgICAgdGhpcy5mYWN1bHR5TGlzdCA9IGRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mYWN1bHR5TGlzdCA9IFtdOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuc3R1ZGVudCA9IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIG5hbWU6IHVuZGVmaW5lZCwKICAgICAgICByb29tSWQ6IHVuZGVmaW5lZCwKICAgICAgICBmYWN1bHR5SWQ6IHVuZGVmaW5lZCwKICAgICAgICBudW1iZXI6IHVuZGVmaW5lZCwKICAgICAgICByZWdpc3RyYXRpb25EYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcGhvbmU6IHVuZGVmaW5lZCwKICAgICAgICBwaG90bzogdW5kZWZpbmVkCiAgICAgIH07CiAgICAgIHRoaXMucm9vbUxpc3QgPSBbXTsKICAgICAgdGhpcy5mYWN1bHR5VHJlZSA9IFtdOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy4kcmVmc1snc2F2ZU9yVXBkYXRlRm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbJ3NhdmVPclVwZGF0ZUZvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBzYXZlT3JVcGRhdGUodGhpcy5zdHVkZW50KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgICBfdGhpcy5saXN0RGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fmraPnoa7loavlhpnlj4LmlbAnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGxpc3REYXRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgbGlzdCh0aGlzLmxpc3RRdWVyeSk7CiAgICAgIHRoaXMucGFnZUluZm8gPSBkYXRhOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5yb3dzID0gdmFsOwogICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IHZhbDsKICAgICAgdGhpcy5saXN0RGF0YSgpOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5lbnRpdHkgPSB7fTsKICAgICAgdGhpcy5zZWxlY3QoKTsKICAgIH0sCiAgICBzZWxlY3QoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxOwogICAgICB0aGlzLmxpc3REYXRhKCk7CiAgICB9LAogICAgbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUuaWQsCiAgICAgICAgbGFiZWw6IG5vZGUubmFtZSwKICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbgogICAgICB9OwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubGlzdERhdGEoKTsKICB9Cn07"},{"version":3,"names":["list","query","del","saveOrUpdate","listFaculty","listAll","listRooms","TreeSelect","name","components","data","listQuery","entity","rows","page","student","id","undefined","roomId","facultyId","number","registrationDate","phone","photo","isLeave","pageInfo","loading","roomList","facultyList","facultyTree","dialogVisible","applicationDialogVisible","dialogTitle","rules","required","message","trigger","application","studentId","studentName","reason","methods","applicationDialogOpen","applicationDialogClose","$confirm","confirmButtonText","cancelButtonText","type","then","res","statusCode","$message","msg","listData","showDialog","getRoomList","v","getFacultyList","handleClose","$refs","resetFields","_this","validate","valid","handleSizeChange","val","handleCurrentChange","reset","select","normalizer","node","children","length","label","created"],"sources":["src/views/manage/student/index.vue"],"sourcesContent":["<template>\n  <div class=\"router-container\">\n    <div class=\"container\">\n      <div class=\"inner_container\">\n        <div class=\"table\">\n          <el-form :inline=\"true\" ref=\"form\" label-width=\"70px\" :model=\"listQuery.entity\">\n            <el-form-item label=\"姓名\">\n              <el-input clearable v-model=\"listQuery.entity.name\" size=\"small\"\n                        placeholder=\"姓名\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"学号\">\n              <el-input clearable v-model=\"listQuery.entity.number\" size=\"small\"\n                        placeholder=\"学号\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"班级\" v-has-permi=\"['faculty:list']\">\n              <el-select filterable clearable v-model=\"listQuery.entity.facultyId\" size=\"small\"\n                         placeholder=\"班级\" @visible-change=\"getFacultyList\">\n                <el-option v-for=\"item in facultyList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"寝室\" v-has-permi=\"['room:list']\">\n              <el-select filterable clearable v-model=\"listQuery.entity.roomId\" size=\"small\"\n                         placeholder=\"寝室\" @visible-change=\"getRoomList\">\n                <el-option v-for=\"item in roomList\" :key=\"item.id\" :label=\"item.number\" :value=\"item.id\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"在寝\">\n              <el-select filterable clearable v-model=\"listQuery.entity.isLeave\" size=\"small\">\n                <el-option label=\"在寝\" :value=\"false\"></el-option>\n                <el-option label=\"不在寝\" :value=\"true\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button style=\"font-size: 16px;\"  type=\"primary\" @click=\"select\"> 查询</el-button>\n              <el-button style=\"font-size: 16px;\"  type=\"warning\" @click=\"reset\"> 重置</el-button>\n              <el-button style=\"font-size: 16px;\"  type=\"success\" v-has-permi=\"['student:save']\" @click=\"showDialog(undefined)\"> 新增</el-button>\n            </el-form-item>\n          </el-form>\n          <el-table :data=\"pageInfo.list\" v-loading=\"loading\" height=\"345\">\n            <el-table-column label=\"姓名\" prop=\"name\" width=\"100\"></el-table-column>\n            <el-table-column label=\"学号\" prop=\"number\" width=\"160\"></el-table-column>\n            <el-table-column label=\"班级\" prop=\"faculty.name\" width=\"160\"></el-table-column>\n            <el-table-column label=\"宿舍\" prop=\"room.number\" width=\"120\"></el-table-column>\n            <el-table-column label=\"电话\" prop=\"phone\" width=\"150\"></el-table-column>\n            <el-table-column label=\"注册日期\" prop=\"registrationDate\" width=\"120\"></el-table-column>\n            <el-table-column label=\"是否在寝\" width=\"100\">\n              <template slot-scope=\"scope\">\n                <span style=\"color: #67C23A\" v-if=\"!scope.row.isLeave\">是</span>\n                <span style=\"color: #909399\" v-else>否</span>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"300\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button type=\"primary\" style=\"font-size: 14px;\"  v-has-permi=\"['student:query']\" @click=\"showDialog(scope.row.id)\"> 详情</el-button>\n                <el-button type=\"danger\" style=\"font-size: 14px;\" v-has-permi=\"['student:delete']\" @click=\"applicationDialogOpen(scope.row.id, scope.row.name)\"> 申请退宿</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"page\">\n          <el-pagination\n              background\n              :page-size=\"listQuery.rows\"\n              :page-count=\"pageInfo.pages\"\n              layout=\"->, prev, pager, next, jumper, total, sizes\"\n              :total=\"pageInfo.total\"\n              :current-page.sync=\"pageInfo.pageNum\"\n              @current-change=\"handleCurrentChange\"\n              @size-change=\"handleSizeChange\"\n          >\n          </el-pagination>\n        </div>\n        <div class=\"dialog\">\n          <el-dialog\n              :title=\"dialogTitle\"\n              :visible.sync=\"dialogVisible\"\n              width=\"45%\"\n              @closed=\"handleClose\"\n          >\n            <el-form ref=\"saveOrUpdateForm\" :rules=\"rules\" :model=\"student\" label-width=\"80px\">\n              <el-form-item label=\"姓名\" prop=\"name\">\n                <el-input v-model=\"student.name\" placeholder=\"输入姓名\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"学号\" prop=\"number\">\n                <el-input v-model=\"student.number\" placeholder=\"输入学号\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"电话\" prop=\"phone\">\n                <el-input v-model=\"student.phone\" placeholder=\"输入电话\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"寝室\" prop=\"roomId\">\n                <el-select filterable v-model=\"student.roomId\" style=\"width: 100%\"\n                           placeholder=\"选择寝室\">\n                  <el-option v-for=\"item in roomList\" :key=\"item.id\" :label=\"item.number\" :value=\"item.id\"></el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"班级\" prop=\"facultyId\">\n                <tree-select\n                    v-model=\"student.facultyId\"\n                    :options=\"facultyTree\"\n                    :normalizer=\"normalizer\"\n                    :show-count=\"true\"\n                    placeholder=\"选择班级\">\n                </tree-select>\n              </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"handleClose\"> 取 消</el-button>\n                            <el-button type=\"primary\" @click=\"saveOrUpdate\"\n                                       v-has-permi=\"['student:update','student:save']\"> 保 存</el-button>\n                          </span>\n          </el-dialog>\n          <el-dialog title=\"退宿申请\" :visible.sync=\"applicationDialogVisible\" width=\"45%\" @closed=\"applicationDialogClose\">\n            <el-form ref=\"application\" :model=\"application\" label-width=\"80px\">\n              <el-form-item label=\"学生姓名\">\n                <el-input readonly v-model=\"application.studentName\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"申请理由\" prop=\"reason\">\n                <el-input v-model=\"application.reason\" type=\"textarea\"\n                          placeholder=\"请输入申请理由\" rows=\"10\"></el-input>\n              </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                            <el-button type=\"danger\" @click=\"applicationDialogClose\"> 取 消</el-button>\n                            <el-button type=\"primary\" @click=\"del\"> 保 存</el-button>\n                          </span>\n          </el-dialog>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {list, query, del, saveOrUpdate} from '@/api/student'\nimport {list as listFaculty, listAll} from \"@/api/faculty\";\nimport {listAll as listRooms} from \"@/api/room\";\nimport TreeSelect from '@riophae/vue-treeselect'\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\nexport default {\n  name: \"index\",\n  components:{TreeSelect},\n  data() {\n    return {\n      listQuery: {\n        entity: {},\n        rows: 10,\n        page: 1\n      },\n      student: {\n        id: undefined,\n        name: undefined,\n        roomId: undefined,\n        facultyId: undefined,\n        number: undefined,\n        registrationDate: undefined,\n        phone: undefined,\n        photo: undefined,\n        isLeave: undefined\n      },\n      pageInfo: {},\n      loading: true,\n      roomList: [],\n      facultyList: [],\n      facultyTree: [],\n      dialogVisible: false,\n      applicationDialogVisible: false,\n      dialogTitle: '新增学生',\n      rules: {\n        name: [\n          {required: true, message: '姓名不能为空', trigger: 'blur'}\n        ],\n        number: [\n          {required: true, message: '学号不能为空', trigger: 'blur'}\n        ],\n        roomId: [\n          {required: true, message: '寝室不能为空', trigger: 'blur'}\n        ]\n      },\n      application: {\n        studentId: undefined,\n        studentName: undefined,\n        reason: undefined\n      }\n    }\n  },\n  methods: {\n    applicationDialogOpen(id, name) {\n      this.application.studentId = id\n      this.application.studentName = name\n      this.applicationDialogVisible = true\n    },\n    applicationDialogClose() {\n      this.application = {\n        studentId: undefined,\n        studentName: undefined,\n        reason: undefined\n      }\n      this.applicationDialogVisible = false\n    },\n    del() {\n      this.$confirm(\"是否确定\", \"警告\", {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        del(this.application).then((res) => {\n          if (res.statusCode === 200) {\n            this.$message({\n              type: 'success',\n              message: res.msg\n            });\n            this.applicationDialogClose()\n            this.listData()\n          }\n        })\n      })\n    },\n    async showDialog(id) {\n      this.dialogTitle = \"添加学生\"\n      let facultyTree = await listFaculty()\n      this.facultyTree = facultyTree.data\n      await this.getRoomList(1)\n      if (id) {\n        const {data} = await query(id)\n        if (data) {\n          this.dialogTitle = \"修改学生\"\n          this.student = data\n          this.dialogVisible = true\n        }\n      } else {\n        this.dialogVisible = true\n      }\n    },\n    async getRoomList(v) {\n      if (v) {\n        const {data} = await listRooms()\n        this.roomList = data\n      } else {\n        this.roomList = []\n      }\n    },\n    async getFacultyList(v) {\n      if (v) {\n        const {data} = await listAll()\n        this.facultyList = data\n      } else {\n        this.facultyList = []\n      }\n    },\n    handleClose() {\n      this.student = {\n        id: undefined,\n        name: undefined,\n        roomId: undefined,\n        facultyId: undefined,\n        number: undefined,\n        registrationDate: undefined,\n        phone: undefined,\n        photo: undefined\n      }\n      this.roomList = []\n      this.facultyTree = []\n      this.dialogVisible = false\n      this.$refs['saveOrUpdateForm'].resetFields()\n    },\n    saveOrUpdate() {\n      const _this = this\n      this.$refs['saveOrUpdateForm'].validate((valid) => {\n        if (valid) {\n          saveOrUpdate(this.student).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              _this.handleClose()\n              _this.listData()\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n    },\n    async listData() {\n      this.loading = true\n      const {data} = await list(this.listQuery)\n      this.pageInfo = data\n      this.loading = false\n    },\n    handleSizeChange(val) {\n      this.listQuery.rows = val\n      this.listData()\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.listData()\n    },\n    reset() {\n      this.listQuery.entity = {}\n      this.select()\n    },\n    select() {\n      this.listQuery.page = 1\n      this.listData()\n    },\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.id,\n        label: node.name,\n        children: node.children\n      };\n    }\n  },\n  created() {\n    this.listData()\n  }\n}\n</script>\n\n<style scoped>\n.table {\n  padding: 30px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}