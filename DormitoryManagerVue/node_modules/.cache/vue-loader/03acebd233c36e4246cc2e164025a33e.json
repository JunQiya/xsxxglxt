{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\personal\\changePassword\\index.vue?vue&type=style&index=0&id=0d8e3e73&scoped=true&lang=css&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\personal\\changePassword\\index.vue","mtime":1698660568000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678020088000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci51c2VyLWZvcm0gewogIHdpZHRoOiA0MDBweDsKICBtYXJnaW46IDAgYXV0bzsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAsGA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/personal/changePassword","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <div class=\"inner_container\">\n        <div class=\"user-form\">\n          <el-form ref=\"form\" :model=\"formData\" :rules=\"rules\" label-width=\"100px\">\n            <el-form-item label=\"原密码:\" prop=\"oldPassword\">\n              <el-input v-model=\"formData.oldPassword\" type=\"password\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"修改密码:\" prop=\"current1\">\n              <el-input v-model=\"formData.current1\" type=\"password\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"再次输入:\" prop=\"current2\">\n              <el-input v-model=\"formData.current2\" type=\"password\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"success\" style=\"font-size: 16px;\"  @click=\"send('form')\"> 修改</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {changePassword} from \"../../../api/user\";\n\nexport default {\n  name: \"index\",\n  data() {\n    let validator1 = (rule, value, callback) => {\n      if (value === this.formData.oldPassword) {\n        callback(new Error())\n      } else {\n        callback()\n      }\n    }\n    let validator2 = (rule, value, callback) => {\n      if (value !== this.formData.current1) {\n        callback(new Error())\n      } else {\n        callback()\n      }\n    }\n    return {\n      formData: {\n        oldPassword: '',\n        current1: '',\n        current2: ''\n      },\n      rules: {\n        oldPassword: [\n          {required: true, message: '请输入原密码', trigger: 'blur'},\n          {min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'}\n        ],\n        current1: [\n          {required: true, message: '密码不能为空', trigger: 'blur'},\n          {min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'},\n          {validator: validator1, message: \"修改后的密码不能于原密码相同\", trigger: 'blur'}\n        ],\n        current2: [\n          {required: true, message: '密码不能为空', trigger: 'blur'},\n          {validator: validator2, message: \"两次密码需要相同\", trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  methods: {\n    send(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          changePassword(this.formData).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              setTimeout(() =>{\n                location.reload()\n              }, 1000)\n              this.formData = {\n                oldPassword: '',\n                current1: '',\n                current2: ''\n              }\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-form {\n  width: 400px;\n  margin: 0 auto;\n}\n</style>\n"]}]}