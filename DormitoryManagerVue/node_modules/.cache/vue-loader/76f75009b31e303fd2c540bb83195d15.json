{"remainingRequest":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\src\\views\\manage\\dayApplication\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\src\\views\\manage\\dayApplication\\index.vue","mtime":1745831196712},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1762330415881},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762330398085},{"path":"G:\\E\\学生宿舍信息管理系统\\xsxxpt\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1762330415853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCB7DQogICAgY3JlYXRlQXBwbGljYXRpb24sDQogICAgdXBkYXRlQXBwbGljYXRpb24sDQogICAgdXBsb2FkRmlsZQ0KICB9IGZyb20gJ0AvYXBpL2xlYXZlQXBwbGljYXRpb24nDQogIGltcG9ydCB7IGxpc3QgfSBmcm9tICdAL2FwaS9zdHVkZW50Jw0KDQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaXNFZGl0OiBmYWxzZSwNCiAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLA0KICAgICAgICBzdGF0dXNNYXA6IHsNCiAgICAgICAgICBkcmFmdDogJ+iNieeovycsDQogICAgICAgICAgc3VibWl0dGVkOiAn5bey5o+Q5LqkJywNCiAgICAgICAgICBhcHByb3ZlZDogJ+W3suaJueWHhicsDQogICAgICAgICAgcmVqZWN0ZWQ6ICflt7Lmi5Lnu50nDQogICAgICAgIH0sDQogICAgICAgIGZvcm1EYXRhOiB7DQogICAgICAgICAgaWQ6IG51bGwsDQogICAgICAgICAgc3R1ZGVudF9ubzogJycsDQogICAgICAgICAgc3R1ZGVudF9uYW1lOiAnJywgIC8vIOe7n+S4gOS9v+eUqOibh+W9ouWRveWQjQ0KICAgICAgICAgIGdlbmRlcjogJ21hbGUnLA0KICAgICAgICAgIGRlcGFydG1lbnQ6ICcnLA0KICAgICAgICAgIGNsYXNzX25hbWU6ICcnLCAgICAvLyDnu5/kuIDkvb/nlKjom4flvaLlkb3lkI0NCiAgICAgICAgICBwaG9uZTogJycsDQogICAgICAgICAgcGFyZW50X25hbWU6ICcnLCAgIC8vIOe7n+S4gOS9v+eUqOibh+W9ouWRveWQjQ0KICAgICAgICAgIHBhcmVudF9waG9uZTogJycsICAvLyDnu5/kuIDkvb/nlKjom4flvaLlkb3lkI0NCiAgICAgICAgICBhZGRyZXNzOiAnJywNCiAgICAgICAgICBlbWVyZ2VuY3lfY29udGFjdDogJycsICAvLyDnu5/kuIDkvb/nlKjom4flvaLlkb3lkI0NCiAgICAgICAgICBlbWVyZ2VuY3lfcGhvbmU6ICcnLCAgICAvLyDmt7vliqDntKfmgKXogZTns7vkurrnlLXor53lrZfmrrUNCiAgICAgICAgICB0aW1lX3BlcmlvZDogW10sICAgICAgICAvLyDnu5/kuIDkvb/nlKjom4flvaLlkb3lkI0NCiAgICAgICAgICBhdHRhY2htZW50czogW10sDQogICAgICAgICAgcGFyZW50X29waW5pb246ICcnLCAgLy8g57uf5LiA5L2/55So6JuH5b2i5ZG95ZCNDQogICAgICAgICAgcGFyZW50X2FncmVlOiAn5bey5ZCM5oSPJywgIC8vIOaWsOWinuWutumVv+WQjOaEj+mAiemhue+8jOm7mOiupOWAvOS4uiflt7LlkIzmhI8nDQogICAgICAgICAgY291bnNlbG9yX3N0YXR1czogJ+W+heWuoeaguCcsDQogICAgICAgICAgY29sbGVnZV9zdGF0dXM6ICflvoXlrqHmoLgnLA0KICAgICAgICAgIHN0dWRlbnRfc2lnbmF0dXJlOiAnJywgIC8vIOe7n+S4gOS9v+eUqOibh+W9ouWRveWQjQ0KICAgICAgICAgIHBhcmVudF9zaWduYXR1cmU6ICcnLCAgICAvLyDnu5/kuIDkvb/nlKjom4flvaLlkb3lkI0NCiAgICAgICAgICBzdGF0dXM6ICdkcmFmdCcsDQogICAgICAgICAgcmVhc29uOiAnJw0KICAgICAgICB9LA0KICAgICAgICBydWxlczogew0KICAgICAgICAgIHN0dWRlbnRfbm86IFsNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflrablj7flv4XloasnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcGF0dGVybjogL15cZHsxMX0kLywgbWVzc2FnZTogJ+WtpuWPt+W/hemhu+S4ujEx5L2N5pWw5a2XJyB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBzdHVkZW50TmFtZTogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+Wnk+WQjeW/heWhqycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyBtaW46IDIsIG1heDogMTAsIG1lc3NhZ2U6ICflp5PlkI3plb/luqYyLTEw5a2X56ymJyB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBwaG9uZTogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+eUteivneW/heWhqycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyBwYXR0ZXJuOiAvXjFbMy05XVxkezl9JC8sIG1lc3NhZ2U6ICfor7fovpPlhaXmnInmlYjnmoTmiYvmnLrlj7fnoIEnIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHBhcmVudFBob25lOiBbDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5a626ZW/55S16K+d5b+F5aGrJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHBhdHRlcm46IC9eMVszLTldXGR7OX0kLywgbWVzc2FnZTogJ+ivt+i+k+WFpeacieaViOeahOaJi+acuuWPt+eggScgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgYWRkcmVzczogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WcsOWdgOW/heWhqycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyBtaW46IDEwLCBtZXNzYWdlOiAn5Zyw5Z2A6ZyA5a6M5pW05aGr5YaZJyB9DQogICAgICAgICAgXSwNCiAgICAgICAgICB0aW1lX3BlcmlvZDogWw0KICAgICAgICAgICAgeyB2YWxpZGF0b3I6IHRoaXMudmFsaWRhdGVEYXRlUmFuZ2UsIHRyaWdnZXI6ICdjaGFuZ2UnIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHBhcmVudF9vcGluaW9uOiBbDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5a626ZW/5oSP6KeB5b+F5aGrJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHJlYXNvbjogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+i1sOivu+WOn+WboOW/heWhqycsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBlbWVyZ2VuY3lQaG9uZTogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+e0p+aApeiBlOezu+S6uueUteivneW/heWhqycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyBwYXR0ZXJuOiAvXjFbMy05XVxkezl9JC8sIG1lc3NhZ2U6ICfor7fovpPlhaXmnInmlYjnmoTmiYvmnLrlj7fnoIEnIH0NCiAgICAgICAgICBdLA0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgLy8g6am85bOw5ZG95ZCN6L2s6JuH5b2i5ZG95ZCN77yI5Y+M5ZCR57uR5a6a77yJDQogICAgICBzdHVkZW50SWQ6IHsNCiAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpcy5mb3JtRGF0YS5zdHVkZW50X25vIH0sDQogICAgICAgIHNldCh2YWx1ZSkgeyB0aGlzLmZvcm1EYXRhLnN0dWRlbnRfbm8gPSB2YWx1ZSB9DQogICAgICB9LA0KICAgICAgc3R1ZGVudE5hbWU6IHsNCiAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpcy5mb3JtRGF0YS5zdHVkZW50X25hbWUgfSwNCiAgICAgICAgc2V0KHZhbHVlKSB7IHRoaXMuZm9ybURhdGEuc3R1ZGVudF9uYW1lID0gdmFsdWUgfQ0KICAgICAgfSwNCiAgICAgIGRlcGFydG1lbnQ6IHsNCiAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpcy5mb3JtRGF0YS5kZXBhcnRtZW50IH0sDQogICAgICAgIHNldCh2YWx1ZSkgeyB0aGlzLmZvcm1EYXRhLmRlcGFydG1lbnQgPSB2YWx1ZSB9DQogICAgICB9LA0KICAgICAgcGFyZW50Q29udGFjdDogew0KICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzLmZvcm1EYXRhLmVtZXJnZW5jeV9jb250YWN0IH0sDQogICAgICAgIHNldCh2YWx1ZSkgeyB0aGlzLmZvcm1EYXRhLmVtZXJnZW5jeV9jb250YWN0ID0gdmFsdWUgfQ0KICAgICAgfSwNCiAgICAgIGNsYXNzTmFtZTogew0KICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzLmZvcm1EYXRhLmNsYXNzX25hbWUgfSwNCiAgICAgICAgc2V0KHZhbHVlKSB7IHRoaXMuZm9ybURhdGEuY2xhc3NfbmFtZSA9IHZhbHVlIH0NCiAgICAgIH0sDQogICAgICBwaG9uZTogew0KICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzLmZvcm1EYXRhLnBob25lIH0sDQogICAgICAgIHNldCh2YWx1ZSkgeyB0aGlzLmZvcm1EYXRhLnBob25lID0gdmFsdWUgfQ0KICAgICAgfSwNCiAgICAgIHBhcmVudE5hbWU6IHsNCiAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpcy5mb3JtRGF0YS5wYXJlbnRfbmFtZSB9LA0KICAgICAgICBzZXQodmFsdWUpIHsgdGhpcy5mb3JtRGF0YS5wYXJlbnRfbmFtZSA9IHZhbHVlIH0NCiAgICAgIH0sDQogICAgICBwYXJlbnRQaG9uZTogew0KICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzLmZvcm1EYXRhLnBhcmVudF9waG9uZSB9LA0KICAgICAgICBzZXQodmFsdWUpIHsgdGhpcy5mb3JtRGF0YS5wYXJlbnRfcGhvbmUgPSB2YWx1ZSB9DQogICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQoNCiAgICAgIGhhbmRsZUNsb3NlKGRvbmUpIHsgLy8g5o6l5pS2IGRvbmUg5Y+C5pWwDQogICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnN0YXR1cyA9PT0gJ2RyYWZ0Jykgew0KICAgICAgICAgIC8vIOiNieeov+eKtuaAgeWFgeiuuOebtOaOpeWFs+mXrQ0KICAgICAgICAgIGRvbmUoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyDlhbbku5bnirbmgIHpnIDopoHnoa7orqTlhbPpl60NCiAgICAgICAgICB0aGlzLiRjb25maXJtKCfmnKrmj5DkuqTnmoTkv67mlLnlsIbkuKLlpLHvvIznoa7orqTlhbPpl63lkJfvvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIGRvbmUoKTsgLy8g55So5oi356Gu6K6k5YWz6ZetDQogICAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgLy8g55So5oi35Y+W5raI5YWz6Zet77yM5LiN5omn6KGMIGRvbmUoKQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgLy8g5pel5pyf6IyD5Zu06aqM6K+BDQogICAgICB2YWxpZGF0ZURhdGVSYW5nZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsNCiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggIT09IDIpIHsNCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+mAieaLqeWujOaVtOeahOaXtumXtOautScpKQ0KICAgICAgICB9IGVsc2UgaWYgKHZhbHVlWzBdID4gdmFsdWVbMV0pIHsNCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+e7k+adn+aXpeacn+S4jeiDveaXqeS6juW8gOWni+aXpeacnycpKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNhbGxiYWNrKCkNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGFzeW5jIHZhbGlkYXRlU3R1ZGVudE5vKCkgew0KICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEuc3R1ZGVudF9ubyB8fCB0aGlzLmZvcm1EYXRhLnN0dWRlbnRfbm8udHJpbSgpID09PSAnJykgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxpc3QoeyBlbnRpdHk6IHsgbnVtYmVyOiB0aGlzLmZvcm1EYXRhLnN0dWRlbnRfbm8gfSB9KQ0KICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor6Xlrablj7fkuI3lrZjlnKgnKQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5zdHVkZW50X25vID0gJycgIC8vIOa4heepuui+k+WFpQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCBzdHVkZW50SW5mbyA9IHJlc3BvbnNlLmRhdGEubGlzdFswXQ0KICAgICAgICAgICAgLy8g6Ieq5Yqo5aGr5YWF5a2m55Sf5L+h5oGvDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0dWRlbnROYW1lID0gc3R1ZGVudEluZm8ubmFtZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5jbGFzc05hbWUgPSBzdHVkZW50SW5mby5mYWN1bHR5Lm5hbWUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEucGhvbmUgPSBzdHVkZW50SW5mby5waG9uZQ0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflrablj7fpqozor4HmiJDlip/vvIzlt7Loh6rliqjloavlhYXlrabnlJ/kv6Hmga8nKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCflrablj7fpqozor4HlpLHotKU6JywgZXJyb3IpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5a2m5Y+36aqM6K+B5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJykNCiAgICAgICAgfQ0KICAgICAgfSwNCg0KICAgICAgLy8g6ZmE5Lu25aSE55CGDQogICAgICBhc3luYyBoYW5kbGVBdHRhY2htZW50cygpIHsNCiAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEuYXR0YWNobWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gW10NCg0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IHVwbG9hZFByb21pc2VzID0gdGhpcy5mb3JtRGF0YS5hdHRhY2htZW50cy5tYXAoYXN5bmMgZmlsZSA9PiB7DQogICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlLnJhdykNCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXBwbHlfaWQnLCB0aGlzLmZvcm1EYXRhLmlkKQ0KICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHVwbG9hZEZpbGUoZm9ybURhdGEpDQogICAgICAgICAgfSkNCg0KICAgICAgICAgIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbCh1cGxvYWRQcm9taXNlcykNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfpmYTku7bkuIrkvKDlpLHotKUnKQ0KICAgICAgICAgIHRocm93IGVycm9yDQogICAgICAgIH0NCiAgICAgIH0sDQoNCiAgICAgIC8vIOihqOWNlemHjee9rg0KICAgICAgcmVzZXRGb3JtKCkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhID0gew0KICAgICAgICAgIGlkOiBudWxsLA0KICAgICAgICAgIHN0dWRlbnRfbm86ICcnLA0KICAgICAgICAgIHN0dWRlbnRfbmFtZTogJycsDQogICAgICAgICAgZ2VuZGVyOiAnbWFsZScsDQogICAgICAgICAgZGVwYXJ0bWVudDogJycsDQogICAgICAgICAgYWRkcmVzczogJycsDQogICAgICAgICAgZW1lcmdlbmN5X2NvbnRhY3Q6ICcnLA0KICAgICAgICAgIGVtZXJnZW5jeV9waG9uZTogJycsICAvLyDph43nva7ntKfmgKXogZTns7vkurrnlLXor53lrZfmrrUNCiAgICAgICAgICB0aW1lX3BlcmlvZDogW10sDQogICAgICAgICAgYXR0YWNobWVudHM6IFtdLA0KICAgICAgICAgIHBhcmVudF9vcGluaW9uOiAnJywNCiAgICAgICAgICBwYXJlbnRfYWdyZWU6ICflt7LlkIzmhI8nLCAgLy8g6YeN572u5a626ZW/5ZCM5oSP6YCJ6aG5DQogICAgICAgICAgY291bnNlbG9yX3N0YXR1czogJ+W+heWuoeaguCcsDQogICAgICAgICAgY29sbGVnZV9zdGF0dXM6ICflvoXlrqHmoLgnLA0KICAgICAgICAgIHN0dWRlbnRfc2lnbmF0dXJlOiAnJywNCiAgICAgICAgICBwYXJlbnRfc2lnbmF0dXJlOiAnJywNCiAgICAgICAgICBzdGF0dXM6ICdkcmFmdCcsDQogICAgICAgICAgcmVhc29uOiAnJw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgIH0pDQogICAgICB9LA0KDQogICAgICAvLyDnvJbovpHmqKHlvI8NCiAgICAgIGVkaXRBcHBsaWNhdGlvbihyb3cpIHsNCiAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlDQogICAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLnJvdyB9DQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIH0sDQoNCiAgICAgIC8vIOaPkOS6pOWkhOeQhg0KICAgICAgYXN5bmMgaGFuZGxlU3VibWl0KCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIC8vIOWFiOi/m+ihjOihqOWNlemqjOivgQ0KICAgICAgICAgIGF3YWl0IHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpDQoNCiAgICAgICAgICAvLyDmo4Dmn6VzdHVkZW50X25v5piv5ZCm5Li656m6DQogICAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLnN0dWRlbnRfbm8gfHwgdGhpcy5mb3JtRGF0YS5zdHVkZW50X25vLnRyaW0oKSA9PT0gJycpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WtpuWPt+S4jeiDveS4uuepuicpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9DQoNCg0KICAgICAgICAgIC8vIOWkhOeQhumZhOS7tuS4iuS8oA0KICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRzID0gYXdhaXQgdGhpcy5oYW5kbGVBdHRhY2htZW50cygpDQoNCiAgICAgICAgICAvLyDmnoTpgKDor7fmsYLmlbDmja7ml7bvvIznoa7kv53lrZfmrrXlkI3kuIDoh7QNCiAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IHsNCiAgICAgICAgICAgIGFwcGx5SWQ6IHRoaXMuZm9ybURhdGEuaWQsDQogICAgICAgICAgICBzdHVkZW50Tm86IHRoaXMuZm9ybURhdGEuc3R1ZGVudF9ubywNCiAgICAgICAgICAgIHN0dWRlbnROYW1lOiB0aGlzLmZvcm1EYXRhLnN0dWRlbnRfbmFtZSB8fCB0aGlzLmZvcm1EYXRhLnN0dWRlbnROYW1lLA0KICAgICAgICAgICAgZ2VuZGVyOiB0aGlzLmZvcm1EYXRhLmdlbmRlciwNCiAgICAgICAgICAgIGRlcGFydG1lbnQ6IHRoaXMuZm9ybURhdGEuZGVwYXJ0bWVudCwNCiAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5mb3JtRGF0YS5jbGFzc19uYW1lIHx8IHRoaXMuZm9ybURhdGEuY2xhc3NOYW1lLA0KICAgICAgICAgICAgcGhvbmU6IHRoaXMuZm9ybURhdGEucGhvbmUsDQogICAgICAgICAgICBwYXJlbnROYW1lOiB0aGlzLmZvcm1EYXRhLnBhcmVudF9uYW1lIHx8IHRoaXMuZm9ybURhdGEucGFyZW50TmFtZSwNCiAgICAgICAgICAgIHBhcmVudFBob25lOiB0aGlzLmZvcm1EYXRhLnBhcmVudF9waG9uZSB8fCB0aGlzLmZvcm1EYXRhLnBhcmVudFBob25lLA0KICAgICAgICAgICAgYWRkcmVzczogdGhpcy5mb3JtRGF0YS5hZGRyZXNzLA0KICAgICAgICAgICAgc3RhcnREYXRlOiB0aGlzLmZvcm1EYXRhLnRpbWVfcGVyaW9kWzBdID8gbmV3IERhdGUodGhpcy5mb3JtRGF0YS50aW1lX3BlcmlvZFswXSkudG9JU09TdHJpbmcoKSA6IG51bGwsDQogICAgICAgICAgICBlbmREYXRlOiB0aGlzLmZvcm1EYXRhLnRpbWVfcGVyaW9kWzFdID8gbmV3IERhdGUodGhpcy5mb3JtRGF0YS50aW1lX3BlcmlvZFsxXSkudG9JU09TdHJpbmcoKSA6IG51bGwsDQogICAgICAgICAgICByZWFzb246IHRoaXMuZm9ybURhdGEucmVhc29uLnRyaW0oKSwNCiAgICAgICAgICAgIGVtZXJnZW5jeUNvbnRhY3Q6IHRoaXMuZm9ybURhdGEuZW1lcmdlbmN5X2NvbnRhY3QgfHwgdGhpcy5mb3JtRGF0YS5lbWVyZ2VuY3lDb250YWN0LA0KICAgICAgICAgICAgZW1lcmdlbmN5UGhvbmU6IHRoaXMuZm9ybURhdGEuZW1lcmdlbmN5X3Bob25lLCAgLy8g5L2/55SoZm9ybURhdGHkuK3nmoTlrZfmrrXlkI0NCiAgICAgICAgICAgIHBhcmVudE9waW5pb246IHRoaXMuZm9ybURhdGEucGFyZW50X29waW5pb24gfHwgdGhpcy5mb3JtRGF0YS5wYXJlbnRPcGluaW9uLA0KICAgICAgICAgICAgcGFyZW50QWdyZWU6IHRoaXMuZm9ybURhdGEucGFyZW50X2FncmVlLCAgLy8g5bCG5a626ZW/5ZCM5oSP6YCJ6aG55Yqg5YWl6K+35rGC5pWw5o2uDQogICAgICAgICAgICBjb3Vuc2Vsb3JTdGF0dXM6IHRoaXMuZm9ybURhdGEuY291bnNlbG9yX3N0YXR1cywNCiAgICAgICAgICAgIGNvbGxlZ2VTdGF0dXM6IHRoaXMuZm9ybURhdGEuY29sbGVnZV9zdGF0dXMsDQogICAgICAgICAgICBzdHVkZW50U2lnbmF0dXJlOiB0aGlzLmZvcm1EYXRhLnN0dWRlbnRfc2lnbmF0dXJlIHx8IHRoaXMuZm9ybURhdGEuc3R1ZGVudFNpZ25hdHVyZSwNCiAgICAgICAgICAgIHBhcmVudFNpZ25hdHVyZTogdGhpcy5mb3JtRGF0YS5wYXJlbnRfc2lnbmF0dXJlIHx8IHRoaXMuZm9ybURhdGEucGFyZW50U2lnbmF0dXJlLA0KICAgICAgICAgICAgc3RhdHVzOiB0aGlzLmlzRWRpdCA/IHRoaXMuZm9ybURhdGEuc3RhdHVzIDogJ3N1Ym1pdHRlZCcsDQogICAgICAgICAgICBjcmVhdGVUaW1lOiBuZXcgRGF0ZSgpLA0KICAgICAgICAgICAgdXBkYXRlVGltZTogbmV3IERhdGUoKSwNCiAgICAgICAgICAgIGlkQ2FyZFBhdGg6IHRoaXMuZm9ybURhdGEuaWRfY2FyZF9wYXRoLA0KICAgICAgICAgICAgY29udHJhY3RQYXRoOiB0aGlzLmZvcm1EYXRhLmNvbnRyYWN0X3BhdGgsDQogICAgICAgICAgICBvdGhlckZpbGVQYXRoOiB0aGlzLmZvcm1EYXRhLm90aGVyX2ZpbGVfcGF0aA0KICAgICAgICAgIH07DQoNCiAgICAgICAgICAvLyDosIPor5Xkv6Hmga8NCiAgICAgICAgICBjb25zb2xlLmxvZygnUmVxdWVzdCBEYXRhOicsIHJlcXVlc3REYXRhKQ0KDQogICAgICAgICAgLy8g6LCD55SoQVBJDQogICAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7DQogICAgICAgICAgICBhd2FpdCB1cGRhdGVBcHBsaWNhdGlvbihyZXF1ZXN0RGF0YSkNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn55Sz6K+35bey5pu05pawJykNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVBcHBsaWNhdGlvbihyZXF1ZXN0RGF0YSkNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBUEkgUmVzcG9uc2U6JywgcmVzcG9uc2UpDQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+eUs+ivt+W3suWIm+W7uicpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8g6YeN572u54q25oCBDQogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlDQogICAgICAgICAgdGhpcy5yZXNldEZvcm0oKQ0KICAgICAgICAgIHRoaXMuJGVtaXQoJ3JlZnJlc2gtbGlzdCcpDQoNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTlpLHotKU6JywgZXJyb3IpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pON5L2c5aSx6LSl77yaJyArIChlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJykpDQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/manage/dayApplication","sourcesContent":["<template>\r\n  <div class=\"application-container\">\r\n    <!-- 全局操作按钮 -->\r\n    <el-button type=\"primary\" @click=\"dialogVisible = true\" class=\"action-btn\">\r\n      <i class=\"el-icon-plus\"></i> 新建申请\r\n    </el-button>\r\n\r\n    <!-- 主对话框 -->\r\n    <el-dialog title=\"大学生走读申请表\" :visible.sync=\"dialogVisible\" width=\"90%\" :before-close=\"handleClose\"\r\n      class=\"custom-dialog\">\r\n      <!-- 顶部信息栏 -->\r\n      <div class=\"header-bar\">\r\n        <span>申请编号：{{ formData.id }}</span>\r\n        <span>当前状态：{{ statusMap[formData.status] }}</span>\r\n        <el-radio-group v-model=\"formData.printType\" class=\"print-control\">\r\n          <el-radio :label=\"'preview'\">预览模式</el-radio>\r\n          <el-radio :label=\"'edit'\">编辑模式</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n\r\n      <!-- 主表单区域 -->\r\n      <el-form :model=\"formData\" :rules=\"rules\" ref=\"form\" label-width=\"150px\" class=\"main-form\">\r\n        <!-- 学生信息 -->\r\n        <el-card class=\"info-card\">\r\n          <div slot=\"header\" class=\"card-header\">\r\n            <i class=\"el-icon-user\"></i> 学生基本信息\r\n          </div>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"学号\" prop=\"student_no\">\r\n                <el-input v-model=\"formData.student_no\" :disabled=\"formData.status !== 'draft'\"\r\n                  @blur=\"validateStudentNo\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"姓名\" prop=\"studentName\">\r\n                <el-input v-model=\"formData.studentName\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"性别\" prop=\"gender\">\r\n                <el-select v-model=\"formData.gender\">\r\n                  <el-option label=\"男\" value=\"male\"></el-option>\r\n                  <el-option label=\"女\" value=\"female\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"所在院系\" prop=\"department\">\r\n            <el-input v-model=\"formData.department\"></el-input>\r\n          </el-form-item>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"所属班级\" prop=\"className\">\r\n              <el-input v-model=\"formData.className\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"电话\" prop=\"phone\">\r\n              <el-input v-model=\"formData.phone\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"家长姓名\" prop=\"parentName\">\r\n              <el-input v-model=\"formData.parentName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"家长电话\" prop=\"parentPhone\">\r\n              <el-input v-model=\"formData.parentPhone\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-card>\r\n\r\n        <!-- 走读信息 -->\r\n        <el-card class=\"info-card\">\r\n          <div slot=\"header\" class=\"card-header\">\r\n            <i class=\"el-icon-location\"></i> 走读信息登记\r\n          </div>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"校外居住地址\" prop=\"address\">\r\n                <el-input type=\"textarea\" v-model=\"formData.address\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"紧急联系人\" prop=\"emergencyContact\">\r\n                <el-input v-model=\"formData.emergency_contact\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"紧急联系人电话\" prop=\"emergencyPhone\">\r\n                <el-input v-model=\"formData.emergencyPhone\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"走读时段\" prop=\"timePeriod\">\r\n            <el-date-picker v-model=\"formData.time_period\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"></el-date-picker>\r\n          </el-form-item>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"走读原因\" prop=\"reason\">\r\n              <el-input type=\"textarea\" v-model=\"formData.reason\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-card>\r\n\r\n        <!-- 审批材料 -->\r\n        <!-- <el-card class=\"info-card\">\r\n          <div slot=\"header\" class=\"card-header\">\r\n            <i class=\"el-icon-document\"></i> 申请材料\r\n          </div>\r\n          <el-upload\r\n            action=\"#\"\r\n            list-type=\"picture-card\"\r\n            :file-list=\"formData.attachments\"\r\n            :on-preview=\"handlePreview\"\r\n            :on-remove=\"handleRemove\"\r\n            :before-upload=\"beforeUpload\"\r\n            :auto-upload=\"false\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n          <div slot=\"tip\" class=\"el-upload__tip\">支持上传：身份证、租房合同、房产证明</div>\r\n        </el-card> -->\r\n\r\n        <!-- 审批流程 -->\r\n        <el-card class=\"info-card\">\r\n          <div slot=\"header\" class=\"card-header\">\r\n            <i class=\"el-icon-s-custom\"></i> 审批流程\r\n          </div>\r\n\r\n          <el-form-item label=\"家长意见\" prop=\"parentOpinion\">\r\n            <el-input type=\"textarea\" v-model=\"formData.parentOpinion\" placeholder=\"请填写家长确认意见\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"家长同意\" prop=\"parentAgree\">\r\n            <el-select v-model=\"formData.parent_agree\">\r\n              <el-option label=\"已同意\" value=\"已同意\"></el-option>\r\n              <el-option label=\"已拒绝\" value=\"已拒绝\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"辅导员审核\" prop=\"counselorStatus\">\r\n            <el-select v-model=\"formData.counselorStatus\">\r\n              <el-option label=\"待审核\" value=\"pending\"></el-option>\r\n              <el-option label=\"同意\" value=\"approved\"></el-option>\r\n              <el-option label=\"不同意\" value=\"rejected\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n                    <el-form-item label=\"二级学院审核\" prop=\"college\">\r\n            <el-select v-model=\"formData.college\">\r\n              <el-option label=\"待审核\" value=\"pending\"></el-option>\r\n              <el-option label=\"同意\" value=\"approved\"></el-option>\r\n              <el-option label=\"不同意\" value=\"rejected\"></el-option>\r\n            </el-select>\r\n          </el-form-item> -->\r\n        </el-card>\r\n\r\n        <!-- 电子签名 -->\r\n        <el-card class=\"signature-card\">\r\n          <div slot=\"header\" class=\"card-header\">\r\n            <i class=\"el-icon-edit\"></i> 电子签名\r\n          </div>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生签字\" prop=\"studentSignature\">\r\n                <el-input type=\"text\" v-model=\"formData.studentSignature\" placeholder=\"请在此签名\"\r\n                  class=\"signature-input\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"家长签字\" prop=\"parentSignature\">\r\n                <el-input type=\"text\" v-model=\"formData.parentSignature\" placeholder=\"请在此签名\"\r\n                  class=\"signature-input\"></el-input>\r\n              </el-form-item>\r\n            </el-col></el-row>\r\n        </el-card>\r\n\r\n        <!-- 备注信息 -->\r\n        <el-alert title=\"注意事项\" type=\"warning\" show-icon :closable=\"false\" class=\"notice-alert\">\r\n          <template #content>\r\n            <ul class=\"notice-list\">\r\n              <li>• 申请有效期最长不超过一学年</li>\r\n              <li>• 需提供正规租房合同复印件</li>\r\n              <li>• 紧急联系人需填写有效联系方式</li>\r\n            </ul>\r\n          </template>\r\n        </el-alert>\r\n      </el-form>\r\n\r\n      <!-- 操作按钮 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"handleSubmit\" :loading=\"submitLoading\">\r\n          提交\r\n        </el-button>\r\n        <el-button @click=\"dialogVisible = false\">关闭</el-button>\r\n\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    createApplication,\r\n    updateApplication,\r\n    uploadFile\r\n  } from '@/api/leaveApplication'\r\n  import { list } from '@/api/student'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        isEdit: false,\r\n        dialogVisible: false,\r\n        submitLoading: false,\r\n        statusMap: {\r\n          draft: '草稿',\r\n          submitted: '已提交',\r\n          approved: '已批准',\r\n          rejected: '已拒绝'\r\n        },\r\n        formData: {\r\n          id: null,\r\n          student_no: '',\r\n          student_name: '',  // 统一使用蛇形命名\r\n          gender: 'male',\r\n          department: '',\r\n          class_name: '',    // 统一使用蛇形命名\r\n          phone: '',\r\n          parent_name: '',   // 统一使用蛇形命名\r\n          parent_phone: '',  // 统一使用蛇形命名\r\n          address: '',\r\n          emergency_contact: '',  // 统一使用蛇形命名\r\n          emergency_phone: '',    // 添加紧急联系人电话字段\r\n          time_period: [],        // 统一使用蛇形命名\r\n          attachments: [],\r\n          parent_opinion: '',  // 统一使用蛇形命名\r\n          parent_agree: '已同意',  // 新增家长同意选项，默认值为'已同意'\r\n          counselor_status: '待审核',\r\n          college_status: '待审核',\r\n          student_signature: '',  // 统一使用蛇形命名\r\n          parent_signature: '',    // 统一使用蛇形命名\r\n          status: 'draft',\r\n          reason: ''\r\n        },\r\n        rules: {\r\n          student_no: [\r\n            { required: true, message: '学号必填', trigger: 'blur' },\r\n            { pattern: /^\\d{11}$/, message: '学号必须为11位数字' }\r\n          ],\r\n          studentName: [\r\n            { required: true, message: '姓名必填', trigger: 'blur' },\r\n            { min: 2, max: 10, message: '姓名长度2-10字符' }\r\n          ],\r\n          phone: [\r\n            { required: true, message: '电话必填', trigger: 'blur' },\r\n            { pattern: /^1[3-9]\\d{9}$/, message: '请输入有效的手机号码' }\r\n          ],\r\n          parentPhone: [\r\n            { required: true, message: '家长电话必填', trigger: 'blur' },\r\n            { pattern: /^1[3-9]\\d{9}$/, message: '请输入有效的手机号码' }\r\n          ],\r\n          address: [\r\n            { required: true, message: '地址必填', trigger: 'blur' },\r\n            { min: 10, message: '地址需完整填写' }\r\n          ],\r\n          time_period: [\r\n            { validator: this.validateDateRange, trigger: 'change' }\r\n          ],\r\n          parent_opinion: [\r\n            { required: true, message: '家长意见必填', trigger: 'blur' }\r\n          ],\r\n          reason: [\r\n            { required: true, message: '走读原因必填', trigger: 'blur' }\r\n          ],\r\n          emergencyPhone: [\r\n            { required: true, message: '紧急联系人电话必填', trigger: 'blur' },\r\n            { pattern: /^1[3-9]\\d{9}$/, message: '请输入有效的手机号码' }\r\n          ],\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      // 驼峰命名转蛇形命名（双向绑定）\r\n      studentId: {\r\n        get() { return this.formData.student_no },\r\n        set(value) { this.formData.student_no = value }\r\n      },\r\n      studentName: {\r\n        get() { return this.formData.student_name },\r\n        set(value) { this.formData.student_name = value }\r\n      },\r\n      department: {\r\n        get() { return this.formData.department },\r\n        set(value) { this.formData.department = value }\r\n      },\r\n      parentContact: {\r\n        get() { return this.formData.emergency_contact },\r\n        set(value) { this.formData.emergency_contact = value }\r\n      },\r\n      className: {\r\n        get() { return this.formData.class_name },\r\n        set(value) { this.formData.class_name = value }\r\n      },\r\n      phone: {\r\n        get() { return this.formData.phone },\r\n        set(value) { this.formData.phone = value }\r\n      },\r\n      parentName: {\r\n        get() { return this.formData.parent_name },\r\n        set(value) { this.formData.parent_name = value }\r\n      },\r\n      parentPhone: {\r\n        get() { return this.formData.parent_phone },\r\n        set(value) { this.formData.parent_phone = value }\r\n      }\r\n    },\r\n    methods: {\r\n\r\n      handleClose(done) { // 接收 done 参数\r\n        if (this.formData.status === 'draft') {\r\n          // 草稿状态允许直接关闭\r\n          done();\r\n        } else {\r\n          // 其他状态需要确认关闭\r\n          this.$confirm('未提交的修改将丢失，确认关闭吗？', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            done(); // 用户确认关闭\r\n          }).catch(() => {\r\n            // 用户取消关闭，不执行 done()\r\n          });\r\n        }\r\n      },\r\n      // 日期范围验证\r\n      validateDateRange(rule, value, callback) {\r\n        if (!value || value.length !== 2) {\r\n          callback(new Error('请选择完整的时间段'))\r\n        } else if (value[0] > value[1]) {\r\n          callback(new Error('结束日期不能早于开始日期'))\r\n        } else {\r\n          callback()\r\n        }\r\n      },\r\n      async validateStudentNo() {\r\n        if (!this.formData.student_no || this.formData.student_no.trim() === '') {\r\n          return\r\n        }\r\n\r\n        try {\r\n          const response = await list({ entity: { number: this.formData.student_no } })\r\n          if (response.data.list.length === 0) {\r\n            this.$message.error('该学号不存在')\r\n            this.formData.student_no = ''  // 清空输入\r\n          } else {\r\n            const studentInfo = response.data.list[0]\r\n            // 自动填充学生信息\r\n            this.formData.studentName = studentInfo.name\r\n            this.formData.className = studentInfo.faculty.name\r\n            this.formData.phone = studentInfo.phone\r\n            this.$message.success('学号验证成功，已自动填充学生信息')\r\n          }\r\n        } catch (error) {\r\n          console.error('学号验证失败:', error)\r\n          this.$message.error('学号验证失败，请稍后重试')\r\n        }\r\n      },\r\n\r\n      // 附件处理\r\n      async handleAttachments() {\r\n        if (this.formData.attachments.length === 0) return []\r\n\r\n        try {\r\n          const uploadPromises = this.formData.attachments.map(async file => {\r\n            const formData = new FormData()\r\n            formData.append('file', file.raw)\r\n            formData.append('apply_id', this.formData.id)\r\n            return await uploadFile(formData)\r\n          })\r\n\r\n          return await Promise.all(uploadPromises)\r\n        } catch (error) {\r\n          this.$message.error('附件上传失败')\r\n          throw error\r\n        }\r\n      },\r\n\r\n      // 表单重置\r\n      resetForm() {\r\n        this.formData = {\r\n          id: null,\r\n          student_no: '',\r\n          student_name: '',\r\n          gender: 'male',\r\n          department: '',\r\n          address: '',\r\n          emergency_contact: '',\r\n          emergency_phone: '',  // 重置紧急联系人电话字段\r\n          time_period: [],\r\n          attachments: [],\r\n          parent_opinion: '',\r\n          parent_agree: '已同意',  // 重置家长同意选项\r\n          counselor_status: '待审核',\r\n          college_status: '待审核',\r\n          student_signature: '',\r\n          parent_signature: '',\r\n          status: 'draft',\r\n          reason: ''\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.form.clearValidate()\r\n        })\r\n      },\r\n\r\n      // 编辑模式\r\n      editApplication(row) {\r\n        this.isEdit = true\r\n        this.formData = { ...row }\r\n        this.dialogVisible = true\r\n      },\r\n\r\n      // 提交处理\r\n      async handleSubmit() {\r\n        try {\r\n          // 先进行表单验证\r\n          await this.$refs.form.validate()\r\n\r\n          // 检查student_no是否为空\r\n          if (!this.formData.student_no || this.formData.student_no.trim() === '') {\r\n            this.$message.error('学号不能为空')\r\n            return\r\n          }\r\n\r\n\r\n          // 处理附件上传\r\n          const attachments = await this.handleAttachments()\r\n\r\n          // 构造请求数据时，确保字段名一致\r\n          const requestData = {\r\n            applyId: this.formData.id,\r\n            studentNo: this.formData.student_no,\r\n            studentName: this.formData.student_name || this.formData.studentName,\r\n            gender: this.formData.gender,\r\n            department: this.formData.department,\r\n            className: this.formData.class_name || this.formData.className,\r\n            phone: this.formData.phone,\r\n            parentName: this.formData.parent_name || this.formData.parentName,\r\n            parentPhone: this.formData.parent_phone || this.formData.parentPhone,\r\n            address: this.formData.address,\r\n            startDate: this.formData.time_period[0] ? new Date(this.formData.time_period[0]).toISOString() : null,\r\n            endDate: this.formData.time_period[1] ? new Date(this.formData.time_period[1]).toISOString() : null,\r\n            reason: this.formData.reason.trim(),\r\n            emergencyContact: this.formData.emergency_contact || this.formData.emergencyContact,\r\n            emergencyPhone: this.formData.emergency_phone,  // 使用formData中的字段名\r\n            parentOpinion: this.formData.parent_opinion || this.formData.parentOpinion,\r\n            parentAgree: this.formData.parent_agree,  // 将家长同意选项加入请求数据\r\n            counselorStatus: this.formData.counselor_status,\r\n            collegeStatus: this.formData.college_status,\r\n            studentSignature: this.formData.student_signature || this.formData.studentSignature,\r\n            parentSignature: this.formData.parent_signature || this.formData.parentSignature,\r\n            status: this.isEdit ? this.formData.status : 'submitted',\r\n            createTime: new Date(),\r\n            updateTime: new Date(),\r\n            idCardPath: this.formData.id_card_path,\r\n            contractPath: this.formData.contract_path,\r\n            otherFilePath: this.formData.other_file_path\r\n          };\r\n\r\n          // 调试信息\r\n          console.log('Request Data:', requestData)\r\n\r\n          // 调用API\r\n          if (this.isEdit) {\r\n            await updateApplication(requestData)\r\n            this.$message.success('申请已更新')\r\n          } else {\r\n            const response = await createApplication(requestData)\r\n            console.log('API Response:', response)\r\n            this.$message.success('申请已创建')\r\n          }\r\n\r\n          // 重置状态\r\n          this.dialogVisible = false\r\n          this.isEdit = false\r\n          this.resetForm()\r\n          this.$emit('refresh-list')\r\n\r\n        } catch (error) {\r\n          console.error('提交失败:', error)\r\n          this.$message.error('操作失败：' + (error.response?.data?.message || '未知错误'))\r\n        } finally {\r\n          this.submitLoading = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .application-container {\r\n    padding: 20px;\r\n    background-color: #f5f7fa;\r\n    min-height: calc(100vh - 40px);\r\n  }\r\n\r\n  .signature-input {\r\n    width: 100%;\r\n    min-height: 40px;\r\n    border: 1px solid #dcdfe6;\r\n    border-radius: 4px;\r\n    padding: 8px;\r\n    transition: border-color 0.2s;\r\n  }\r\n\r\n  .signature-input:focus {\r\n    border-color: #409EFF;\r\n  }\r\n\r\n  .info-card {\r\n    margin-bottom: 25px;\r\n    border: none;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n    transition: box-shadow 0.3s;\r\n  }\r\n\r\n  .info-card:hover {\r\n    box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.15);\r\n  }\r\n</style>"]}]}