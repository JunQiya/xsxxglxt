{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\system\\user\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\system\\user\\index.vue","mtime":1698660728000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7ZGVsLCBsaXN0LCBxdWVyeSwgcmVzZXRQYXNzd29yZCwgc2F2ZU9yVXBkYXRlLCBsaXN0QWxsfSBmcm9tICJAL2FwaS9zeXN0ZW0vc3lzdGVtVXNlciI7CmltcG9ydCB7bGlzdEluU2VsZWN0fSBmcm9tICJAL2FwaS9zeXN0ZW0vc3lzdGVtUm9sZSI7CmltcG9ydCB7c2VuZFRvVXNlcn0gZnJvbSAiQC9hcGkvbm90aWNlIjsKaW1wb3J0IHtsaXN0IGFzIGxpc3RCdWlsZGluZywgbGlzdEFsbCBhcyBsaXN0QWxsQnVpbGRpbmd9IGZyb20gJ0AvYXBpL2J1aWxkaW5nJwppbXBvcnQgVHJlZVNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCcKaW1wb3J0ICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBjb21wb25lbnRzOiB7VHJlZVNlbGVjdH0sCiAgZGF0YSgpIHsKICAgIGxldCB2YWxpZGF0b3IxID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNhbGxiYWNrKCkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBsZXQgcmVnID0gL14xWzM0NTY3ODldXGR7OX0kLwogICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigpKQogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCkKICAgICAgfQogICAgfQogICAgbGV0IHZhbGlkYXRvcjIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgY2FsbGJhY2soKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGxldCByZWcgPSAvXlswLTlhLXpBLVpfLi1dK1tAXVswLTlhLXpBLVpfLi1dKyhbLl1bYS16QS1aXSspezEsMn0kLzsKICAgICAgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoKSkKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHBhZ2VJbmZvOiB7fSwKICAgICAgbXNnOiB7CiAgICAgICAgbXNnOiB1bmRlZmluZWQsCiAgICAgICAgdG86IHVuZGVmaW5lZAogICAgICB9LAogICAgICB1c2VyOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICB1c2VyUm9sZUlkOiBbXSwKICAgICAgICBlbWFpbDogdW5kZWZpbmVkLAogICAgICAgIGNlbGxwaG9uZTogdW5kZWZpbmVkLAogICAgICAgIHJlYWxOYW1lOiB1bmRlZmluZWQsCiAgICAgICAgbG9naW5OYW1lOiB1bmRlZmluZWQsCiAgICAgICAgbGVhZGVySWQ6IHVuZGVmaW5lZCwKICAgICAgICBidWlsZGluZ0lkOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgZW50aXR5OiB7fSwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHJvd3M6IDEwCiAgICAgIH0sCiAgICAgIHJvbGVMaXN0OiB1bmRlZmluZWQsCiAgICAgIHVzZXJMaXN0OiB1bmRlZmluZWQsCiAgICAgIGJ1aWxkaW5nTGlzdDogdW5kZWZpbmVkLAogICAgICByb2xlTGlzdExvYWRpbmc6IHRydWUsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dUaXRsZTogJ+a3u+WKoOeUqOaItycsCiAgICAgIG1zZ0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIGxvZ2luTmFtZTogWwogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn55m75b2V5ZCN5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInfSwKICAgICAgICAgIHttaW46IDUsIG1heDogMjAsIG1lc3NhZ2U6ICfplb/luqblnKggNSDliLAgMjAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgICAgcmVhbE5hbWU6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WQjeWtl+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJ30sCiAgICAgICAgICB7bWluOiAyLCBtYXg6IDIwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDIg5YiwIDIwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIGNlbGxwaG9uZTogWwogICAgICAgICAge3ZhbGlkYXRvcjogdmFsaWRhdG9yMSwgbWVzc2FnZTogIuivt+i+k+WFpeato+ehrueahOaJi+acuuWPtyIsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIGVtYWlsOiBbCiAgICAgICAgICB7dmFsaWRhdG9yOiB2YWxpZGF0b3IyLCBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE6YKu566xIiwgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2VuZE1zZygpIHsKICAgICAgc2VuZFRvVXNlcih0aGlzLm1zZykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+WPkemAgeaIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLm1zZ0Nsb3NlKCkKICAgICAgICB9CiAgICAgIH0pCgogICAgfSwKICAgIGNvbmZpcm1DbG9zZShkb25lKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWFs+mXre+8nycpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pOwogICAgfSwKICAgIG1zZ09wZW4oaWQpIHsKICAgICAgdGhpcy5tc2cudG8gPSBpZAogICAgICB0aGlzLm1zZ0RpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgbXNnQ2xvc2UoKSB7CiAgICAgIHRoaXMubXNnID0gIHsKICAgICAgICBtc2c6IHVuZGVmaW5lZCwKICAgICAgICAgICAgdG86IHVuZGVmaW5lZAogICAgICB9CiAgICAgIHRoaXMubXNnRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUuaWQsCiAgICAgICAgbGFiZWw6IG5vZGUubmFtZSwKICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbgogICAgICB9OwogICAgfSwKICAgIHJlc2V0UGFzc3dvcmQoaWQpIHsKICAgICAgcmVzZXRQYXNzd29yZChpZCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgc2F2ZU9yVXBkYXRlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgaWYgKHRoaXMudXNlci5idWlsZGluZ0lkID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nlrr/oiI3mpbwnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuJHJlZnNbJ3NhdmVPclVwZGF0ZUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHNhdmVPclVwZGF0ZSh0aGlzLnVzZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVDbG9zZSgpCiAgICAgICAgICAgICAgX3RoaXMubGlzdERhdGEoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBhc3luYyBzaG93RGlhbG9nKHJvdykgewogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIua3u+WKoOeUqOaItyIKICAgICAgY29uc3QgcmwgPSBhd2FpdCBsaXN0SW5TZWxlY3QoKQogICAgICB0aGlzLnJvbGVMaXN0ID0gcmwuZGF0YQogICAgICBjb25zdCB1bCA9IGF3YWl0IGxpc3RBbGwoKQogICAgICB0aGlzLnVzZXJMaXN0ID0gdWwuZGF0YQogICAgICBjb25zdCBibCA9IGF3YWl0IGxpc3RCdWlsZGluZygpCiAgICAgIHRoaXMuYnVpbGRpbmdMaXN0ID0gYmwuZGF0YQogICAgICBpZiAocm93KSB7CiAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLkv67mlLnnlKjmiLciCiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgcXVlcnkocm93KQogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgICAgICB0aGlzLnVzZXIgPSBkYXRhCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNsb3NlKCkgewogICAgICB0aGlzLnVzZXIgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICB1c2VyUm9sZUlkOiBbXSwKICAgICAgICBlbWFpbDogdW5kZWZpbmVkLAogICAgICAgIGNlbGxwaG9uZTogdW5kZWZpbmVkLAogICAgICAgIHJlYWxOYW1lOiB1bmRlZmluZWQsCiAgICAgICAgbG9naW5OYW1lOiB1bmRlZmluZWQKICAgICAgfQogICAgICB0aGlzLnJvbGVMaXN0ID0gW10KICAgICAgdGhpcy5idWlsZGluZ0xpc3QgPSBbXQogICAgICB0aGlzLnVzZXJMaXN0ID0gW10KICAgICAgdGhpcy4kcmVmc1snc2F2ZU9yVXBkYXRlRm9ybSddLnJlc2V0RmllbGRzKCkKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgIH0sCiAgICBkZWwoaWQpIHsKICAgICAgZGVsKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5saXN0RGF0YSgpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5lbnRpdHkgPSB7fQogICAgICB0aGlzLnNlbGVjdCgpCiAgICB9LAogICAgc2VsZWN0KCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMQogICAgICB0aGlzLmxpc3REYXRhKCkKICAgIH0sCiAgICByb2xlKHJvbGVzKSB7CiAgICAgIGxldCByZXMgPSAiIgogICAgICBmb3IgKGxldCBsIG9mIHJvbGVzKSB7CiAgICAgICAgcmVzICs9IGwubmFtZSArICIgIgogICAgICB9CiAgICAgIHJldHVybiByZXMKICAgIH0sCiAgICBhc3luYyBsaXN0RGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBsaXN0KHRoaXMubGlzdFF1ZXJ5KQogICAgICBmb3IgKGxldCB1IG9mIGRhdGEubGlzdCkgewogICAgICAgIGlmICh1Lmljb24pIHsKICAgICAgICAgIHUuaWNvbiA9IHByb2Nlc3MuZW52LlZVRV9BUFBfSU1HX1BSRUZJWCArIHUuaWNvbgogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnBhZ2VJbmZvID0gZGF0YQogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IHZhbAogICAgICB0aGlzLmxpc3REYXRhKCkKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5yb3dzID0gdmFsCiAgICAgIHRoaXMubGlzdERhdGEoKQogICAgfSwKICAgIGFzeW5jIGxpc3RSb2xlTGlzdCh2aXNpYmxlKSB7CiAgICAgIGlmICh2aXNpYmxlKSB7CiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgbGlzdEluU2VsZWN0KCk7CiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IGRhdGEKICAgICAgICB0aGlzLnJvbGVMaXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IFtdCiAgICAgICAgdGhpcy5yb2xlTGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsaXN0VXNlckxpc3QodmlzaWJsZSkgewogICAgICBpZiAodmlzaWJsZSkgewogICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGxpc3RBbGwoKTsKICAgICAgICB0aGlzLnVzZXJMaXN0ID0gZGF0YQogICAgICAgIHRoaXMucm9sZUxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvbGVMaXN0ID0gW10KICAgICAgICB0aGlzLnJvbGVMaXN0TG9hZGluZyA9IHRydWUKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGxpc3RCdWlsZGluZ0xpc3QodmlzaWJsZSkgewogICAgICBpZiAodmlzaWJsZSkgewogICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGxpc3RBbGxCdWlsZGluZygpOwogICAgICAgIHRoaXMuYnVpbGRpbmdMaXN0ID0gZGF0YQogICAgICAgIHRoaXMucm9sZUxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1aWxkaW5nTGlzdCA9IFtdCiAgICAgICAgdGhpcy5yb2xlTGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3REYXRhKCkKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA2LA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/user","sourcesContent":["<template>\n  <div class=\"router-container\">\n    <div class=\"container\">\n      <div class=\"inner_container\">\n        <div class=\"table\">\n          <el-form>\n            <el-form-item>\n              <el-button v-has-permi=\"['system:user:save']\" @click=\"showDialog(undefined)\" \n                style=\"font-size: 16px;\"  type=\"success\">\n                 新增\n              </el-button>\n            </el-form-item>\n          </el-form>\n          <el-form :inline=\"true\" ref=\"form\" :model=\"listQuery.entity\">\n            <el-form-item label=\"名称\">\n              <el-input clearable v-model=\"listQuery.entity.realName\" size=\"small\"\n                        placeholder=\"用户名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"角色\" v-has-permi=\"['system:role:list']\">\n              <el-select :loading=\"roleListLoading\" size=\"small\" clearable filterable multiple\n                         v-model=\"listQuery.entity.userRoleId\"\n                         placeholder=\"用户角色\" @visible-change=\"listRoleList\">\n                <el-option v-for=\"role in roleList\" :key=\"role.id\" :label=\"role.name\"\n                           :value=\"role.id\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"领导\">\n              <el-select :loading=\"roleListLoading\" filterable clearable v-model=\"listQuery.entity.leaderId\" size=\"small\"\n                        placeholder=\"领导\" @visible-change=\"listUserList\">\n                <el-option v-for=\"user in userList\"\n                           :key=\"user.id\" :value=\"user.id\"\n                           :label=\"user.realName\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"所管宿舍楼\">\n              <el-select :loading=\"roleListLoading\" filterable clearable v-model=\"listQuery.entity.buildingId\" size=\"small\"\n                         @visible-change=\"listBuildingList\"\n                        placeholder=\"所管宿舍楼\">\n                <el-option v-for=\"building in buildingList\"\n                           :key=\"building.id\" :value=\"building.id\"\n                           :label=\"building.name\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" style=\"font-size: 16px;\"  @click=\"select\"> 查询</el-button>\n              <el-button type=\"warning\" style=\"font-size: 16px;\"  @click=\"reset\"> 重置</el-button>\n            </el-form-item>\n          </el-form>\n          <el-table :data=\"pageInfo.list\" v-loading=\"loading\" height=\"400\">\n            <el-table-column label=\"头像\" width=\"100\">\n              <template slot-scope=\"scope\">\n                <el-avatar :src=\"scope.row.icon\" size=\"medium\" v-if=\"scope.row.icon\"></el-avatar>\n                <el-avatar v-else size=\"medium\">{{ scope.row.realName }}</el-avatar>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"在线\" width=\"70\">\n              <template slot-scope=\"scope\">\n                <span style=\"color: #67C23A\" v-if=\"scope.row.isOnLine\">在线</span>\n                <span style=\"color: #909399\" v-else>离线</span>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"realName\" label=\"名称\" width=\"150\"></el-table-column>\n            <el-table-column prop=\"leader.realName\" label=\"领导\" width=\"100\"></el-table-column>\n            <el-table-column prop=\"building.name\" label=\"所管宿舍楼\" width=\"150\"></el-table-column>\n            <el-table-column prop=\"cellphone\" label=\"电话\" width=\"130\"></el-table-column>\n            <el-table-column label=\"角色\" width=\"170\">\n              <template slot-scope=\"scope\">{{ role(scope.row.userRole) }}</template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"540\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button v-has-permi=\"['system:user:query']\"\n                     style=\"font-size: 14px;\"  type=\"primary\" @click=\"showDialog(scope.row.id)\"> 详情\n                </el-button>\n                <template>\n                  <el-popconfirm title=\"确定重置吗？\" @confirm=\"resetPassword(scope.row.id)\">\n                    <el-button style=\"margin-left: 8px;font-size: 14px;\"\n                               slot=\"reference\"\n                               v-has-permi=\"['system:user:update']\"\n                           type=\"warning\"> 重置密码\n                    </el-button>\n                  </el-popconfirm>\n                </template>\n                <template>\n                  <el-popconfirm title=\"确定删除吗？\" @confirm=\"del(scope.row.id)\">\n                    <el-button style=\"margin:0 8px;font-size: 14px;\" v-has-permi=\"['system:user:delete']\"\n                               slot=\"reference\"  type=\"danger\"> 删除\n                    </el-button>\n                  </el-popconfirm>\n                </template>\n                <el-button v-has-permi=\"['home:send:msg']\"\n                    style=\"font-size: 14px;\" type=\"success\" @click=\"msgOpen(scope.row.id)\"> 发送消息\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"page\">\n          <el-pagination\n              background\n              :hide-on-single-page=\"true\"\n              :page-size=\"listQuery.rows\"\n              :page-count=\"pageInfo.pages\"\n              layout=\"->, prev, pager, next, jumper, total, sizes\"\n              :total=\"pageInfo.total\"\n              :current-page.sync=\"pageInfo.pageNum\"\n              @current-change=\"handleCurrentChange\"\n              @size-change=\"handleSizeChange\"\n          >\n          </el-pagination>\n        </div>\n        <div class=\"dialog\">\n          <el-dialog title=\"发送消息\"\n                     @closed=\"handleClose\"\n                     :visible.sync=\"msgDialogVisible\" :before-close=\"confirmClose\"\n                     width=\"45%\"\n          >\n            <el-form ref=\"msgFrom\" :model=\"msg\">\n              <el-form-item>\n                <el-input\n                    type=\"textarea\"\n                    rows=\"10\"\n                    placeholder=\"请输入内容\"\n                    v-model=\"msg.msg\">\n                </el-input>\n              </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button type=\"danger\" @click=\"msgClose\"> 取 消</el-button>\n              <el-button type=\"primary\" @click=\"sendMsg\">发 送</el-button>\n            </span>\n          </el-dialog>\n          <el-dialog\n              :title=\"dialogTitle\"\n              :visible.sync=\"dialogVisible\"\n              width=\"45%\"\n              @closed=\"handleClose\"\n          >\n            <el-form ref=\"saveOrUpdateForm\" :rules=\"rules\" :model=\"user\" label-width=\"80px\">\n              <el-form-item label=\"登录名称\" prop=\"loginName\">\n                <el-input v-model=\"user.loginName\" placeholder=\"输入登录名\" :readonly=\"user.id !== undefined\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"名字\" prop=\"realName\">\n                <el-input v-model=\"user.realName\" placeholder=\"输入名字\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"电话\" prop=\"cellphone\">\n                <el-input v-model=\"user.cellphone\" placeholder=\"输入电话\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"邮箱\" prop=\"email\">\n                <el-input v-model=\"user.email\" placeholder=\"输入邮箱\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"角色\">\n                <el-select style=\"width: 100%\" clearable multiple v-model=\"user.userRoleId\"\n                           placeholder=\"选择角色\">\n                  <el-option v-for=\"role in roleList\" :key=\"role.id\" :label=\"role.name\"\n                             :value=\"role.id\"></el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"领导\">\n                <el-select style=\"width: 100%\" clearable filterable v-model=\"user.leaderId\"\n                           placeholder=\"领导\">\n                  <el-option v-for=\"user in userList\" :key=\"user.id\" :label=\"user.realName\"\n                             :value=\"user.id\"></el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"宿舍楼\" prop=\"buildingId\">\n                <tree-select\n                    v-model=\"user.buildingId\"\n                    :options=\"buildingList\"\n                    :normalizer=\"normalizer\"\n                    :show-count=\"true\"\n                    placeholder=\"选择宿舍楼\">\n                </tree-select>\n              </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button type=\"danger\" @click=\"handleClose\"> 取 消</el-button>\n              <el-button type=\"primary\" @click=\"saveOrUpdate\"\n                         v-has-permi=\"['system:user:update','system:user:save']\"> 保 存</el-button>\n            </span>\n          </el-dialog>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {del, list, query, resetPassword, saveOrUpdate, listAll} from \"@/api/system/systemUser\";\nimport {listInSelect} from \"@/api/system/systemRole\";\nimport {sendToUser} from \"@/api/notice\";\nimport {list as listBuilding, listAll as listAllBuilding} from '@/api/building'\nimport TreeSelect from '@riophae/vue-treeselect'\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"index\",\n  components: {TreeSelect},\n  data() {\n    let validator1 = (rule, value, callback) => {\n      if (!value || value.length === 0) {\n        callback()\n        return\n      }\n      let reg = /^1[3456789]\\d{9}$/\n      if (!reg.test(value)) {\n        callback(new Error())\n      } else {\n        callback()\n      }\n    }\n    let validator2 = (rule, value, callback) => {\n      if (!value || value.length === 0) {\n        callback()\n        return\n      }\n      let reg = /^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;\n      if (!reg.test(value)) {\n        callback(new Error())\n      } else {\n        callback()\n      }\n    }\n    return {\n      loading: true,\n      pageInfo: {},\n      msg: {\n        msg: undefined,\n        to: undefined\n      },\n      user: {\n        id: undefined,\n        userRoleId: [],\n        email: undefined,\n        cellphone: undefined,\n        realName: undefined,\n        loginName: undefined,\n        leaderId: undefined,\n        buildingId: undefined\n      },\n      listQuery: {\n        entity: {},\n        page: 1,\n        rows: 10\n      },\n      roleList: undefined,\n      userList: undefined,\n      buildingList: undefined,\n      roleListLoading: true,\n      dialogVisible: false,\n      dialogTitle: '添加用户',\n      msgDialogVisible: false,\n      rules: {\n        loginName: [\n          {required: true, message: '登录名不能为空', trigger: 'blur'},\n          {min: 5, max: 20, message: '长度在 5 到 20 个字符', trigger: 'blur'}\n        ],\n        realName: [\n          {required: true, message: '名字不能为空', trigger: 'blur'},\n          {min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur'}\n        ],\n        cellphone: [\n          {validator: validator1, message: \"请输入正确的手机号\", trigger: 'blur'}\n        ],\n        email: [\n          {validator: validator2, message: \"请输入正确的邮箱\", trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  methods: {\n    sendMsg() {\n      sendToUser(this.msg).then(res => {\n        if (res.statusCode === 200) {\n          this.$message({\n            message: '发送成功',\n            type: 'success'\n          });\n          this.msgClose()\n        }\n      })\n\n    },\n    confirmClose(done) {\n      this.$confirm('确认关闭？')\n          .then(() => {\n            done();\n          })\n          .catch(() => {});\n    },\n    msgOpen(id) {\n      this.msg.to = id\n      this.msgDialogVisible = true\n    },\n    msgClose() {\n      this.msg =  {\n        msg: undefined,\n            to: undefined\n      }\n      this.msgDialogVisible = false\n    },\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.id,\n        label: node.name,\n        children: node.children\n      };\n    },\n    resetPassword(id) {\n      resetPassword(id).then(res => {\n        if (res.statusCode === 200) {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n        }\n      })\n    },\n    async saveOrUpdate() {\n      const _this = this\n      if (this.user.buildingId === undefined) {\n        this.$message({\n          message: '请选择宿舍楼',\n          type: 'error'\n        });\n        return\n      }\n      this.$refs['saveOrUpdateForm'].validate((valid) => {\n        if (valid) {\n          saveOrUpdate(this.user).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              _this.handleClose()\n              _this.listData()\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n    },\n    async showDialog(row) {\n      this.dialogTitle = \"添加用户\"\n      const rl = await listInSelect()\n      this.roleList = rl.data\n      const ul = await listAll()\n      this.userList = ul.data\n      const bl = await listBuilding()\n      this.buildingList = bl.data\n      if (row) {\n        this.dialogTitle = \"修改用户\"\n        const {data} = await query(row)\n        if (data) {\n          this.dialogVisible = true\n          this.user = data\n        }\n      } else {\n        this.dialogVisible = true\n      }\n    },\n    handleClose() {\n      this.user = {\n        id: undefined,\n        userRoleId: [],\n        email: undefined,\n        cellphone: undefined,\n        realName: undefined,\n        loginName: undefined\n      }\n      this.roleList = []\n      this.buildingList = []\n      this.userList = []\n      this.$refs['saveOrUpdateForm'].resetFields()\n      this.dialogVisible = false\n    },\n    del(id) {\n      del(id).then(res => {\n        if (res.statusCode === 200) {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n          this.listData()\n        }\n      })\n    },\n    reset() {\n      this.listQuery.entity = {}\n      this.select()\n    },\n    select() {\n      this.listQuery.page = 1\n      this.listData()\n    },\n    role(roles) {\n      let res = \"\"\n      for (let l of roles) {\n        res += l.name + \" \"\n      }\n      return res\n    },\n    async listData() {\n      this.loading = true\n      const {data} = await list(this.listQuery)\n      for (let u of data.list) {\n        if (u.icon) {\n          u.icon = process.env.VUE_APP_IMG_PREFIX + u.icon\n        }\n      }\n      this.pageInfo = data\n      window.scrollTo(0, 0);\n      this.loading = false\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.listData()\n    },\n    handleSizeChange(val) {\n      this.listQuery.rows = val\n      this.listData()\n    },\n    async listRoleList(visible) {\n      if (visible) {\n        const {data} = await listInSelect();\n        this.roleList = data\n        this.roleListLoading = false\n      } else {\n        this.roleList = []\n        this.roleListLoading = true\n      }\n    },\n    async listUserList(visible) {\n      if (visible) {\n        const {data} = await listAll();\n        this.userList = data\n        this.roleListLoading = false\n      } else {\n        this.roleList = []\n        this.roleListLoading = true\n      }\n    },\n    async listBuildingList(visible) {\n      if (visible) {\n        const {data} = await listAllBuilding();\n        this.buildingList = data\n        this.roleListLoading = false\n      } else {\n        this.buildingList = []\n        this.roleListLoading = true\n      }\n    }\n  },\n  created() {\n    this.listData()\n  }\n}\n</script>\n\n<style scoped>\n.table {\n  padding: 10px;\n}\n\n.router-container {\n  height: 100%;\n}\n</style>\n"]}]}