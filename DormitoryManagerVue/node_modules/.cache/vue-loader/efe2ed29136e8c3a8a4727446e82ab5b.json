{"remainingRequest":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\src\\views\\manage\\check\\index copy.vue?vue&type=style&index=0&id=1973f4ac&scoped=true&lang=css","dependencies":[{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\src\\views\\manage\\check\\index copy.vue","mtime":1743647230063},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1762330399953},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1762330418934},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1762330405156},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762330398085},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1762330415853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50YWJsZSB7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBmbGV4OiAxLjU7Cn0KCi5yb3V0ZXItY29udGFpbmVyIHsKICAgIGhlaWdodDogMTAwJTsKfQoKLmlubmVyX2NvbnRhaW5lciB7CiAgICBkaXNwbGF5OiBmbGV4Owp9Cgoucm9vbV9zZWxlY3RvciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgbWFyZ2luLWJvdHRvbTogNXZoOwp9Cgouc2VsZWN0X2l0ZW0gewogICAgbWFyZ2luLXJpZ2h0OiAyLjV2dzsKICAgIG1hcmdpbi1ib3R0b206IDIuNXZoOwp9CgoucmF0ZS1pdGVtIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBtYXJnaW4tYm90dG9tOiA1dmg7CiAgICBtYXJnaW4tbGVmdDogMXZ3OwogICAgZm9udC1zaXplOiAyMHB4OwogICAgY29sb3I6IHJnYigxNDgsIDE0OCwgMTQ4KTsKfQoKLmltZ19ib3ggewogICAgZmxleDogMjsKICAgIGhlaWdodDogNzB2aDsKICAgIG1pbi13aWR0aDogMzAwcHg7Cn0KCi5pbWdfYm94IGgxIHsKICAgIG1hcmdpbi1ib3R0b206IDJ2aDsKfQoKLmltZ19ib3ggaW1nIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiA4MCU7CiAgICBvYmplY3QtZml0OiBjb250YWluOwp9Cgo6OnYtZGVlcCAuZWwtcmF0ZV9faWNvbiB7CiAgICBmb250LXNpemU6IDJyZW0gIWltcG9ydGFudDsKICAgIC8qIOiwg+aVtOaYn+aYn+Wkp+WwjyAqLwogICAgbWFyZ2luLXJpZ2h0OiA1cHg7CiAgICAvKiDosIPmlbTmmJ/mmJ/pl7Tot50gKi8KfQo="},{"version":3,"sources":["index copy.vue"],"names":[],"mappings":";AAwNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index copy.vue","sourceRoot":"src/views/manage/check","sourcesContent":["<template>\r\n    <div class=\"router-container\">\r\n        <div class=\"container\">\r\n            <div class=\"inner_container\" v-loading=\"loading\">\r\n                <div class=\"table\">\r\n                    <div class=\"room_selector\">\r\n                        <div class=\"select_item\">\r\n                            <span>选择楼栋：</span>\r\n                            <el-cascader :options=\"bdOptions\" v-model=\"selectedtNode\" @change=\"bdChange\"></el-cascader>\r\n                        </div>\r\n                        <div class=\"select_item\">\r\n                            <span>选择宿舍：</span>\r\n                            <el-select v-model=\"roomValue\" clearable @change=\"handleChange\">\r\n                                <el-option v-for=\"item in roomOptions\" :key=\"item.value\" :label=\"item.label\"\r\n                                    :value=\"item.value\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"table_rate\">\r\n                    <!-- 上方两行 -->\r\n                    <div class=\"rate-item\">\r\n                        <span>整体环境评分：</span>\r\n                        <el-rate v-model=\"score.global_score\" :max=\"10\" disabled show-score text-color=\"#ff9900\"\r\n                            :allow-half=\"true\" score-template=\"{value}分\" />\r\n                    </div>\r\n                    <div class=\"rate-item\">\r\n                        <span>建筑设施评分：</span>\r\n                        <el-rate v-model=\"score.building_score\" :max=\"10\" disabled show-score text-color=\"#ff9900\"\r\n                            :allow-half=\"true\" score-template=\"{value}分\" />\r\n                    </div>\r\n                    <!-- 下方两行 -->\r\n                    <div class=\"rate-item\">\r\n                        <span>床铺卧具评分：</span>\r\n                        <el-rate v-model=\"score.bed_score\" :max=\"10\" disabled show-score text-color=\"#ff9900\"\r\n                            :allow-half=\"true\" score-template=\"{value}分\" />\r\n                    </div>\r\n                    <div class=\"rate-item\">\r\n                        <span>室内用品评分：</span>\r\n                        <el-rate v-model=\"score.indoor_score\" :max=\"10\" disabled show-score text-color=\"#ff9900\"\r\n                            :allow-half=\"true\" score-template=\"{value}分\" />\r\n                    </div>\r\n                    <div class=\"rate-item\">\r\n                        <span>综合宿舍评分：</span>\r\n                        <el-rate v-model=\"score.ce_score\" :max=\"10\" disabled show-score text-color=\"#ff9900\"\r\n                            :allow-half=\"true\" score-template=\"{value}分\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"img_box\">\r\n                    <h1>宿舍照片</h1>\r\n                    <img :src=\"imgName\" alt=\"暂未照片\">\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { list } from \"@/api/building\";\r\n    import { listByBId, saveOrUpdate, scoreByRid } from \"@/api/score\"\r\n\r\n    export default {\r\n        name: \"index\",\r\n        data() {\r\n            return {\r\n                loading: undefined,\r\n                // 宿舍列表\r\n                roomOptions: [],\r\n                roomValue: '',\r\n                // 三级菜单列表\r\n                selectedtNode: [],\r\n                bdOptions: [],\r\n                score: { global_score: 0, building_score: 0, bed_score: 0, indoor_score: 0, ce_score: 0 },\r\n                imgName: ''\r\n            }\r\n        },\r\n        methods: {\r\n            async handleChange(value) {\r\n                this.loading = true; // 开启加载状态\r\n                try {\r\n                    const response = await scoreByRid(value)// 异步获取数据\r\n\r\n                    if (response.statusCode !== 200) {\r\n                        throw new Error('请求失败,code:${response.statusCode}')\r\n                    }\r\n\r\n                    const { data } = response\r\n                    // 解构赋值\r\n                    const {\r\n                        id,\r\n                        room_id,\r\n                        global_score,\r\n                        building_score,\r\n                        bed_score,\r\n                        indoor_score,\r\n                        ce_score,\r\n                        img_name\r\n                    } = data[0];\r\n\r\n                    // 其他字段赋值\r\n                    this.score.global_score = global_score;\r\n                    this.score.building_score = building_score;\r\n                    this.score.bed_score = bed_score;\r\n                    this.score.indoor_score = indoor_score;\r\n                    this.score.ce_score = ce_score;\r\n                    this.imgName = process.env.VUE_APP_IMG_PREFIX + img_name;\r\n                } catch (error) {\r\n                    console.error('分数获取失败:', error); // 错误处理\r\n                    this.score = {\r\n                        global_score: 0,\r\n                        building_score: 0,\r\n                        bed_score: 0,\r\n                        indoor_score: 0,\r\n                    }\r\n                    this.imgName = ''\r\n                } finally {\r\n                    this.loading = false; // 无论成功与否都关闭加载状态\r\n                }\r\n            }\r\n            ,\r\n            async bdChange(value) {\r\n                this.loading = true\r\n                const { data } = await listByBId(value[value.length - 1])\r\n                this.roomOptions = this.formatData(data)\r\n                console.log(this.roomOptions)\r\n                this.loading = false\r\n            },\r\n            // 格式化数据\r\n            formatData(list) {\r\n                return list.map(item => {\r\n                    const node = {\r\n                        value: item.id,\r\n                        label: item.number || item.name\r\n                    };\r\n                    // 仅当存在子节点且为数组时，递归格式化子节点\r\n                    if (Array.isArray(item.children) && item.children.length > 0) {\r\n                        node.children = this.formatData(item.children);\r\n                    }\r\n\r\n                    return node;\r\n                });\r\n            },\r\n            async listData() {\r\n                this.loading = true\r\n                const { data } = await list()\r\n                console.log(this.formatData(data))\r\n                this.bdOptions = this.formatData(data)\r\n                this.loading = false\r\n            },\r\n        },\r\n        created() {\r\n            this.listData()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .table {\r\n        padding: 10px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        flex: 1.5;\r\n    }\r\n\r\n    .router-container {\r\n        height: 100%;\r\n    }\r\n\r\n    .inner_container {\r\n        display: flex;\r\n    }\r\n\r\n    .room_selector {\r\n        display: flex;\r\n        margin-bottom: 5vh;\r\n    }\r\n\r\n    .select_item {\r\n        margin-right: 2.5vw;\r\n        margin-bottom: 2.5vh;\r\n    }\r\n\r\n    .rate-item {\r\n        display: flex;\r\n        margin-bottom: 5vh;\r\n        margin-left: 1vw;\r\n        font-size: 20px;\r\n        color: rgb(148, 148, 148);\r\n    }\r\n\r\n    .img_box {\r\n        flex: 2;\r\n        height: 70vh;\r\n        min-width: 300px;\r\n    }\r\n\r\n    .img_box h1 {\r\n        margin-bottom: 2vh;\r\n    }\r\n\r\n    .img_box img {\r\n        width: 100%;\r\n        height: 80%;\r\n        object-fit: contain;\r\n    }\r\n\r\n    ::v-deep .el-rate__icon {\r\n        font-size: 2rem !important;\r\n        /* 调整星星大小 */\r\n        margin-right: 5px;\r\n        /* 调整星星间距 */\r\n    }\r\n</style>"]}]}