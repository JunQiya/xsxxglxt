{"remainingRequest":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\src\\views\\other-page\\screen-01\\index.vue?vue&type=style&index=0&id=4a620188&scoped=true&lang=css","dependencies":[{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\src\\views\\other-page\\screen-01\\index.vue","mtime":1745737988423},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1762330399953},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1762330418934},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1762330405156},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762330398085},{"path":"G:\\2025072398-学生系统管理平台参赛总文件夹\\2025072398-02 素材与源码\\学生系统管理平台\\DormitoryManagerVue\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1762330415853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5mdWxsc2NyZWVuLWNvbnRhaW5lciB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDB2dzsKICBoZWlnaHQ6IDEwMHZoOwogIGNvbG9yOiAjZmZmOwogIHotaW5kZXg6IDEwMDsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KCi5kYXNoYm9hcmQtY29udGFpbmVyIHsKICB3aWR0aDogMTAwdnc7CiAgaGVpZ2h0OiAxMDB2aDsKICBiYWNrZ3JvdW5kOiAjMDAxNTI5OwogIGNvbG9yOiAjZmZmOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi9hc3NldHMvYmcuanBnJyk7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKfQoKLm1haW4tY29udGVudCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyZnIgMWZyOwogIGdhcDogMnZtaW47CiAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTAwcHgpOwogIG1hcmdpbi10b3A6IDUwcHg7CiAgcGFkZGluZzogMCAyMHB4Owp9CgoubGVmdC1zZWN0aW9uLAoucmlnaHQtc2VjdGlvbiB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciAxZnI7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDJ2bWluOwp9CgouY2VudGVyLXNlY3Rpb24gewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgMWZyOwogIGdhcDogMnZtaW47CiAgcGFkZGluZzogMCAydm1pbjsKfQoKLmR2LWJvcmRlci1ib3gtOCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9Cgouc2xpZGVyIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAwOwogIHBhZGRpbmctYm90dG9tOiA1Ni4yNSU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB6LWluZGV4OiAxOwoKfQoKLnNsaWRlciBpbWcgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CiAgb2JqZWN0LWZpdDogY292ZXI7CiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsKfQoKI3N0YWNrZWRMaW5lIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KCi5kaWdpdGFsLWdyaWQgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgbWlubWF4KDAsIDFmcikpOwogIGdhcDogMnZoOwogIC8qIOaUueeUqOinhuWPo+WNleS9jSAqLwogIGhlaWdodDogMTAwJTsKICAvKiDmlrDlop4gKi8KICBwYWRkaW5nOiAxLjUlOwogIC8qIOebuOWvueWNleS9jeabv+S7o+WbuuWumuWDj+e0oCAqLwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgLyog56Gu5L+dcGFkZGluZ+S4jea6ouWHuiAqLwp9CgouZGlnaXRhbC1pdGVtIHsKICBiYWNrZ3JvdW5kOiByZ2JhKDE2LCAzNSwgNzgsIDAuNik7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIHBhZGRpbmc6IDUwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgbWluLWhlaWdodDogMTIwcHg7CiAgLyog6K6+572u5pyA5bCP6auY5bqmICovCiAgcGFkZGluZzogNSUgOCU7CiAgLyog55m+5YiG5q+U5pu/5Luj5Zu65a6a5YOP57SgICovCiAgZGlzcGxheTogZmxleDsKICAvKiDlkK/nlKjlvLnmgKfluIPlsYAgKi8KICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIC8qIOaUuei/m+eCuTPvvJrliqjmgIHlsLrlr7jnuqbmnZ8gKi8KICBoZWlnaHQ6IGNhbGMoKDEwMCUgLSAydmgpLzIpOwogIC8qIOiuoeeul+mrmOW6piAqLwp9CgouZGlnaXRhbC1sYWJlbCB7CiAgZm9udC1zaXplOiBjbGFtcCgxMnB4LCAxLjJ2dywgMTZweCk7CiAgLyog5re75Yqg5a2X5L2T5ZON5bqU5byPICovCiAgY29sb3I6ICM4OWY3ZmU7CiAgbWFyZ2luLWJvdHRvbTogOHB4Owp9CgouZGlnaXRhbC12YWx1ZSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGZvbnQtc2l6ZTogY2xhbXAoMjRweCwgM3Z3LCAzNnB4KTsKICBmb250LWZhbWlseTogJ0RTLURpZ2l0YWwnLCBtb25vc3BhY2U7Cn0KCi52YWx1ZS1mcm9udCB7CiAgY29sb3I6ICM0YWY3ZmY7CiAgdGV4dC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoNzQsIDI0NywgMjU1LCAwLjUpOwp9CgoudmFsdWUtYmcgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBjb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOwogIHotaW5kZXg6IDA7Cn0KCi8qIOaVsOaNrua1geWKqOaViOaenCAqLwouZGlnaXRhbC1pdGVtOjphZnRlciB7CiAgY29udGVudDogJyc7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAtMTAwJTsKICB3aWR0aDogNTAlOwogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsCiAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMCkgMCUsCiAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKSA1MCUsCiAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMCkgMTAwJSk7CiAgdHJhbnNmb3JtOiBza2V3WCgtNDVkZWcpOwogIGFuaW1hdGlvbjogZmxvdyAzcyBpbmZpbml0ZTsKfQoKQGtleWZyYW1lcyBmbG93IHsKICAwJSB7CiAgICBsZWZ0OiAtMTAwJTsKICB9CgogIDEwMCUgewogICAgbGVmdDogMjAwJTsKICB9Cn0KCi5mbG9hdC1idXR0b24gewogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiA5OTk5OTsKICBib3R0b206IDMwcHg7CiAgcmlnaHQ6IDMwcHg7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAxMjMsIDI1NSwgMC45KTsKICBib3JkZXItcmFkaXVzOiAyNHB4OwogIHBhZGRpbmc6IDEycHggMjRweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouZmxvYXQtYnV0dG9uOmhvdmVyIHsKICBiYWNrZ3JvdW5kOiAjMDA3YmZmOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsKICBib3gtc2hhZG93OiAwIDZweCAxNnB4IHJnYmEoMCwgMTIzLCAyNTUsIDAuMyk7Cn0KCi5idXR0b24tY29udGVudCB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGNvbG9yOiB3aGl0ZTsKICBmb250LXNpemU6IDE2cHg7Cn0KCi5lbC1pY29uLWJhY2sgewogIGZvbnQtc2l6ZTogMjBweDsKICBtYXJnaW4tcmlnaHQ6IDhweDsKfQoKLmJvcmRlci1ib3gtY29udGVudCBoMiB7CiAgcG9zaXRpb246IGFic29sdXRlOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAmnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/other-page/screen-01","sourcesContent":["<template>\r\n  <div class=\"fullscreen-container\">\r\n    <dv-border-box-11 title=\"云南旅游职业学院\" class=\"dashboard-container\">\r\n\r\n      <!-- 主体内容 -->\r\n      <div class=\"main-content\">\r\n        <!-- 左侧区域 -->\r\n        <div class=\"left-section\">\r\n          <dv-border-box-8 style=\"height: 100%;\">\r\n            <dv-scroll-board :key=\"scrollBoardKey\" :config=\"scrollBoardConfig\"\r\n              style=\"width:calc(100% - 20px);height:calc(80% - 20px);margin:10px\">\r\n              <div v-if=\"scrollBoardConfig.data.length === 0\" class=\"empty-tip\">\r\n                {{ loading ? '数据加载中...' : '暂无请假记录' }}\r\n              </div>\r\n            </dv-scroll-board>\r\n            <dv-percent-pond :config=\"precentPondConfig\"\r\n              style=\"width:calc(100% - 20px);height:calc(20% - 10px);margin:10px\" />\r\n          </dv-border-box-8>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <dv-capsule-chart ::key=\"capsuleRefreshKey\" :config=\"cCapsuleChartConfig\" style=\"width:100%;height:100%\" />\r\n          </dv-border-box-8>\r\n        </div>\r\n\r\n        <!-- 中间区域 -->\r\n        <div class=\"center-section\">\r\n          <div class=\"slider\">\r\n            <img :src=\"images[currentIndex]\" :style=\"{ transform: `translateZ(0)` }\" @load=\"handleImageLoad\" />\r\n          </div>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <div id=\"stackedLine\"></div>\r\n          </dv-border-box-8>\r\n        </div>\r\n\r\n        <!-- 右侧区域 -->\r\n        <div class=\"right-section\">\r\n          <dv-border-box-8 style=\"height: 100%;\">\r\n            <h2>本月卫生评分</h2>\r\n            <dv-active-ring-chart ::key=\"ringRefreshKey\" :config=\"ringChartConfig\" style=\"width:100%;height:100%\" />\r\n          </dv-border-box-8>\r\n          <dv-border-box-8 style=\"height: 75%;\">\r\n            <div class=\"digital-grid\">\r\n              <div v-for=\"(item, index) in totalStats\" :key=\"index\" class=\"digital-item\">\r\n                <div class=\"digital-label\">{{ item.label }}</div>\r\n                <div class=\"digital-value\">\r\n                  <span class=\"value-bg\">{{ item.value }}</span>\r\n                  <animated-number :value=\"item.value\" :duration=\"1000\" easing=\"easeOutCubic\" class=\"value-front\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </dv-border-box-8>\r\n        </div>\r\n      </div>\r\n\r\n    </dv-border-box-11>\r\n    <div class=\"float-button\" @click=\"handleBack\">\r\n      <div class=\"button-content\">\r\n        <i class=\"el-icon-back\">\r\n        </i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Vue from 'vue'\r\n  import dataV from '@jiaminghi/data-view'\r\n  import * as echarts from 'echarts'\r\n  import dayjs from 'dayjs'\r\n  import AnimatedNumber from 'vue-animated-number';\r\n  import { list as leaveList } from \"@/api/leave\"\r\n  import { list as stuList } from \"@/api/student\"\r\n  import { getAllStudentNum } from \"@/api/building\"\r\n  import { stats, getScoreTrend } from \"@/api/score\"\r\n  import { totalStats } from \"@/api/stats\"\r\n\r\n  Vue.component('animated-number', AnimatedNumber);\r\n  Vue.use(dataV)\r\n\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        ringRefreshKey: 0,\r\n        capsuleRefreshKey: 0,\r\n        scrollBoardKey: 0,\r\n        loading: false,\r\n        listQuery: {\r\n          page: 1,\r\n          rows: 99999,\r\n          entity: {},\r\n        },\r\n        imgRatio: 0.5625,\r\n        isHovering: false,\r\n        images: [\r\n          'http://47.109.144.239/upload_img/bn_01.png',\r\n          'http://47.109.144.239/upload_img/bn_02.png',\r\n          'http://47.109.144.239/upload_img/bn_03.png'\r\n        ],\r\n        // 当前显示的图片索引\r\n        currentIndex: 0,\r\n        // 定时器 ID\r\n        timer: null,\r\n        totalStats: [],\r\n        countConifg: {\r\n          number: [100],\r\n          content: '{nt}个'\r\n        },\r\n        ringChartConfig: {\r\n          data: []\r\n        },\r\n        cCapsuleChartConfig: {\r\n          data: [\r\n          ]\r\n        },\r\n        scrollBoardConfig: {\r\n          header: ['姓名', '请假时间', '返校时间'],\r\n          data: [],\r\n          index: false,\r\n          columnWidth: [80],\r\n          align: ['center']\r\n        },\r\n        precentPondConfig: {\r\n          value: 0,\r\n          borderWidth: 1,\r\n          borderRadius: 5,\r\n          borderGap: 5,\r\n          localGradient: false\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleBack() {\r\n        this.$router.push('/');\r\n        // 或使用命名路由跳转（需与路由配置一致）\r\n        // this.$router.push({ name: 'Home' });\r\n      },\r\n      async listData() {\r\n        try {\r\n          this.loading = true;\r\n          this.scrollData()\r\n          this.percentPondData()\r\n          this.cCapsuleChartData()\r\n          this.ringChartData()\r\n          this.digitalData()\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async fetchScoreTrend() {\r\n        try {\r\n          const { data } = await getScoreTrend();\r\n          console.log(\"zhexian\" + data)\r\n          if (data && data.length > 0) {\r\n            this.processChartData(data);\r\n          } else {\r\n            console.warn('无评分趋势数据');\r\n            this.myChart.clear();\r\n          }\r\n        } catch (error) {\r\n          console.error('获取评分趋势失败:', error);\r\n          this.myChart.showLoading('default', { text: '数据加载失败' });\r\n        }\r\n      },\r\n      processChartData(apiData) {\r\n        // 按接口返回数据结构处理\r\n        const categories = apiData.map(item => item.month);\r\n        const series = [\r\n          {\r\n            name: '综合评分',\r\n            data: apiData.map(item => item.globalAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '建筑评分',\r\n            data: apiData.map(item => item.buildingAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '床位评分',\r\n            data: apiData.map(item => item.bedAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          },\r\n          {\r\n            name: '室内评分',\r\n            data: apiData.map(item => item.indoorAvg.toFixed(1)),\r\n            type: 'line',\r\n            smooth: true\r\n          }\r\n        ];\r\n\r\n        this.updateChartConfig(categories, series);\r\n      },\r\n\r\n      updateChartConfig(categories, series) {\r\n        const option = {\r\n          title: {\r\n            text: '宿舍卫生评分趋势',\r\n            textStyle: {\r\n              color: '#fff',\r\n              fontSize: 16\r\n            },\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            formatter: params => {\r\n              const date = params[0].axisValue;\r\n              return params.map(p => `\r\n          <div style=\"display: flex; align-items: center\">\r\n            <span style=\"display:inline-block;width:8px;height:8px;border-radius:50%;background:${p.color};margin-right:5px\"></span>\r\n            ${p.seriesName}: ${p.value}分\r\n          </div>\r\n        `).join('') + `<div>${date}</div>`;\r\n            }\r\n          },\r\n          legend: {\r\n            data: series.map(s => s.name),\r\n            textStyle: { color: '#fff' },\r\n            bottom: 10\r\n          },\r\n          grid: {\r\n            top: 60,\r\n            bottom: 80,\r\n            containLabel: true\r\n          },\r\n          xAxis: {\r\n            type: 'category',\r\n            boundaryGap: false,\r\n            data: categories,\r\n            axisLabel: {\r\n              color: '#fff',\r\n              formatter: value => dayjs(value).format('YYYY-MM')\r\n            },\r\n            axisLine: {\r\n              lineStyle: { color: '#fff' }\r\n            }\r\n          },\r\n          yAxis: {\r\n            type: 'value',\r\n            min: 0,\r\n            max: 10,\r\n            axisLabel: {\r\n              color: '#fff',\r\n              formatter: '{value} 分'\r\n            },\r\n            splitLine: {\r\n              lineStyle: { color: 'rgba(255,255,255,0.1)' }\r\n            },\r\n            axisLine: {\r\n              lineStyle: { color: '#fff' }\r\n            }\r\n          },\r\n          series: series.map((s, index) => ({\r\n            ...s,\r\n            lineStyle: {\r\n              width: 2,\r\n              shadowColor: 'rgba(0,0,0,0.3)',\r\n              shadowBlur: 8\r\n            },\r\n            itemStyle: {\r\n              color: ['#4FFA6E', '#FFC233', '#FF6D4A', '#6A8BFF'][index]\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: this.getAreaColor(index) },\r\n                { offset: 1, color: 'rgba(255,255,255,0)' }\r\n              ])\r\n            }\r\n          }))\r\n        };\r\n\r\n        this.myChart.setOption(option, true);\r\n        this.myChart.hideLoading();\r\n      },\r\n\r\n      getAreaColor(index) {\r\n        const colors = [\r\n          'rgba(79,250,110,0.3)',\r\n          'rgba(255,194,51,0.3)',\r\n          'rgba(255,109,74,0.3)',\r\n          'rgba(106,139,255,0.3)'\r\n        ];\r\n        return colors[index];\r\n      },\r\n      async digitalData() {\r\n        const { data } = await totalStats()\r\n        const formattedData = [\r\n          { label: '维修上报数', value: data[0].repairCount, color: { gradient: ['#00F2FE', '#4FACFE'] } },\r\n          { label: '请假申请数', value: data[0].leaveCount, color: { gradient: ['#FAD961', '#F76B1C'] } },\r\n          { label: '病因上报数', value: data[0].absenceCount, color: { gradient: ['#6F86FF', '#48C6EF'] } },\r\n          { label: '学生总人数', value: data[0].studentNum, color: { gradient: ['#42E695', '#3BB2B8'] } }\r\n        ]\r\n\r\n        this.totalStats = formattedData\r\n\r\n      },\r\n      async ringChartData() {\r\n        const { data } = await stats()\r\n\r\n        console.log(data[0].acount)\r\n\r\n        const formattedData = [\r\n          {\r\n            name: \"A级\",\r\n            value: data[0].acount\r\n          },\r\n          {\r\n            name: \"B级\",\r\n            value: data[0].bcount\r\n          },\r\n          {\r\n            name: \"C级\",\r\n            value: data[0].ccount\r\n          },\r\n          {\r\n            name: \"D级\",\r\n            value: data[0].dcount\r\n          }\r\n        ]\r\n\r\n        this.ringChartConfig = {\r\n          ...this.ringChartConfig, // 保留其他配置项\r\n          data: formattedData,\r\n          lineWidth: 50,\r\n        }\r\n        console.log(this.ringChartConfig)\r\n        this.ringRefreshKey = Date.now();\r\n      },\r\n      async cCapsuleChartData() {\r\n        const { data } = await getAllStudentNum();\r\n\r\n        const formattedData = data.map(item => ({\r\n          name: item.name,\r\n          value: item.studentNum\r\n        }))\r\n\r\n        this.cCapsuleChartConfig = {\r\n          ...this.cCapsuleChartConfig,\r\n          data: formattedData,\r\n\r\n          colors: ['#4FACFE', '#F76B1C'], // 示例颜色\r\n          unit: '人',\r\n          showValue: true\r\n        }\r\n        this.capsuleRefreshKey = Date.now()\r\n      },\r\n      async percentPondData() {\r\n        const { data } = await stuList(this.listQuery);\r\n        // 计算离校人数和总人数\r\n        const total = data.list.length;\r\n        const leave = data.list.reduce((acc, cur) => cur.isLeave ? acc + 1 : acc, 0);\r\n\r\n        // 计算在校率百分比（保留两位小数）\r\n        const inSchoolRatio = total > 0 ? ((total - leave) / total * 100).toFixed(2) : 0;\r\n\r\n        // 更新百分比水池配置（数值范围0-100）\r\n        this.precentPondConfig = {\r\n          ...this.precentPondConfig,\r\n          value: parseFloat(inSchoolRatio) // 转换为浮点数\r\n        };\r\n\r\n      },\r\n      async scrollData() {\r\n        const { data } = await leaveList(this.listQuery);\r\n\r\n        // 格式化数据为二维数组\r\n        const formattedData = data.list\r\n          .filter(item => !item.isBack) // 筛选isBack为false的条目\r\n          .map(item => [\r\n            item.student?.name || '未知',\r\n            this.formatTime(item.time),\r\n            this.formatTime(item.backDate)\r\n          ]);\r\n        // 响应式更新数据\r\n        this.$set(this.scrollBoardConfig, 'data', formattedData);\r\n        this.scrollBoardKey = Date.now();\r\n      },\r\n      formatTime(timestamp) {\r\n        return dayjs(timestamp).format('YYYY-MM-DD HH:mm');\r\n      },\r\n      handleImageLoad(e) {\r\n        const img = e.target\r\n        this.imgRatio = img.naturalHeight / img.naturalWidth\r\n        this.$nextTick(() => {\r\n          this.$forceUpdate() // 强制触发视图更新[2,6](@ref)\r\n        })\r\n      },\r\n      // 切换到上一张图片\r\n      prevSlide() {\r\n        this.currentIndex =\r\n          this.currentIndex === 0\r\n            ? this.images.length - 1\r\n            : this.currentIndex - 1;\r\n      },\r\n      // 切换到下一张图片\r\n      nextSlide() {\r\n        this.currentIndex = (this.currentIndex + 1) % this.images.length\r\n      }\r\n    },\r\n    // 生命周期\r\n    mounted() {\r\n      this.images.forEach(img => {\r\n        new Image().src = img // 预加载所有图片\r\n      })\r\n      this.timer = setInterval(() => {\r\n        this.nextSlide()\r\n      }, 2000)\r\n      this.myChart = echarts.init(document.getElementById('stackedLine'))\r\n      window.addEventListener('resize', () => this.myChart.resize())\r\n      this.fetchScoreTrend() // 确保调用数据获取\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer)\r\n      if (this.myChart) {\r\n        this.myChart.dispose();\r\n        window.removeEventListener('resize', this.myChart.resize);\r\n      }\r\n    },\r\n    created() {\r\n      this.listData()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .fullscreen-container {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    color: #fff;\r\n    z-index: 100;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .dashboard-container {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: #001529;\r\n    color: #fff;\r\n    overflow: hidden;\r\n    background-image: url('../../../assets/bg.jpg');\r\n    background-position: center;\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n  }\r\n\r\n  .main-content {\r\n    display: grid;\r\n    grid-template-columns: 1fr 2fr 1fr;\r\n    gap: 2vmin;\r\n    height: calc(100vh - 100px);\r\n    margin-top: 50px;\r\n    padding: 0 20px;\r\n  }\r\n\r\n  .left-section,\r\n  .right-section {\r\n    display: grid;\r\n    grid-template-rows: 1fr 1fr;\r\n    flex-direction: column;\r\n    gap: 2vmin;\r\n  }\r\n\r\n  .center-section {\r\n    display: grid;\r\n    grid-template-rows: 1fr 1fr;\r\n    gap: 2vmin;\r\n    padding: 0 2vmin;\r\n  }\r\n\r\n  .dv-border-box-8 {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .slider {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 56.25%;\r\n    overflow: hidden;\r\n    z-index: 1;\r\n\r\n  }\r\n\r\n  .slider img {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    transform: translate(-50%, -50%);\r\n    object-fit: cover;\r\n    will-change: transform;\r\n  }\r\n\r\n  #stackedLine {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .digital-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, minmax(0, 1fr));\r\n    gap: 2vh;\r\n    /* 改用视口单位 */\r\n    height: 100%;\r\n    /* 新增 */\r\n    padding: 1.5%;\r\n    /* 相对单位替代固定像素 */\r\n    box-sizing: border-box;\r\n    /* 确保padding不溢出 */\r\n  }\r\n\r\n  .digital-item {\r\n    background: rgba(16, 35, 78, 0.6);\r\n    border-radius: 8px;\r\n    padding: 50px;\r\n    position: relative;\r\n    overflow: hidden;\r\n    min-height: 120px;\r\n    /* 设置最小高度 */\r\n    padding: 5% 8%;\r\n    /* 百分比替代固定像素 */\r\n    display: flex;\r\n    /* 启用弹性布局 */\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    /* 改进点3：动态尺寸约束 */\r\n    height: calc((100% - 2vh)/2);\r\n    /* 计算高度 */\r\n  }\r\n\r\n  .digital-label {\r\n    font-size: clamp(12px, 1.2vw, 16px);\r\n    /* 添加字体响应式 */\r\n    color: #89f7fe;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .digital-value {\r\n    position: relative;\r\n    font-size: clamp(24px, 3vw, 36px);\r\n    font-family: 'DS-Digital', monospace;\r\n  }\r\n\r\n  .value-front {\r\n    color: #4af7ff;\r\n    text-shadow: 0 0 10px rgba(74, 247, 255, 0.5);\r\n  }\r\n\r\n  .value-bg {\r\n    position: absolute;\r\n    color: rgb(255, 255, 255);\r\n    z-index: 0;\r\n  }\r\n\r\n  /* 数据流动效果 */\r\n  .digital-item::after {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: -100%;\r\n    width: 50%;\r\n    height: 100%;\r\n    background: linear-gradient(to right,\r\n        rgba(255, 255, 255, 0) 0%,\r\n        rgba(255, 255, 255, 0.1) 50%,\r\n        rgba(255, 255, 255, 0) 100%);\r\n    transform: skewX(-45deg);\r\n    animation: flow 3s infinite;\r\n  }\r\n\r\n  @keyframes flow {\r\n    0% {\r\n      left: -100%;\r\n    }\r\n\r\n    100% {\r\n      left: 200%;\r\n    }\r\n  }\r\n\r\n  .float-button {\r\n    position: fixed;\r\n    z-index: 99999;\r\n    bottom: 30px;\r\n    right: 30px;\r\n    background: rgba(0, 123, 255, 0.9);\r\n    border-radius: 24px;\r\n    padding: 12px 24px;\r\n    cursor: pointer;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n    transition: all 0.3s ease;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .float-button:hover {\r\n    background: #007bff;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 6px 16px rgba(0, 123, 255, 0.3);\r\n  }\r\n\r\n  .button-content {\r\n    display: flex;\r\n    align-items: center;\r\n    color: white;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .el-icon-back {\r\n    font-size: 20px;\r\n    margin-right: 8px;\r\n  }\r\n\r\n  .border-box-content h2 {\r\n    position: absolute;\r\n  }\r\n</style>"]}]}