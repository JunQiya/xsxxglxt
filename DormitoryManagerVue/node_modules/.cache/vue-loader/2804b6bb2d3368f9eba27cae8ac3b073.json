{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\repair\\components\\imagesUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\views\\manage\\repair\\components\\imagesUpload.vue","mtime":1626253806000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7Z2V0VG9rZW59IGZyb20gIkAvdXRpbHMvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW1hZ2VzVXBsb2FkIiwKICBwcm9wczp7CiAgICBpbWFnZXM6IHsKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhY3Rpb246IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL3Blcm1pc3Npb24vdXBsb2FkIiwKICAgICAgaGVhZGVyOiB7CiAgICAgICAgIl91dCI6IGdldFRva2VuKCkKICAgICAgfSwKICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuaW1hZ2VMaXN0LnNwbGljZSh0aGlzLmltYWdlTGlzdC5pbmRleE9mKGZpbGUuc2F2ZU5hbWUpLCAxKQogICAgICB0aGlzLiRlbWl0KCJvbkNoYW5nZSIsIHRoaXMuaW1hZ2VMaXN0KQogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlICE9PSAyMDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgICAgZmlsZUxpc3Quc3BsaWNlKGZpbGVMaXN0LmluZGV4T2YoZmlsZSksIDEpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZS5zYXZlTmFtZSA9IHJlcy5kYXRhCiAgICAgICAgdGhpcy5pbWFnZUxpc3QucHVzaChyZXMuZGF0YSkKICAgICAgICB0aGlzLiRlbWl0KCJvbkNoYW5nZSIsIHRoaXMuaW1hZ2VMaXN0KQogICAgICB9CiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgIGZvciAobGV0IGkgb2YgdGhpcy5pbWFnZXMpIHsKICAgICAgICB0aGlzLmltYWdlTGlzdC5wdXNoKGkpCiAgICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKHsKICAgICAgICAgIHNhdmVOYW1lOiBpLAogICAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0lNR19QUkVGSVggKyBpCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfQp9Cg=="},{"version":3,"sources":["imagesUpload.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"imagesUpload.vue","sourceRoot":"src/views/manage/repair/components","sourcesContent":["<template>\n  <div>\n    <el-upload\n        :action=\"action\"\n        :headers=\"header\"\n        list-type=\"picture-card\"\n        :on-preview=\"handlePictureCardPreview\"\n        :on-success=\"handleSuccess\"\n        :file-list=\"fileList\"\n        :on-remove=\"handleRemove\">\n      <i class=\"el-icon-plus\"></i>\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {getToken} from \"@/utils/auth\";\nexport default {\n  name: \"imagesUpload\",\n  props:{\n    images: {\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      action: process.env.VUE_APP_BASE_API + \"/permission/upload\",\n      header: {\n        \"_ut\": getToken()\n      },\n      imageList: [],\n      fileList: []\n    };\n  },\n  methods: {\n    handleRemove(file, fileList) {\n      this.imageList.splice(this.imageList.indexOf(file.saveName), 1)\n      this.$emit(\"onChange\", this.imageList)\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleSuccess(res, file, fileList) {\n      if (res.statusCode !== 200) {\n        this.$message({\n          message: res.msg,\n          type: 'error'\n        });\n        fileList.splice(fileList.indexOf(file), 1)\n      } else {\n        file.saveName = res.data\n        this.imageList.push(res.data)\n        this.$emit(\"onChange\", this.imageList)\n      }\n    },\n    init() {\n      this.fileList = []\n      for (let i of this.images) {\n        this.imageList.push(i)\n        this.fileList.push({\n          saveName: i,\n          url: process.env.VUE_APP_IMG_PREFIX + i\n        })\n      }\n    }\n  },\n  created() {\n    this.init()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}