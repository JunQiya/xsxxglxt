{"remainingRequest":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\components\\Message\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\src\\components\\Message\\index.vue","mtime":1700581660000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1678020086000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678020084000},{"path":"G:\\学生宿舍信息综合管理与服务平台\\DormitoryManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678020088000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7bGlzdCwgZGVsZXRlUmVjZWl2ZSwgZGVsZXRlU2VuZCwgcXVlcnksbGlzdFNlbmQsIHNlbmRUb0J1aWxkaW5nLCBxdWVyeWRldGFpbH0gZnJvbSAiQC9hcGkvbm90aWNlIjsKaW1wb3J0IHtkZWwsIGxpc3RGbG93LCBsaXN0TXksIGxpc3RNeUZsb3csIHF1ZXJ5IGFzIHF1ZXJ5RGVwYXJ0LCB1cGRhdGUgYXMgdXBkYXRlRGVwYXJ0fSBmcm9tICJAL2FwaS9kZXBhcnQiOwppbXBvcnQge2xpc3QgYXMgbGlzdEJ1aWxkaW5nfSBmcm9tICdAL2FwaS9idWlsZGluZycKaW1wb3J0IHtxdWVyeSBhcyBxdWVyeVN0dWRlbnR9IGZyb20gJ0AvYXBpL3N0dWRlbnQnCmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JwppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsKaW1wb3J0IHtjb3VudFVucmVhZH0gZnJvbSAiQC9hcGkvbG9naW4iOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBjb21wb25lbnRzOiB7VHJlZVNlbGVjdH0sCiAgcHJvcHM6IFsnY2hhbmdlJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2VUb1NlbmRSdWxlczp7CiAgICAgICAgbXNnOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7floavlhpnlhoXlrrknLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgXQogICAgICB9LAogICAgICB2ZXJpZnlSdWxlczogewogICAgICAgIGlzQWdyZWU6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZToi6YCJ5oup5piv5ZCm5ZCM5oSPIix0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXQogICAgICB9LAogICAgICBtZXNzYWdlVG9TZW5kOiB7CiAgICAgICAgbXNnOnVuZGVmaW5lZCwKICAgICAgICB0bzogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIGJ1aWxkaW5nTGlzdDpbXSwKICAgICAgYWN0aXZlTmFtZTogJzEnLAogICAgICBtc2dBY3RpdmVOYW1lOiAncmVjZWl2ZScsCiAgICAgIGRlcGFydEFjdGl2ZU5hbWU6ICdyZWNlaXZlJywKICAgICAgbXNnOnsKICAgICAgICB0bzogdW5kZWZpbmVkLAogICAgICAgIG1zZzogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIG1zZ0RldGFpbDogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgbXNnOiB1bmRlZmluZWQsCiAgICAgICAgdXNlcjoge30KICAgICAgfSwKICAgICAgbXNnRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRlcGFydFZlcmlmeURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB2ZXJpZnlEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGVwYXJ0QXBwbGljYXRpb25Vc2VyOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBpc0FncmVlOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgcGFnZUluZm86IHt9LAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHJvd3M6IDEwLAogICAgICAgIGVudGl0eToge30KICAgICAgfSwKICAgICAgc3R1ZGVudDoge30sCiAgICAgIGRlcGFydFZlcmlmeUxpc3Q6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBkb1RhcENoYW5nZSgpIHsKICAgICAgbGV0IHRhYiA9IHRoaXMuYWN0aXZlTmFtZQogICAgICBhd2FpdCB0aGlzLnJlZnJlc2hDb3VudCgpCiAgICAgIGlmICh0YWIgPT09ICcxJykgewogICAgICAgIGF3YWl0IHRoaXMuZG9Nc2dUYXBDaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRhYiA9PT0gJzInKSB7CiAgICAgICAgYXdhaXQgdGhpcy5kb0RlcGFydFRhYkNoYW5nZSgpCiAgICAgIH0gZWxzZSBpZiAodGFiID09PSAnNCcpIHsKICAgICAgICB0aGlzLm1lc3NhZ2VUb1NlbmQgPSB7CiAgICAgICAgICBtc2c6dW5kZWZpbmVkLAogICAgICAgICAgdG86IHVuZGVmaW5lZAogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFzeW5jIGRvRGVwYXJ0VGFiQ2hhbmdlKCkgewogICAgICBpZiAodGhpcy5kZXBhcnRBY3RpdmVOYW1lID09PSAncmVjZWl2ZScpIHsKICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBsaXN0TXlGbG93KHRoaXMubGlzdFF1ZXJ5KQogICAgICAgIHRoaXMucGFnZUluZm8gPSBkYXRhCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgbGlzdE15KHRoaXMubGlzdFF1ZXJ5KQogICAgICAgIHRoaXMucGFnZUluZm8gPSBkYXRhCiAgICAgIH0KICAgIH0sCiAgICBzdWJtaXRWZXJpZnkoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3ZlcmlmeUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHVwZGF0ZURlcGFydCh0aGlzLmRlcGFydEFwcGxpY2F0aW9uVXNlcikudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuZG9UYXBDaGFuZ2UoKQogICAgICAgICAgICAgIHRoaXMuY2xvc2VWZXJpZnlEaWFsb2coKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSkKCiAgICB9LAogICAgc2hvd1ZlcmlmeURpYWxvZyhpZCkgewogICAgICB0aGlzLmRlcGFydEFwcGxpY2F0aW9uVXNlci5pZCA9IGlkCiAgICAgIHRoaXMudmVyaWZ5RGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBjbG9zZVZlcmlmeURpYWxvZygpIHsKICAgICAgdGhpcy5kZXBhcnRBcHBsaWNhdGlvblVzZXIgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBpc0FncmVlOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiB1bmRlZmluZWQKICAgICAgfQogICAgICB0aGlzLnZlcmlmeURpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIGFzeW5jIHNob3dEZXBhcnRWZXJpZnlEaWFsb2coaWQpIHsKICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgbGlzdEZsb3coaWQpCiAgICAgIHRoaXMuZGVwYXJ0VmVyaWZ5TGlzdCA9IGRhdGEKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLmRlcGFydFZlcmlmeURpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICBkZXBhcnRWZXJpZnlEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy5kZXBhcnRWZXJpZnlMaXN0ID0gW10KICAgICAgdGhpcy5kZXBhcnRWZXJpZnlEaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgIH0sCiAgICBzZW5kTXNnKCkgewogICAgICBpZiAodGhpcy5tZXNzYWdlVG9TZW5kLnRvID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nlrr/oiI3mpbwnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuJHJlZnNbJ3NlbmRNc2cnXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHNlbmRUb0J1aWxkaW5nKHRoaXMubWVzc2FnZVRvU2VuZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5jYW5jZWwoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMubWVzc2FnZVRvU2VuZCA9IHsKICAgICAgICB0bzogdW5kZWZpbmVkLAogICAgICAgIG1zZzogdW5kZWZpbmVkCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsaXN0QnVpbGRpbmdMaXN0KCkgewogICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBsaXN0QnVpbGRpbmcoKQogICAgICB0aGlzLmJ1aWxkaW5nTGlzdCA9IGRhdGEKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gdmFsCiAgICAgIHRoaXMuZG9UYXBDaGFuZ2UodGhpcy5hY3RpdmVOYW1lKQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnJvd3MgPSB2YWwKICAgICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpCiAgICB9LAogICAgYXN5bmMgbXNnUXVlcnkoaWQsdHlwZSkgewogICAgICBpZiAodHlwZSA9PT0gMSkgewogICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IHF1ZXJ5KGlkKQogICAgICAgIHRoaXMubXNnRGV0YWlsID0gZGF0YQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDIpIHsKICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBxdWVyeWRldGFpbChpZCkKICAgICAgICB0aGlzLm1zZ0RldGFpbCA9IGRhdGEKICAgICAgfQogICAgICBhd2FpdCB0aGlzLmRvVGFwQ2hhbmdlKHRoaXMuYWN0aXZlTmFtZSkKICAgICAgdGhpcy5tc2dEaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGFzeW5jIHJlZnJlc2hDb3VudCgpIHsKICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBjb3VudFVucmVhZCgpCiAgICAgIGlmIChjb3VudCkgewogICAgICAgIHN0b3JlLmNvbW1pdCgnU0VUX0NPVU5UX1VOUkVBRCcsIGNvdW50LmRhdGEpCiAgICAgIH0KICAgIH0sCiAgICBtc2dEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy5tc2dEZXRhaWwgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBtc2c6IHVuZGVmaW5lZCwKICAgICAgICB1c2VyOiB1bmRlZmluZWQKICAgICAgfQogICAgICB0aGlzLm1zZ0RpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIGFzeW5jIG1zZ0RlbChpZCwgdHlwZSkgewogICAgICBpZiAodHlwZSA9PT0gMSkgewogICAgICAgIGRlbGV0ZVJlY2VpdmUoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTonc3VjY2VzcycKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAyKXsKICAgICAgICBkZWxldGVTZW5kKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgIHR5cGU6J3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuZG9UYXBDaGFuZ2UodGhpcy5hY3RpdmVOYW1lKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMykgewogICAgICAgIGRlbChpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICB0eXBlOidzdWNjZXNzJwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmRvVGFwQ2hhbmdlKHRoaXMuYWN0aXZlTmFtZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9IAogICAgfSwKICAgIGFzeW5jIGRvTXNnVGFwQ2hhbmdlKCkgewogICAgICBpZiAodGhpcy5tc2dBY3RpdmVOYW1lID09PSAncmVjZWl2ZScpIHsKICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBsaXN0KHRoaXMubGlzdFF1ZXJ5KQogICAgICAgIHRoaXMucGFnZUluZm8gPSBkYXRhCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgbGlzdFNlbmQodGhpcy5saXN0UXVlcnkpCiAgICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGEKICAgICAgfQogICAgfSwKICAgIG5vcm1hbGl6ZXIobm9kZSkgewogICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiAhbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGlkOiBub2RlLmlkLAogICAgICAgIGxhYmVsOiBub2RlLm5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCiAgICBhc3luYyBnZXRTdHVkZW50KGlkKSB7CiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IHF1ZXJ5U3R1ZGVudChpZCkKICAgICAgdGhpcy5zdHVkZW50ID0gZGF0YQogICAgfSwKICAgIGhpZGVQb3BvdmVyKCkgewogICAgICB0aGlzLnN0dWRlbnQgPSB7fQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZG9UYXBDaGFuZ2UodGhpcy5hY3RpdmVOYW1lKQogIH0sCiAgd2F0Y2g6IHsKICAgIGNoYW5nZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gMSkgewogICAgICAgIHRoaXMuZG9UYXBDaGFuZ2UodGhpcy5hY3RpdmVOYW1lKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Message","sourcesContent":["<template>\n  <div>\n    <el-tabs v-model=\"activeName\" tab-position=\"left\" @tab-click=\"doTapChange\">\n      <el-tab-pane label=\"通知\" name=\"1\">\n        <el-tabs v-model=\"msgActiveName\" @tab-click=\"doMsgTapChange\">\n          <el-tab-pane label=\"我收到的\" name=\"receive\">\n            <div style=\"width: 80%;margin: 0 auto\">\n              <el-table :data=\"pageInfo.list\" height=\"470\">\n                <el-table-column\n                    label=\"序号\" width=\"80\"\n                >\n                  <template slot-scope=\"scope\">{{ (listQuery.page - 1) * (listQuery.rows) + scope.$index + 1 }}\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"内容\" width=\"200\">\n                  <template slot-scope=\"scope\">{{scope.row.msg.substr(0,15)}}{{scope.row.msg.length > 15 ? \"...\" : \"\"}}</template>\n                </el-table-column>\n                <el-table-column prop=\"user.realName\" label=\"发送者\" width=\"200\"></el-table-column>\n                <el-table-column label=\"时间\" prop=\"time\" width=\"200\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\n                  <template slot-scope=\"scope\">\n                    <template>\n                      <el-badge is-dot class=\"item\" v-if=\"!scope.row.isRead\">\n                      <el-button style=\"font-size: 14px;\"  type=\"primary\" @click=\"msgQuery(scope.row.id, 1)\">查看\n                      </el-button>\n                      </el-badge>\n                      <el-button v-else style=\"font-size: 16px;\"  type=\"primary\" @click=\"msgQuery(scope.row.id, 1)\">查看\n                      </el-button>\n                      <el-popconfirm title=\"确定删除吗？\" @confirm=\"msgDel(scope.row.id, 1)\">\n                        <el-button style=\"margin-left: 8px;font-size: 16px;\"\n                                   slot=\"reference\"  type=\"danger\">删除\n                        </el-button>\n                      </el-popconfirm>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n              <div class=\"page\" style=\"margin-top: 10px\">\n                <el-pagination\n                    background\n                    :hide-on-single-page=\"false\"\n                    :page-size=\"listQuery.rows\"\n                    :page-count=\"pageInfo.pages\"\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\n                    :total=\"pageInfo.total\"\n                    :current-page.sync=\"pageInfo.pageNum\"\n                    @current-change=\"handleCurrentChange\"\n                    @size-change=\"handleSizeChange\"\n                >\n                </el-pagination>\n              </div>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"我发送的\" name=\"send\">\n            <div style=\"width: 60%;margin: 0 auto\">\n              <el-table :data=\"pageInfo.list\" height=\"470\">\n                <el-table-column\n                    label=\"序号\" width=\"80\"\n                >\n                  <template slot-scope=\"scope\">{{ (listQuery.page - 1) * (listQuery.rows) + scope.$index + 1 }}\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"内容\" width=\"320\">\n                  <template slot-scope=\"scope\">{{scope.row.msg.substr(0,15)}}{{scope.row.msg.length > 15 ? \"...\" : \"\"}}</template>\n                </el-table-column>\n                <el-table-column label=\"时间\" prop=\"time\" width=\"200\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\n                  <template slot-scope=\"scope\">\n                    <template>\n                      <el-button type=\"primary\" @click=\"msgQuery(scope.row.id, 2)\">查看\n                      </el-button>\n                      <el-popconfirm title=\"确定删除吗？\" @confirm=\"msgDel(scope.row.id, 2)\">\n                        <el-button style=\"margin-left: 8px\"\n                                   slot=\"reference\"\n                                   type=\"danger\">删除\n                        </el-button>\n                      </el-popconfirm>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n              <div class=\"page\" style=\"margin-top: 10px\">\n                <el-pagination\n                    background\n                    :hide-on-single-page=\"false\"\n                    :page-size=\"listQuery.rows\"\n                    :page-count=\"pageInfo.pages\"\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\n                    :total=\"pageInfo.total\"\n                    :current-page.sync=\"pageInfo.pageNum\"\n                    @current-change=\"handleCurrentChange\"\n                    @size-change=\"handleSizeChange\"\n                >\n                </el-pagination>\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </el-tab-pane>\n      <el-tab-pane label=\"退宿审核\" name=\"2\">\n        <el-tabs v-model=\"departActiveName\" @tab-click=\"doDepartTabChange\">\n          <el-tab-pane label=\"我审核的\" name=\"receive\">\n            <div style=\"width: 90%;margin: 0 auto\">\n              <el-table :data=\"pageInfo.list\" height=\"470\">\n                <el-table-column label=\"学生姓名\">\n                  <template slot-scope=\"scope\">\n                    <el-popover\n                        placement=\"bottom\"\n                        width=\"200\"\n                        trigger=\"click\" @show=\"getStudent(scope.row.application.student.id)\" @hide=\"hidePopover\">\n                      <el-form label-width=\"40px\">\n                        <el-form-item label=\"姓名\">\n                          <el-input v-model=\"student.name\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"学号\">\n                          <el-input v-model=\"student.number\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"电话\">\n                          <el-input v-model=\"student.phone\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"班级\" v-if=\"student.faculty\">\n                          <el-input v-model=\"student.faculty.name\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"寝室\" v-if=\"student.room\">\n                          <el-input v-model=\"student.room.number\" readonly ></el-input>\n                        </el-form-item>\n                      </el-form>\n                      <span slot=\"reference\" style=\"color: #409EFF;cursor: pointer\">{{scope.row.application.student.name}}</span>\n                    </el-popover>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"申请人\" prop=\"application.applyUser.realName\"></el-table-column>\n                <el-table-column label=\"申请理由\" :show-overflow-tooltip=\"true\" prop=\"application.reason\"></el-table-column>\n                <el-table-column label=\"申请时间\" prop=\"application.time\"></el-table-column>\n                <el-table-column label=\"是否通过\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">通过</span>\n                    <span style=\"color: #F56C6C\" v-else>不通过</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"操作时间\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">{{scope.row.operateTime}}</span>\n                    <span style=\"color: #F56C6C\" v-else>{{scope.row.operateTime}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"审核理由\" :show-overflow-tooltip=\"true\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">{{scope.row.reason}}</span>\n                    <span style=\"color: #F56C6C\" v-else>{{scope.row.reason}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\n                  <template slot-scope=\"scope\">\n                    <el-button type=\"success\" style=\"font-size: 16px;\"  :disabled=\"scope.row.isAgree !== undefined\" @click=\"showVerifyDialog(scope.row.id)\">审核</el-button>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"我发起的\" name=\"send\">\n            <div style=\"width: 80%;margin: 0 auto\">\n              <el-table :data=\"pageInfo.list\" height=\"470\">\n                <el-table-column label=\"学生姓名\">\n                  <template slot-scope=\"scope\">\n                    <el-popover\n                        placement=\"bottom\"\n                        width=\"200\"\n                        trigger=\"click\" @show=\"getStudent(scope.row.student.id)\" @hide=\"hidePopover\">\n                      <el-form label-width=\"40px\">\n                        <el-form-item label=\"姓名\">\n                          <el-input v-model=\"student.name\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"学号\">\n                          <el-input v-model=\"student.number\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"电话\">\n                          <el-input v-model=\"student.phone\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"班级\" v-if=\"student.faculty\">\n                          <el-input v-model=\"student.faculty.name\" readonly ></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"寝室\" v-if=\"student.room\">\n                          <el-input v-model=\"student.room.number\" readonly ></el-input>\n                        </el-form-item>\n                      </el-form>\n                      <span slot=\"reference\" style=\"color: #409EFF;cursor: pointer\">{{scope.row.student.name}}</span>\n                    </el-popover>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"理由\" prop=\"reason\"></el-table-column>\n                <el-table-column label=\"申请时间\" prop=\"time\"></el-table-column>\n                <el-table-column label=\"状态\">\n                  <template slot-scope=\"scope\">\n                    {{scope.row.isFinished ? '已结束，' + (scope.row.isPass? \"通过\":\"不通过\"):'正在审核'}}\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"操作\" width=\"380\" fixed=\"right\">\n                  <template slot-scope=\"scope\">\n                    <el-button style=\"font-size: 16px;\"  type=\"primary\" @click=\"showDepartVerifyDialog(scope.row.id)\"> 查看审核记录</el-button>\n                    <el-button style=\"font-size: 16px;\"  type=\"danger\" :disabled=\"scope.row.isFinished\" @click=\"msgDel(scope.row.id, 3)\"> 撤销申请</el-button>\n                  </template>\n                </el-table-column>\n              </el-table>\n              <div class=\"page\" style=\"margin-top: 10px\">\n                <el-pagination\n                    background\n                    :hide-on-single-page=\"false\"\n                    :page-size=\"listQuery.rows\"\n                    :page-count=\"pageInfo.pages\"\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\n                    :total=\"pageInfo.total\"\n                    :current-page.sync=\"pageInfo.pageNum\"\n                    @current-change=\"handleCurrentChange\"\n                    @size-change=\"handleSizeChange\"\n                >\n                </el-pagination>\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </el-tab-pane>\n      <el-tab-pane label=\"发送通知\" name=\"4\" v-has-permi=\"['home:send:msg']\">\n        <div style=\"width: 80%;margin: 20px auto\">\n          <el-form :model=\"messageToSend\" ref=\"sendMsg\" :rules=\"messageToSendRules\" label-width=\"100px\">\n            <el-form-item label=\"接收宿舍楼\" prop=\"to\">\n              <tree-select\n                  @open=\"listBuildingList\"\n                  v-model=\"messageToSend.to\"\n                  :options=\"buildingList\"\n                  :normalizer=\"normalizer\"\n                  :show-count=\"true\"\n                  placeholder=\"选择宿舍楼\">\n              </tree-select>\n            </el-form-item>\n            <el-form-item label=\"通知内容\" prop=\"msg\">\n              <el-input type=\"textarea\" v-model=\"messageToSend.msg\" rows=\"10\" placeholder=\"输入通知内容\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"sendMsg\"> 发 送</el-button>\n              <el-button type=\"danger\" @click=\"cancel\"> 清 空</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n    <div class=\"msg-dialog\">\n      <el-dialog :visible.sync=\"msgDialogVisible\" @closed=\"msgDialogClose\" append-to-body title=\"详情\" width=\"40%\">\n        <el-form label-width=\"80px\">\n          <el-form-item label=\"发送者\" v-if=\"msgDetail.user\">\n            <el-input readonly v-model=\"msgDetail.user.realName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"时间\">\n            <el-input readonly v-model=\"msgDetail.time\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"内容\">\n            <el-input type=\"textarea\" readonly v-model=\"msgDetail.msg\" rows=\"10\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"接收者\" v-if=\"msgDetail.receiveUsers\">\n            <div style=\"width:50%;float: left\" v-for=\"item of msgDetail.receiveUsers\" :key=\"item.id\">\n              <span>{{item.user.realName}} </span>\n              <span v-if=\"item.isRead\" style=\"color: #67C23A\"> 已读</span>\n              <span v-else style=\"color: #909399\"> 未读</span>\n            </div>\n          </el-form-item>\n        </el-form>\n      </el-dialog>\n    </div>\n    <div class=\"depart-dialog\">\n      <el-dialog :visible.sync=\"departVerifyDialogVisible\" @closed=\"departVerifyDialogClose\"\n                 append-to-body title=\"审核记录\" width=\"40%\">\n        <el-timeline>\n          <el-timeline-item\n              v-for=\"(activity, index) in departVerifyList\"\n              :key=\"index\"\n              :color=\"activity.isAgree === undefined?'':activity.isAgree?'#0bbd87':'#f56c6c'\"\n              :timestamp=\"activity.operateTime\">\n            {{activity.operateUser.realName + \"：\" +\n          (activity.isAgree===undefined ? \"等待审核\" : ((activity.isAgree?\"通过\":\"不通过\") +  \"，原因：\" + (activity.reason||\"无\")))}}\n          </el-timeline-item>\n        </el-timeline>\n      </el-dialog>\n      <el-dialog :visible.sync=\"verifyDialogVisible\" append-to-body title=\"审核\" @close=\"closeVerifyDialog\" width=\"45%\">\n        <el-form label-width=\"80px\" :rules=\"verifyRules\" :model=\"departApplicationUser\" ref=\"verifyForm\">\n          <el-form-item label=\"是否通过\" prop=\"isAgree\">\n            <el-radio v-model=\"departApplicationUser.isAgree\" :label=\"true\">通过</el-radio>\n            <el-radio v-model=\"departApplicationUser.isAgree\" :label=\"false\">不通过</el-radio>\n          </el-form-item>\n          <el-form-item label=\"原因\">\n            <el-input type=\"textarea\" rows=\"10\" v-model=\"departApplicationUser.reason\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"submitVerify\"> 提 交</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\nimport {list, deleteReceive, deleteSend, query,listSend, sendToBuilding, querydetail} from \"@/api/notice\";\nimport {del, listFlow, listMy, listMyFlow, query as queryDepart, update as updateDepart} from \"@/api/depart\";\nimport {list as listBuilding} from '@/api/building'\nimport {query as queryStudent} from '@/api/student'\nimport TreeSelect from '@riophae/vue-treeselect'\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\nimport {countUnread} from \"@/api/login\";\nimport store from \"@/store\";\n\nexport default {\n  name: \"index\",\n  components: {TreeSelect},\n  props: ['change'],\n  data() {\n    return {\n      messageToSendRules:{\n        msg: [\n          {required: true, message: '请填写内容', trigger: 'blur'}\n        ]\n      },\n      verifyRules: {\n        isAgree: [\n          {required: true, message:\"选择是否同意\",trigger: \"blur\"}\n        ]\n      },\n      messageToSend: {\n        msg:undefined,\n        to: undefined\n      },\n      buildingList:[],\n      activeName: '1',\n      msgActiveName: 'receive',\n      departActiveName: 'receive',\n      msg:{\n        to: undefined,\n        msg: undefined\n      },\n      msgDetail: {\n        id: undefined,\n        msg: undefined,\n        user: {}\n      },\n      msgDialogVisible: false,\n      departVerifyDialogVisible: false,\n      verifyDialogVisible: false,\n      departApplicationUser: {\n        id: undefined,\n        isAgree: undefined,\n        reason: undefined\n      },\n      pageInfo: {},\n      listQuery: {\n        page: 1,\n        rows: 10,\n        entity: {}\n      },\n      student: {},\n      departVerifyList: []\n    }\n  },\n  methods: {\n    async doTapChange() {\n      let tab = this.activeName\n      await this.refreshCount()\n      if (tab === '1') {\n        await this.doMsgTapChange()\n      } else if (tab === '2') {\n        await this.doDepartTabChange()\n      } else if (tab === '4') {\n        this.messageToSend = {\n          msg:undefined,\n          to: undefined\n        }\n      }\n    },\n    async doDepartTabChange() {\n      if (this.departActiveName === 'receive') {\n        const {data} = await listMyFlow(this.listQuery)\n        this.pageInfo = data\n      } else {\n        const {data} = await listMy(this.listQuery)\n        this.pageInfo = data\n      }\n    },\n    submitVerify() {\n      this.$refs['verifyForm'].validate((valid) => {\n        if (valid) {\n          updateDepart(this.departApplicationUser).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n              this.doTapChange()\n              this.closeVerifyDialog()\n            }\n          })\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n\n    },\n    showVerifyDialog(id) {\n      this.departApplicationUser.id = id\n      this.verifyDialogVisible = true\n    },\n    closeVerifyDialog() {\n      this.departApplicationUser = {\n        id: undefined,\n        isAgree: undefined,\n        reason: undefined\n      }\n      this.verifyDialogVisible = false\n    },\n    async showDepartVerifyDialog(id) {\n      const {data} = await listFlow(id)\n      this.departVerifyList = data\n      if (data) {\n        this.departVerifyDialogVisible = true\n      }\n    },\n    departVerifyDialogClose() {\n      this.departVerifyList = []\n      this.departVerifyDialogVisible = false\n    },\n    sendMsg() {\n      if (this.messageToSend.to === undefined) {\n        this.$message({\n          message: '请选择宿舍楼',\n          type: 'error'\n        });\n        return\n      }\n      this.$refs['sendMsg'].validate((valid) => {\n        if (valid) {\n          sendToBuilding(this.messageToSend).then(res => {\n            if (res.statusCode === 200) {\n              this.$message({\n                message: res.msg,\n                type: 'success'\n              });\n            }\n          })\n          this.cancel()\n        } else {\n          this.$message({\n            message: '请正确填写参数',\n            type: 'error'\n          });\n          return false;\n        }\n      })\n    },\n    cancel() {\n      this.messageToSend = {\n        to: undefined,\n        msg: undefined\n      }\n    },\n    async listBuildingList() {\n      const {data} = await listBuilding()\n      this.buildingList = data\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.doTapChange(this.activeName)\n    },\n    handleSizeChange(val) {\n      this.listQuery.rows = val\n      this.doTapChange(this.activeName)\n    },\n    async msgQuery(id,type) {\n      if (type === 1) {\n        const {data} = await query(id)\n        this.msgDetail = data\n      } else if (type === 2) {\n        const {data} = await querydetail(id)\n        this.msgDetail = data\n      }\n      await this.doTapChange(this.activeName)\n      this.msgDialogVisible = true\n    },\n    async refreshCount() {\n      const count = await countUnread()\n      if (count) {\n        store.commit('SET_COUNT_UNREAD', count.data)\n      }\n    },\n    msgDialogClose() {\n      this.msgDetail = {\n        id: undefined,\n        msg: undefined,\n        user: undefined\n      }\n      this.msgDialogVisible = false\n    },\n    async msgDel(id, type) {\n      if (type === 1) {\n        deleteReceive(id).then(res => {\n          if (res.statusCode === 200) {\n            this.$message({\n              message: res.msg,\n              type:'success'\n            })\n            this.doTapChange(this.activeName)\n          }\n        })\n      } else if (type === 2){\n        deleteSend(id).then(res => {\n          if (res.statusCode === 200) {\n            this.$message({\n              message: res.msg,\n              type:'success'\n            })\n            this.doTapChange(this.activeName)\n          }\n        })\n      } else if (type === 3) {\n        del(id).then(res => {\n          if (res.statusCode === 200) {\n            this.$message({\n              message: res.msg,\n              type:'success'\n            })\n            this.doTapChange(this.activeName)\n          }\n        })\n      } \n    },\n    async doMsgTapChange() {\n      if (this.msgActiveName === 'receive') {\n        const {data} = await list(this.listQuery)\n        this.pageInfo = data\n      } else {\n        const {data} = await listSend(this.listQuery)\n        this.pageInfo = data\n      }\n    },\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.id,\n        label: node.name,\n        children: node.children\n      };\n    },\n    async getStudent(id) {\n      const {data} = await queryStudent(id)\n      this.student = data\n    },\n    hidePopover() {\n      this.student = {}\n    }\n  },\n  mounted() {\n    this.doTapChange(this.activeName)\n  },\n  watch: {\n    change(val) {\n      if (val === 1) {\n        this.doTapChange(this.activeName)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}